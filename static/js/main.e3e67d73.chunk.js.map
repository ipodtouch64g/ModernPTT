{"version":3,"sources":["../../ptt-client/dist/utils/index.js","../../ptt-client/dist/utils/char.js","../../ptt-client/dist/utils/query-builder/SelectQueryBuilder.js","../../ptt-client/dist/socket.js","../../ptt-client/dist/sites/ptt/config.js","../../ptt-client/dist/index.js","../../ptt-client/dist/sites/ptt/index.js","../../ptt-client/dist/sites/ptt/bot.js","../../ptt-client/dist/utils/decode.js","../../ptt-client/dist/utils/encode.js","../../ptt-client/dist/utils/keymap.js","../../ptt-client/dist/sites/ptt/model/article.js","../../ptt-client/dist/utils/query-builder/QueryBuilder.js","../../ptt-client/dist/sites/ptt/model/board.js","../../ptt-client/dist/sites/ptt/model/mail.js","components/UserContext.js","components/BotContext.js","components/usePrev.js","components/ProgressContext.js","components/Login.js","components/ArticleText.js","components/ArticleCommentItem.js","components/ArticleContentItem.js","components/utils/article.js","components/BoardItem.js","components/ArticleBoardInfoContext.js","components/BoardDisplay.js","components/BoardSelect.js","components/BoardArea.js","components/SendComment.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/throttle-debounce/dist/index.esm.js","components/ArticleDisplay.js","components/utils/search.js","components/ArticleItem.js","components/ArticleSelect.js","components/ArticleSearch.js","components/ArticleArea.js","components/Bar.js","components/MySnackbar.js","components/Main.js","App.js","serviceWorker.js","index.js","../../ptt-client/dist/sites/ptt/model/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","enumerable","get","_decode","_encode","_keymap","dbcswidth","getWidth","indexOfWidth","substrWidth","widthType","str","startWidth","width","ignoreWidth","length","start","prefixSpace","suffixSpace","substr","Math","max","min","repeat","_wcwidth","split","reduce","sum","c","charCodeAt","Error","concat","i","SelectQueryBuilder","_classCallCheck2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_QueryBuilder","_super","_len","args","Array","_key","QueryBuilder","_toConsumableArray2","_createClass2","_assertThisInitialized2","_defineProperty2","_default","_EventEmitter","Socket","config","_this","_config","key","socket","_this2","WebSocket","url","options","origin","addEventListener","emit","bind","timeoutHandler","data","binaryType","_ref","_data","currData","clearTimeout","push","Uint8Array","setTimeout","timeout","byteLength","blobSize","_socket","close","readyState","send","name","charset","protocol","preventIdleTimeout","terminal","columns","rows","numOfPagesPerIteration","_ptt","_bot","_typeof2","_wrapNativeSuper2","_regenerator","_asyncToGenerator2","_eventemitter","_sleepPromise","_terminal","_utils","_char","_wrapRegExp","re","groups","BabelRegExp","undefined","_RegExp","RegExp","_groups","WeakMap","flags","set","buildGroups","g","keys","create","exec","Symbol","replace","substitution","_","_createForOfIteratorHelper","o","iterator","isArray","minLen","_arrayLikeToArray","n","slice","from","test","_unsupportedIterableToArray","F","s","done","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","Bot","term","state","getLine","init","lines","_this$term$state$getL","attr","assign","line","map","join","connect","_init","mark","_callee","wrap","_context","prev","initialState","setMode","currentCharset","t0","toLowerCase","abrupt","forwardEvents","on","closeEvent","login","_len2","_key2","decode","includes","msg","write","console","log","wsError","stop","_this3","infoLine","pgTotal","Number","substring","indexOf","allRead","firstPage","index","reset","_next","_callee2","ni","pgNow","l","j","r","_context2","lastIndexOf","keymap","PgDown","pop","Promise","reject","_getContent","_callee3","sentPgDown","lastLine","_i","_context3","Home","_getLines","_callee4","_context4","getContent","sent","_this4","preventIdle","resolve","autoResolveHandler","cb","message","encode","once","removeListener","info","_this5","preventIdleHandler","_callee5","_context5","CtrlU","ArrowLeft","_login","_callee6","username","password","kick","ret","_args6","_context6","Enter","checkLogin","position","boardname","_x","_x2","_logout","_callee7","_context7","_checkLogin","_callee8","_context8","screen","_x3","trim","model","select","_getMails","_callee9","offset","mails","mail","_args9","_context9","enterMail","End","sn","date","author","status","title","enterIndex","reverse","_getMail","_callee10","_context10","checkArticleWithHeader","timestamp","getLines","_x4","_enterIndex","_callee11","_context11","_goToTop","_callee12","_context12","_enterArticleByAIDFromBoard","_callee13","AID","query","_context13","ArrowRight","_x5","_enterArticleByAID","_callee14","_context14","enterBoardByName","enterArticleByAIDFromBoard","_x6","_x7","_sendCommentSearchMode","_callee15","res","text","_iterator","_step","t","_context15","textParts","strPart","lenPerLine","seperateText","type","finish","t1","_x8","_enterArticle","_callee16","_context16","_sendComment","_callee17","_iterator2","_step2","_context17","boardName","enterArticle","_x9","_enterBoardByName","_callee18","_context18","currentBoardname","_x10","_enterByOffset","_callee20","offsets","_this6","_args20","_context20","_ref2","_callee19","lastOffset","_context19","_x11","_enterBoardByOffset","_callee21","_args21","_context21","enterByOffset","_enterFavorite","_callee22","_args22","_context22","_enterMail","_callee23","_context23","match","_uaoJs","Buffer","decodeSync","String","fromCharCode","buffer","encodeSync","ArrowUp","ArrowDown","PgUp","Backspace","CtrlC","CtrlP","CtrlZ","ArticleSelectQueryBuilder","WhereType","Article","_SelectQueryBuilder2","_content","content","warn","article","id","fixed","bot","_SelectQueryBuilder","condition","Boardname","Id","Push","wheres","Author","Title","last_id","found","articles","getQuery","fromLine","_getOneInSearch","hasHeader","_get","_i2","_getOne","_getOneIterator","getContentIterator","sendComment","arg","BoardSelectQueryBuilder","Entry","Board","board","unread","category","flag","folder","divider","users","admin","Class","entry","Prefix","prefix","Offset","Offsets","boards","stopLoop","_line","_board","getByPrefix","Favorite","Hot","enterBoardByOffset","enterFavorite","fromClassLine","_getByPrefix","resultLine0","col","row","searchStr","searchInput","MailSelectQueryBuilder","Mail","cookies","Cookies","constate","useState","user","setUser","UserProvider","useUserContext","Ptt","botState","setBotState","prevBotState","ref","useRef","useEffect","current","usePrev","busy","a","executeCommand","command","goToTop","getOne","getOneIterator","BotProvider","useBotContext","isSnackbarOpen","setIsSnackbarOpen","severity","snackbarContent","setSnackbarContent","ProgressProvider","useProgressContext","useStyles","makeStyles","theme","root","justifyContent","alignItems","flexDirection","paperform","margin","spacing","display","paperlogging","minWidth","height","marginTop","zIndex","drawer","paperreconnect","padding","reconnectText","reconnectButton","alignSelf","form","submit","signin","backdrop","color","circle","marginRight","installExtension","Login","classes","BotContext","useForm","register","handleSubmit","onSubmit","preventDefault","myUser","loginCallback","useCallback","setOpenForm","setOpenLoadingCircle","setOpenBackDrop","openBackDrop","openLoadingCircle","openForm","openReconnect","setOpenReconnect","tryLogin","Grid","container","component","className","Paper","CircularProgress","Typography","variant","Backdrop","open","CssBaseline","Button","onClick","reconnect","Card","CardContent","gutterBottom","Link","href","role","aria-label","TextField","required","fullWidth","label","autoComplete","autoFocus","inputRef","FormControlLabel","control","Checkbox","ArticleText","props","maxWidth","ti","ListItemText","style","whiteSpace","hyperlink","marginLeft","rel","img","imgur","ListItem","disableGutters","minHeight","overflow","backgroundColor","paddingTop","imageStyle","top","left","src","ArticleCommentItem","useTheme","commentLine","flexBasis","palette","error","dark","primary","secondary","floor","ArticleContentItem","myKey","initArticle","articleItem","aid","ip","getArticleResponseIterator","firstPartOfContent","parseArticleLines","commentStartFloor","ArticleModel","where","getArticleList","criteria","firstColon","BoardItem","item","handleClick","setArticleList","sethaveSelectBoard","setBoardName","setIndex","setCriteria","setArticleSearchList","button","borderLeft","borderLeftColor","borderLeftWidth","setArticle","articleList","articleSearchList","haveSelectBoard","ArticleBoardInfoProvider","useArticleBoardInfoContext","BoardDisplay","skeleton","fontSize","list","listItems","setListItems","boardCache","setBoardCache","searchCache","selectedBoard","searchBoardText","setSelectedBoard","newBC","b","lis","getBoardInit","getBoard","Skeleton","List","BoardSelect","borderBottom","tabs","tab","searchBotton","btntabs","inputbase","selectedValue","setSelectedValue","isInputShow","setIsInputShow","setSearchBoardText","IconButton","Tabs","indicatorColor","textColor","onChange","v","Tab","wrapped","Collapse","in","InputBase","placeholder","BoardArea","borderRight","SendComment","paddingLeft","paddingRight","paddingBottom","sending","lp","setHasMore","isSending","setIsSending","values","noValidate","FormControl","InputLabel","as","Select","MenuItem","rules","defaultValue","Divider","orientation","multiline","endIcon","size","d","setPrototypeOf","__proto__","p","hasOwnProperty","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","wrapper","self","elapsed","now","clear","cancel","__","ArticleDisplay","flexWrap","goback","titleText","flexGrow","flexShrink","bottom","background","paper","scrollBottom","infScroll","React","createRef","hasMore","scrollTop","handleLoadMore","performance","parsed","newLines","newCommentStartFloor","measure","getEntriesByType","clearMarks","clearMeasures","scrollableTarget","dataLength","loader","loading","submitSearch","ArticleItem","mouseX","mouseY","mouseState","setMouseState","preventLeftClick","setPreventLeftClick","handleLeftClick","startsWith","handleCloseMenu","handleClickSearch","partialCriteria","onContextMenu","clientX","clientY","Menu","keepMounted","onClose","anchorReference","anchorPosition","textAlign","ArticleSelect","right","searchFab","closeIcon","saTitle","isArticleSearchFormOpen","setIsArticleSearchFormOpen","articleItems","setArticleItems","toggleSearchForm","errors","onSubmitSearch","Slide","direction","invisible","ClickAwayListener","mouseEvent","onClickAway","elevation","helperText","pattern","Fab","then","res_reduced","rtn","ArticleSearch","buttoninfo","l_id","t2","t3","scrollThreshold","ArticleArea","onChangeIndex","toolbar","fontFamily","Bar","MySnackbar","Alert","Snackbar","autoHideDuration","event","reason","createMuiTheme","main","colors","lightGreen","yellow","red","resizable","mainContainer","bar","Main","ThemeProvider","Container","defaultSize","enable","topRight","bottomRight","bottomLeft","topLeft","App","notChrome","Bowser","getParser","window","navigator","userAgent","satisfies","desktop","chrome","Boolean","location","hostname","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister","_article","_mail"],"mappings":"wGAEA,IAAIA,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETH,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOC,EAAO,WAGlBN,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOE,EAAO,WAGlBP,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOG,EAAO,WAIlB,IAAIF,EAAUR,EAAuBC,EAAQ,MAEzCQ,EAAUT,EAAuBC,EAAQ,MAEzCS,EAAUV,EAAuBC,EAAQ,O,iCC5B7C,IAAID,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQO,UAAYA,EACpBP,EAAQQ,SAAWA,EACnBR,EAAQS,aAAeA,EACvBT,EAAQU,YA+DR,SAAqBC,EAAWC,EAAKC,EAAYC,GAC/C,IAAIC,EAA+B,qBAAVD,EACrBE,EAASF,EACTG,EAAQJ,EACRK,EAAc,EACdC,EAAc,EAEA,WAAdR,IACFM,EAAQR,EAAaE,EAAWC,EAAKC,GAEjCL,EAASG,EAAWC,EAAIQ,OAAO,EAAGH,IAAUJ,IAC9CI,GAAS,EACTC,EAAcG,KAAKC,IAAId,EAASG,EAAWC,EAAIQ,OAAO,EAAGH,IAAUJ,EAAY,IAG5EE,IACHC,EAASP,EAAaE,EAAWC,EAAIQ,OAAOH,GAAQH,EAAQI,GAC5DC,EAAcE,KAAKE,IAAIT,EAAON,EAASG,EAAWC,EAAIQ,OAAOH,MAAYC,EAAcV,EAASG,EAAWC,EAAIQ,OAAOH,EAAOD,OAIjI,IAAII,EAASL,EAAcH,EAAIQ,OAAOH,GAASL,EAAIQ,OAAOH,EAAOD,GACjE,MAAO,IAAIQ,OAAON,GAAeE,EAAS,IAAII,OAAOL,IAnFvD,IAAIM,EAAW7B,EAAuBC,EAAQ,MAE9C,SAASU,EAAUK,GACjB,OAAOA,EAAIc,MAAM,IAAIC,QAAO,SAAUC,EAAKC,GACzC,OAAOD,GAAOC,EAAEC,WAAW,GAAK,IAAM,EAAI,KACzC,GASL,SAAStB,EAASG,EAAWC,GAC3B,OAAQD,GACN,IAAK,SACH,OAAOC,EAAII,OAEb,IAAK,UACH,OAAO,EAAIS,EAAQ,SAAab,GAElC,IAAK,OACH,OAAOL,EAAUK,GAEnB,QACE,MAAM,IAAImB,MAAM,sBAAuBC,OAAOrB,EAAW,OAW/D,SAASF,EAAaE,EAAWC,EAAKE,GACpC,GAAkB,WAAdH,EACF,OAAOU,KAAKE,IAAIT,EAAOF,EAAII,QAG7B,IAAK,IAAIiB,EAAI,EAAGA,GAAKrB,EAAII,OAAQiB,IAC/B,GAAIzB,EAASG,EAAWC,EAAIQ,OAAO,EAAGa,IAAMnB,EAC1C,OAAOmB,EAAI,EAIf,OAAOrB,EAAII,S,iCC1Db,IAAIpB,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQkC,wBAAqB,EAE7B,IAAIC,EAAmBvC,EAAuBC,EAAQ,KAElDuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAItD,SAAS0C,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAI3b,IAAIlB,EAAkC,SAAUyB,IAC9C,EAAIvB,EAAU,SAAaF,EAAoByB,GAE/C,IAAIC,EAASrB,EAAaL,GAE1B,SAASA,KACP,EAAIC,EAAgB,SAAaoB,KAAMrB,GAEvC,IAAK,IAAI2B,EAAOJ,UAAUzC,OAAQ8C,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQP,UAAUO,GAGzB,OAAOJ,EAAOX,KAAKS,MAAME,EAAQ,CAACL,MAAMvB,OAAO8B,IAGjD,OAAO5B,EAf6B,CANjBrC,EAAQ,KAsBZoE,cAEjBjE,EAAQkC,mBAAqBA,G,iCCvC7B,IAAItC,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EAErB,IAAIkE,EAAsBtE,EAAuBC,EAAQ,MAErDsC,EAAmBvC,EAAuBC,EAAQ,KAElDsE,EAAgBvE,EAAuBC,EAAQ,KAE/CuE,EAA0BxE,EAAuBC,EAAQ,KAEzDuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAElDwE,EAAmBzE,EAAuBC,EAAQ,KAItD,SAAS0C,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAK3b,IAuFIkB,EAvFsB,SAAUC,IAClC,EAAInC,EAAU,SAAaoC,EAAQD,GAEnC,IAAIX,EAASrB,EAAaiC,GAE1B,SAASA,EAAOC,GACd,IAAIC,EAOJ,OALA,EAAIvC,EAAgB,SAAaoB,KAAMiB,GACvCE,EAAQd,EAAOX,KAAKM,OACpB,EAAIc,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,eAAW,IAC5F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,eAAW,GAC5FA,EAAMC,QAAUF,EACTC,EAuET,OApEA,EAAIP,EAAa,SAAaK,EAAQ,CAAC,CACrCI,IAAK,UACL3E,MAAO,WACL,IAEI4E,EAFAC,EAASvB,KAIb,GAAyB,qBAAdwB,UACT,MAAM,IAAIhD,MAAM,oEACX,GAAyB,IAArBgD,UAAU/D,OAEnB6D,EAAS,IAAIE,UAAUxB,KAAKoB,QAAQK,SAC/B,CAEL,IAAIC,EAAU,GAEV1B,KAAKoB,QAAQO,SACfD,EAAQC,OAAS3B,KAAKoB,QAAQO,QAGhCL,EAAS,IAAIE,UAAUxB,KAAKoB,QAAQK,IAAKC,GAG3CJ,EAAOM,iBAAiB,OAAQ5B,KAAK6B,KAAKC,KAAK9B,KAAM,YACrDsB,EAAOM,iBAAiB,QAAS5B,KAAK6B,KAAKC,KAAK9B,KAAM,eACtDsB,EAAOM,iBAAiB,QAAS5B,KAAK6B,KAAKC,KAAK9B,KAAM,UACtD,IACI+B,EADAC,EAAO,GAsBX,OApBAV,EAAOW,WAAa,cACpBX,EAAOM,iBAAiB,WAAW,SAAUM,GAC3C,IAAIC,EAEAC,EAAWF,EAAKF,KAWpB,GAVAK,aAAaN,IAEZI,EAAQH,GAAMM,KAAKnC,MAAMgC,GAAO,EAAIxB,EAAmB,SAAa,IAAI4B,WAAWH,KAEpFL,EAAiBS,YAAW,WAC1BjB,EAAOM,KAAK,UAAWG,GAEvBA,EAAO,KACNT,EAAOH,QAAQqB,SAEdL,EAASM,WAAanB,EAAOH,QAAQuB,SACvC,MAAM,IAAInE,MAAM,0BAA0BC,OAAO2D,EAASM,WAAY,+BAA+BjE,OAAO8C,EAAOH,QAAQuB,SAAU,SAGzI3C,KAAK4C,QAAUtB,GACR,IAER,CACDD,IAAK,aACL3E,MAAO,WACQsD,KAAK4C,QACXC,UAER,CACDxB,IAAK,OACL3E,MAAO,SAAcW,GACnB,IAAIiE,EAAStB,KAAK4C,QAEQ,IAAtBtB,EAAOwB,YAGPxB,EAAOyB,KAAK1F,OAIb4D,EApFiB,CAPN5E,EAAuBC,EAAQ,MA4FpC,SAGfG,EAAO,QAAcsE,G,iCCtHrBxE,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EACrB,IAeIsE,EAfS,CACXiC,KAAM,MACNvB,IAAK,sBACLwB,QAAS,OACTtB,OAAQ,cACRuB,SAAU,YACVT,QAAS,IACTE,SAAU,KACVQ,mBAAoB,GACpBC,SAAU,CACRC,QAAS,GACTC,KAAM,IAERC,uBAAwB,GAG1B9G,EAAO,QAAcsE,G,iCCpBrB,IAAI1E,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETH,OAAOC,eAAeC,EAAS,UAAW,CACxCE,YAAY,EACZC,IAAK,WACH,OAAO4G,EAAI,WAGfjH,OAAOC,eAAeC,EAAS,MAAO,CACpCE,YAAY,EACZC,IAAK,WACH,OAAO4G,EAAI,WAGfjH,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOwE,EAAO,WAGlB7E,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOgG,EAAO,WAIlB,IAAIY,EAAOnH,EAAuBC,EAAQ,MAEtC8E,EAAU/E,EAAuBC,EAAQ,MAEzCsG,EAAUvG,EAAuBC,EAAQ,O,6FClC7C,IAAID,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETH,OAAOC,eAAeC,EAAS,UAAW,CACxCE,YAAY,EACZC,IAAK,WACH,OAAO6G,EAAI,WAGflH,OAAOC,eAAeC,EAAS,MAAO,CACpCE,YAAY,EACZC,IAAK,WACH,OAAO6G,EAAI,WAGflH,OAAOC,eAAeC,EAAS,SAAU,CACvCE,YAAY,EACZC,IAAK,WACH,OAAOwE,EAAO,WAIlB,IAAIqC,EAAOpH,EAAuBC,EAAQ,MAEtC8E,EAAU/E,EAAuBC,EAAQ,O,iCC1B7C,IAAID,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EAErB,IAAIiH,EAAWrH,EAAuBC,EAAQ,MAE1CqH,EAAoBtH,EAAuBC,EAAQ,MAEnDsH,EAAevH,EAAuBC,EAAQ,MAE9CuH,EAAqBxH,EAAuBC,EAAQ,MAEpDsC,EAAmBvC,EAAuBC,EAAQ,KAElDuE,EAA0BxE,EAAuBC,EAAQ,KAEzDsE,EAAgBvE,EAAuBC,EAAQ,KAE/CuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAElDwE,EAAmBzE,EAAuBC,EAAQ,KAElDwH,EAAgBzH,EAAuBC,EAAQ,MAE/CyH,EAAgB1H,EAAuBC,EAAQ,MAE/C0H,EAAY3H,EAAuBC,EAAQ,MAE3CsG,EAAUvG,EAAuBC,EAAQ,MAEzC2H,EAAS3H,EAAQ,KAEjB4H,EAAQ5H,EAAQ,KAEhB8E,EAAU/E,EAAuBC,EAAQ,MAE7C,SAAS6H,EAAYC,EAAIC,GAAUF,EAAc,SAAqBC,EAAIC,GAAU,OAAO,IAAIC,EAAYF,OAAIG,EAAWF,IAAY,IAAIG,GAAU,EAAIb,EAAiB,SAAac,QAAapE,EAASoE,OAAOjF,UAAekF,EAAU,IAAIC,QAAW,SAASL,EAAYF,EAAIQ,EAAOP,GAAU,IAAIlD,EAAQqD,EAAQ9E,KAAKM,KAAMoE,EAAIQ,GAAuD,OAA/CF,EAAQG,IAAI1D,EAAOkD,GAAUK,EAAQ9H,IAAIwH,IAAajD,EAAo4B,SAAS2D,EAAYjF,EAAQuE,GAAM,IAAIW,EAAIL,EAAQ9H,IAAIwH,GAAK,OAAO7H,OAAOyI,KAAKD,GAAG3G,QAAO,SAAUiG,EAAQrB,GAAwC,OAAhCqB,EAAOrB,GAAQnD,EAAOkF,EAAE/B,IAAeqB,IAAW9H,OAAO0I,OAAO,OAAU,OAAxjC,EAAIpG,EAAU,SAAayF,EAAaE,GAAUF,EAAY9E,UAAU0F,KAAO,SAAU7H,GAAO,IAAIwC,EAASQ,EAAO6E,KAAKxF,KAAKM,KAAM3C,GAA6D,OAAnDwC,IAAQA,EAAOwE,OAASS,EAAYjF,EAAQG,OAAcH,GAAWyE,EAAY9E,UAAU2F,OAAOC,SAAW,SAAU/H,EAAKgI,GAAgB,GAA4B,kBAAjBA,EAA2B,CAAE,IAAIhB,EAASK,EAAQ9H,IAAIoD,MAAO,OAAOK,EAAO8E,OAAOC,SAAS1F,KAAKM,KAAM3C,EAAKgI,EAAaD,QAAQ,gBAAgB,SAAUE,EAAGtC,GAAQ,MAAO,IAAMqB,EAAOrB,OAAmB,GAA4B,oBAAjBqC,EAA6B,CAAE,IAAIlE,EAAQnB,KAAM,OAAOK,EAAO8E,OAAOC,SAAS1F,KAAKM,KAAM3C,GAAK,WAAc,IAAIkD,EAAO,GAAiJ,OAA7IA,EAAK+B,KAAKnC,MAAMI,EAAML,WAAoE,YAApD,EAAIwD,EAAQ,SAAanD,EAAKA,EAAK9C,OAAS,KAAoB8C,EAAK+B,KAAKwC,EAAYvE,EAAMY,IAAkBkE,EAAalF,MAAMH,KAAMO,MAAoB,OAAOF,EAAO8E,OAAOC,SAAS1F,KAAKM,KAAM3C,EAAKgI,IAAwNlB,EAAYhE,MAAMH,KAAME,WAEt+C,SAASqF,EAA2BC,GAAK,GAAsB,qBAAXL,QAAgD,MAAtBK,EAAEL,OAAOM,UAAmB,CAAE,GAAIjF,MAAMkF,QAAQF,KAAOA,EAErI,SAAqCA,EAAGG,GAAU,IAAKH,EAAG,OAAQ,GAAiB,kBAANA,EAAgB,OAAOI,EAAkBJ,EAAGG,GAAS,IAAIE,EAAItJ,OAAOiD,UAAUC,SAASC,KAAK8F,GAAGM,MAAM,GAAI,GAAc,WAAND,GAAkBL,EAAEvF,cAAa4F,EAAIL,EAAEvF,YAAY+C,MAAM,GAAU,QAAN6C,GAAqB,QAANA,EAAa,OAAOrF,MAAMuF,KAAKP,GAAI,GAAU,cAANK,GAAqB,2CAA2CG,KAAKH,GAAI,OAAOD,EAAkBJ,EAAGG,GAF7QM,CAA4BT,IAAK,CAAE,IAAI9G,EAAI,EAAOwH,EAAI,aAAiB,MAAO,CAAEC,EAAGD,EAAGL,EAAG,WAAe,OAAInH,GAAK8G,EAAE/H,OAAe,CAAE2I,MAAM,GAAe,CAAEA,MAAM,EAAO1J,MAAO8I,EAAE9G,OAAWiB,EAAG,SAAW0G,GAAM,MAAMA,GAAOC,EAAGJ,GAAO,MAAM,IAAIK,UAAU,yIAA4I,IAAIC,EAA6CC,EAAzCC,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAER,EAAG,WAAeK,EAAKhB,EAAEL,OAAOM,aAAgBI,EAAG,WAAe,IAAIe,EAAOJ,EAAGK,OAAsC,OAA9BH,EAAmBE,EAAKR,KAAaQ,GAASjH,EAAG,SAAWmH,GAAOH,GAAS,EAAMF,EAAMK,GAAQR,EAAG,WAAe,IAAWI,GAAoC,MAAhBF,EAAE,QAAoBA,EAAE,SAAvD,QAAiF,GAAIG,EAAQ,MAAMF,KAI53B,SAASb,EAAkBmB,EAAKC,IAAkB,MAAPA,GAAeA,EAAMD,EAAItJ,UAAQuJ,EAAMD,EAAItJ,QAAQ,IAAK,IAAIiB,EAAI,EAAGuI,EAAO,IAAIzG,MAAMwG,GAAMtI,EAAIsI,EAAKtI,IAAOuI,EAAKvI,GAAKqI,EAAIrI,GAAM,OAAOuI,EAEhL,SAASC,EAAQC,EAAQC,GAAkB,IAAIpC,EAAOzI,OAAOyI,KAAKmC,GAAS,GAAI5K,OAAO8K,sBAAuB,CAAE,IAAIC,EAAU/K,OAAO8K,sBAAsBF,GAAaC,IAAgBE,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOjL,OAAOkL,yBAAyBN,EAAQK,GAAK7K,eAAgBqI,EAAK1C,KAAKnC,MAAM6E,EAAMsC,GAAY,OAAOtC,EAE9U,SAAS0C,EAAcC,GAAU,IAAK,IAAIjJ,EAAI,EAAGA,EAAIwB,UAAUzC,OAAQiB,IAAK,CAAE,IAAIkJ,EAAyB,MAAhB1H,UAAUxB,GAAawB,UAAUxB,GAAK,GAAQA,EAAI,EAAKwI,EAAQ3K,OAAOqL,IAAS,GAAMC,SAAQ,SAAUxG,IAAO,EAAIP,EAAgB,SAAa6G,EAAQtG,EAAKuG,EAAOvG,OAAsB9E,OAAOuL,0BAA6BvL,OAAOwL,iBAAiBJ,EAAQpL,OAAOuL,0BAA0BF,IAAmBV,EAAQ3K,OAAOqL,IAASC,SAAQ,SAAUxG,GAAO9E,OAAOC,eAAemL,EAAQtG,EAAK9E,OAAOkL,yBAAyBG,EAAQvG,OAAe,OAAOsG,EAE9hB,SAAS3I,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAI3b,IAAImI,EAAmB,SAAUhH,IAC/B,EAAInC,EAAU,SAAamJ,EAAKhH,GAEhC,IAAIX,EAASrB,EAAagJ,GA6B1B,SAASA,EAAI9G,GACX,IAAIC,EAiBJ,OAfA,EAAIvC,EAAgB,SAAaoB,KAAMgI,GACvC7G,EAAQd,EAAOX,KAAKM,OACpB,EAAIc,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,cAAU,IAC3F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,YAAQ,IACzF,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,aAAS,IAC1F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,sBAAkB,IACnG,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,cAAU,IAC3F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,0BAAsB,IACvG,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,WAAW,SAAU0E,GACpG,OAAO1E,EAAM8G,KAAKC,MAAMC,QAAQtC,MAElC1E,EAAMD,OAASwG,EAAcA,EAAc,GAAItG,EAAO,SAAcF,GAEpEC,EAAMiH,OAECjH,EA4lDT,OAzoDA,EAAIP,EAAa,SAAaoH,EAAK,CAAC,CAClC3G,IAAK,OACLzE,IAAK,WAGH,IAFA,IAAIyL,EAAQ,GAEH3J,EAAI,EAAGA,EAAIsB,KAAKiI,KAAKC,MAAM5E,KAAM5E,IAAK,CAC7C,IAAI4J,EAAwBtI,KAAKiI,KAAKC,MAAMC,QAAQzJ,GAChDrB,EAAMiL,EAAsBjL,IAC5BkL,EAAOD,EAAsBC,KAEjCF,EAAM/F,KAAK,CACTjF,IAAKA,EACLkL,KAAMhM,OAAOiM,OAAO,GAAID,KAI5B,OAAOF,IAER,CACDhH,IAAK,SACLzE,IAAK,WACH,OAAOoD,KAAKyI,KAAKC,KAAI,SAAUD,GAC7B,OAAOA,EAAKpL,OACXsL,KAAK,WAyBZ,EAAI/H,EAAa,SAAaoH,EAAK,CAAC,CAClC3G,IAAK,YACL3E,MAAO,WACLsD,KAAKsB,OAAOsH,YAEb,CACDvH,IAAK,OACL3E,MAAO,WACL,IAAImM,GAAQ,EAAIhF,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASC,IACjG,IAEI7H,EAAQI,EAFRC,EAASvB,KAGb,OAAO4D,EAAY,QAAYoF,MAAK,SAAkBC,GACpD,OACE,OAAQA,EAASC,KAAOD,EAASpC,MAC/B,KAAK,EACH3F,EAASlB,KAAKkB,OACdlB,KAAKiI,KAAO,IAAIjE,EAAS,QAAY9C,EAAOkC,UAC5CpD,KAAKkI,MAAQR,EAAc,GAAIM,EAAImB,cACnCnJ,KAAKiI,KAAKC,MAAMkB,QAAQ,cAAe,QACvCpJ,KAAKqJ,eAAiB,OACtBJ,EAASK,GAAKpI,EAAOgC,SAASqG,cAC9BN,EAASpC,KAAuB,cAAhBoC,EAASK,IAAyC,OAAhBL,EAASK,IAAkC,QAAhBL,EAASK,GAAxC,GAA2E,WAAhBL,EAASK,IAAsBL,EAASK,GAAb,GACpI,MAEF,KAAK,EACH,OAAOL,EAASO,OAAO,QAAS,IAElC,KAAK,EACH,MAAM,IAAIhL,MAAM,qBAAqBC,OAAOyC,EAAOgC,WAErD,KAAK,IACH5B,EAAS,IAAIsB,EAAO,QAAY1B,IACzB0H,UACPZ,EAAIyB,cAAc5B,SAAQ,SAAUlI,GAClC2B,EAAOoI,GAAG/J,EAAG4B,EAAOM,KAAKC,KAAKP,EAAQ5B,OAExC2B,EAAOoI,GAAG,WAAW,WACnBnI,EAAO2G,MAAMU,SAAU,EAEvB,IAAK,IAAItI,EAAOJ,UAAUzC,OAAQ8C,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQP,UAAUO,GAGzBc,EAAOM,KAAK1B,MAAMoB,EAAQ,CAAC,WAAW9C,OAAO8B,IAE7CgB,EAAOM,KAAK,cAAeN,EAAO2G,UACjCwB,GAAG,cAAc,SAAUC,GAC5BpI,EAAO2G,MAAMU,SAAU,EACvBrH,EAAO2G,MAAM0B,OAAQ,EAErB,IAAK,IAAIC,EAAQ3J,UAAUzC,OAAQ8C,EAAO,IAAIC,MAAMqJ,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGvJ,EAAKuJ,EAAQ,GAAK5J,UAAU4J,GAG9BvI,EAAOM,KAAK1B,MAAMoB,EAAQ,CAAC,aAAcoI,GAAYlL,OAAO8B,IAE5DgB,EAAOM,KAAK,cAAeN,EAAO2G,UACjCwB,GAAG,WAAW,SAAU1H,GACrBT,EAAO8H,iBAAmB9H,EAAOL,OAAO+B,UAAY1B,EAAO2G,MAAM0B,QAAS,EAAI3F,EAAO8F,QAAQ/H,EAAM,QAAQgI,SAAS,mDACtHzI,EAAO8H,eAAiB9H,EAAOL,OAAO+B,SAGxC,IAAIgH,GAAM,EAAIhG,EAAO8F,QAAQ/H,EAAMT,EAAO8H,gBAE1C9H,EAAO0G,KAAKiC,MAAMD,GAElB1I,EAAOM,KAAK,SAAUN,EAAO0G,KAAKxI,eACjCiK,GAAG,SAAS,SAAUjD,GACvB0D,QAAQC,IAAI3D,GACZlF,EAAO2G,MAAMmC,SAAU,EAEvB9I,EAAOM,KAAK,sBAEd7B,KAAKsB,OAASA,EAEhB,KAAK,GACL,IAAK,MACH,OAAO2H,EAASqB,UAGrBvB,EAAS/I,UAOd,OAJA,WACE,OAAO6I,EAAM1I,MAAMH,KAAME,YA9EtB,IAsFN,CACDmB,IAAK,qBAEL3E,MAAO,WACL,IAAI6N,EAASvK,KAETwK,EAAWxK,KAAKyI,KAAK,IAAIpL,IACzBoN,EAAUC,OAAOF,EAASG,UAAUH,EAASI,QAAQ,UAAO,EAAGJ,EAASI,QAAQ,UAAO,GAAGzM,MAAM,KAAK,IAErG0M,GAAU,EACVC,GAAY,EACZC,EAAQ,EACR1C,EAAQ,GA8GZ,OA7GAA,EAAM/F,KAAKtC,KAAKyI,KAAK,IACN,CACbuC,MAAO,WACLD,EAAQ,EACRF,GAAU,EACVC,GAAY,GAEdjE,KAAM,WACJ,IAAIoE,GAAQ,EAAIpH,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASoC,IACjG,IAAIC,EAAIC,EAAOC,EAAG3M,EAAG4M,EAAG7C,EAAM8C,EAC9B,OAAO3H,EAAY,QAAYoF,MAAK,SAAmBwC,GACrD,OACE,OAAQA,EAAUtC,KAAOsC,EAAU3E,MACjC,KAAK,EAGH,GAFA2E,EAAUtC,KAAO,GAEX2B,IAAWL,EAASR,SAAS,wCAAY,CAC7CwB,EAAU3E,KAAO,EACjB,MAGF,OAAO2E,EAAUhC,OAAO,SAAU,CAChC9M,MAAO,KACP0J,MAAM,IAGV,KAAK,EACH+E,EAAK,EAEP,KAAK,EACH,KAAMA,EAAKZ,EAAOrJ,OAAOqC,yBAA2BsH,EAAU,CAC5DW,EAAU3E,KAAO,GACjB,MAYF,IATA2D,EAAWD,EAAO9B,KAAK,IAAIpL,IAC3B+N,EAAQV,OAAOF,EAASG,UAAUH,EAASI,QAAQ,UAAO,EAAGJ,EAASI,QAAQ,UAAO,GAAGzM,MAAM,KAAK,SAE/F,EAEJkN,EAAIb,EAASG,UAAUH,EAASiB,YAAY,UAAO,EAAGjB,EAASI,QAAQ,UAAO,GAAGzM,MAAM,KAAKuK,IAAIgC,QAEhGhM,EAAIoM,EAAYO,EAAE,GAAKA,EAAE,GAAK,EAEzBC,EAAI,EAAGA,GAAK,GAAI5M,IAAK4M,IACxB7C,EAAO8B,EAAO9B,KAAK6C,GAEf5M,EAAIqM,IACN1C,EAAM/F,KAAKmG,GACXsC,KAMJ,GAFAD,GAAY,EAENM,IAAUX,EAAU,CACxBe,EAAU3E,KAAO,GACjB,MAGFgE,GAAU,EACVW,EAAU3E,KAAO,GACjB,MAEF,KAAK,GAEH,OADA2E,EAAU3E,KAAO,GACV0D,EAAOxH,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOC,SAE7C,KAAK,GACHR,IACAK,EAAU3E,KAAO,EACjB,MAEF,KAAK,GAEH,GAAIgE,EACF,KAAOxC,EAAM5K,OAAS,GAAqC,KAAhC4K,EAAMA,EAAM5K,OAAS,GAAGJ,KACjD0N,IACA1C,EAAMuD,MASV,OALAL,EAAI,CACF7O,MAAO2L,EACPjC,MAAM,GAERiC,EAAQ,GACDmD,EAAUhC,OAAO,SAAU+B,GAEpC,KAAK,GAGH,OAFAC,EAAUtC,KAAO,GACjBsC,EAAUlC,GAAKkC,EAAS,MAAU,GAC3BA,EAAUhC,OAAO,SAAUqC,QAAQC,OAAON,EAAUlC,KAE7D,KAAK,GACL,IAAK,MACH,OAAOkC,EAAUlB,UAGtBY,EAAU,KAAM,CAAC,CAAC,EAAG,UAO1B,OAJA,WACE,OAAOD,EAAM9K,MAAMH,KAAME,YAhGvB,MAyGT,CACDmB,IAAK,aACL3E,MAAO,WACL,IAAIqP,GAAc,EAAIlI,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkD,IACvG,IAAI3D,EAAO4D,EAAYvN,EAAGwN,EAAUC,EAAIb,EAExC,OAAO1H,EAAY,QAAYoF,MAAK,SAAmBoD,GACrD,OACE,OAAQA,EAAUlD,KAAOkD,EAAUvF,MACjC,KAAK,GACHwB,EAAQ,IACF/F,KAAKtC,KAAKyI,KAAK,IACrBwD,GAAa,EAEf,KAAK,EACH,GAAOjM,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,SAAYhK,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,wCAAY,CACnFoC,EAAUvF,KAAO,GACjB,MAGF,IAAKnI,EAAI,EAAGA,EAAI,GAAIA,IAClB2J,EAAM/F,KAAKtC,KAAKyI,KAAK/J,IAIvB,OADA0N,EAAUvF,KAAO,EACV7G,KAAK+C,KAAKkB,EAAOyH,OAAOC,QAEjC,KAAK,EACHM,GAAa,EACbG,EAAUvF,KAAO,EACjB,MAEF,KAAK,GACHqF,EAAW7D,EAAMA,EAAM5K,OAAS,GAChC0O,EAAK,EAEP,KAAK,GACH,KAAMA,EAAK,IAAK,CACdC,EAAUvF,KAAO,GACjB,MAGF,GAAM7G,KAAKyI,KAAK0D,GAAI9O,MAAQ6O,EAAS7O,IAAM,CACzC+O,EAAUvF,KAAO,GACjB,MAGF,IAAKyE,EAAIa,EAAK,EAAGb,EAAI,GAAIA,IACvBjD,EAAM/F,KAAKtC,KAAKyI,KAAK6C,IAGvB,OAAOc,EAAU5C,OAAO,QAAS,IAEnC,KAAK,GACH2C,IACAC,EAAUvF,KAAO,GACjB,MAEF,KAAK,GACH,KAAOwB,EAAM5K,OAAS,GAAqC,KAAhC4K,EAAMA,EAAM5K,OAAS,GAAGJ,KACjDgL,EAAMuD,MAGR,IAAKK,EAAY,CACfG,EAAUvF,KAAO,GACjB,MAIF,OADAuF,EAAUvF,KAAO,GACV7G,KAAK+C,KAAKkB,EAAOyH,OAAOW,MAEjC,KAAK,GACH,OAAOD,EAAU5C,OAAO,SAAUnB,GAEpC,KAAK,GACL,IAAK,MACH,OAAO+D,EAAU9B,UAGtB0B,EAAUhM,UAOf,OAJA,WACE,OAAO+L,EAAY5L,MAAMH,KAAME,YAjF5B,IA0FN,CACDmB,IAAK,WACL3E,MAAO,WACL,IAAI4P,GAAY,EAAIzI,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASyD,IACrG,IAAIlE,EACJ,OAAOzE,EAAY,QAAYoF,MAAK,SAAmBwD,GACrD,OACE,OAAQA,EAAUtD,KAAOsD,EAAU3F,MACjC,KAAK,EAEH,OADA2F,EAAU3F,KAAO,EACV7G,KAAKyM,aAEd,KAAK,EAEH,OADApE,EAAQmE,EAAUE,KACXF,EAAUhD,OAAO,SAAUnB,EAAMK,KAAI,SAAUD,GACpD,OAAOA,EAAKpL,QAGhB,KAAK,EACL,IAAK,MACH,OAAOmP,EAAUlC,UAGtBiC,EAAUvM,UAOf,OAJA,WACE,OAAOsM,EAAUnM,MAAMH,KAAME,YAzB1B,IA8BN,CACDmB,IAAK,OACL3E,MAAO,SAAcuN,GACnB,IAAI0C,EAAS3M,KAMb,OAJIA,KAAKkB,OAAOiC,oBACdnD,KAAK4M,YAAY5M,KAAKkB,OAAOiC,oBAGxB,IAAI0I,SAAQ,SAAUgB,EAASf,GACpC,IAAIgB,EAEAC,EAAK,SAAYC,GACnB3K,aAAayK,GACbD,GAAQ,IAGNF,EAAOzE,MAAMU,QACXqB,EAAIxM,OAAS,GACfkP,EAAOrL,OAAOyB,MAAK,EAAIkB,EAAOgJ,QAAQhD,EAAK0C,EAAOtD,iBAElDsD,EAAOO,KAAK,UAAWH,GAEvBD,EAAqBtK,YAAW,WAC9BmK,EAAOQ,eAAe,UAAWJ,GAEjCF,GAAQ,KACiB,GAAxBF,EAAOzL,OAAOuB,WAEjB0H,QAAQiD,KAAK,2CACbP,GAAQ,IAGVf,SAIL,CACDzK,IAAK,cACL3E,MAAO,SAAqB+F,GAC1B,IAAI4K,EAASrN,KAEbqC,aAAarC,KAAKsN,oBAEdtN,KAAKkI,MAAM0B,QACb5J,KAAKsN,mBAAqB9K,YAAyB,EAAIqB,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASyE,IACxI,OAAO3J,EAAY,QAAYoF,MAAK,SAAmBwE,GACrD,OACE,OAAQA,EAAUtE,KAAOsE,EAAU3G,MACjC,KAAK,EAEH,OADA2G,EAAU3G,KAAO,EACVwG,EAAOtK,KAAKkB,EAAOyH,OAAO+B,OAEnC,KAAK,EAEH,OADAD,EAAU3G,KAAO,EACVwG,EAAOtK,KAAKkB,EAAOyH,OAAOgC,WAEnC,KAAK,EACL,IAAK,MACH,OAAOF,EAAUlD,UAGtBiD,OACU,IAAV9K,MAGR,CACDpB,IAAK,QACL3E,MAAO,WACL,IAAIiR,GAAS,EAAI9J,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS8E,EAASC,EAAUC,GACrH,IAAIC,EACAC,EACA9F,EACA+F,EAAS/N,UACb,OAAO0D,EAAY,QAAYoF,MAAK,SAAmBkF,GACrD,OACE,OAAQA,EAAUhF,KAAOgF,EAAUrH,MACjC,KAAK,EAGH,GAFAkH,IAAOE,EAAOxQ,OAAS,QAAmB8G,IAAd0J,EAAO,KAAmBA,EAAO,IAExDjO,KAAKkI,MAAM0B,MAAO,CACrBsE,EAAUrH,KAAO,EACjB,MAGF,OAAOqH,EAAU1E,OAAO,UAE1B,KAAK,EAQH,OAPAqE,EAAWA,EAASzI,QAAQ,KAAM,IAEN,SAAxBpF,KAAKkB,OAAO+B,UACd4K,GAAY,KAGdK,EAAUrH,KAAO,EACV7G,KAAK+C,KAAK,GAAGtE,OAAOoP,GAAUpP,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOqP,GAAUrP,OAAOwF,EAAOyH,OAAOyC,QAEzG,KAAK,EAEH,OADAD,EAAUrH,KAAO,EACV7G,KAAKoO,WAAWL,GAEzB,KAAK,EAaH,OAZAC,EAAME,EAAUxB,SAGdxE,EAAQlI,KAAKkI,OACP0B,OAAQ,EACd1B,EAAMmG,SAAW,CACfC,UAAW,IAEbtO,KAAKkI,MAAM2F,SAAWA,EAASlD,UAAU,EAAGkD,EAASpQ,OAAS,GAC9DuC,KAAK6B,KAAK,cAAe7B,KAAKkI,QAGzBgG,EAAU1E,OAAO,SAAUwE,GAEpC,KAAK,GACL,IAAK,MACH,OAAOE,EAAU5D,UAGtBsD,EAAU5N,UAOf,OAJA,SAAeuO,EAAIC,GACjB,OAAOb,EAAOxN,MAAMH,KAAME,YAzDvB,IA8DN,CACDmB,IAAK,SACL3E,MAAO,WACL,IAAI+R,GAAU,EAAI5K,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS4F,IACnG,OAAO9K,EAAY,QAAYoF,MAAK,SAAmB2F,GACrD,OACE,OAAQA,EAAUzF,KAAOyF,EAAU9H,MACjC,KAAK,EACH,GAAI7G,KAAKkI,MAAM0B,MAAO,CACpB+E,EAAU9H,KAAO,EACjB,MAGF,OAAO8H,EAAUnF,OAAO,UAE1B,KAAK,EAEH,OADAmF,EAAU9H,KAAO,EACV7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,MAAO,KAAK1P,OAAOwF,EAAOyH,OAAOyC,QAE7E,KAAK,EAIH,OAHAnO,KAAKkI,MAAM0B,OAAQ,EACnB5J,KAAK6B,KAAK,cAAe7B,KAAKkI,OAC9BlI,KAAK+C,KAAKkB,EAAOyH,OAAOyC,OACjBQ,EAAUnF,OAAO,UAAU,GAEpC,KAAK,EACL,IAAK,MACH,OAAOmF,EAAUrE,UAGtBoE,EAAU1O,UAOf,OAJA,WACE,OAAOyO,EAAQtO,MAAMH,KAAME,YAhCxB,IAqCN,CACDmB,IAAK,aACL3E,MAAO,WACL,IAAIkS,GAAc,EAAI/K,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS+F,EAASd,GAChH,IAAI7F,EAAOG,EACX,OAAOzE,EAAY,QAAYoF,MAAK,SAAmB8F,GACrD,OACE,OAAQA,EAAU5F,KAAO4F,EAAUjI,MACjC,KAAK,EACH,IAAM7G,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,4DAAgBhK,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,kCAAW,CACrF8E,EAAUjI,KAAO,EACjB,MAIF,OADA7G,KAAK6B,KAAK,gBACHiN,EAAUtF,OAAO,UAAU,GAEpC,KAAK,EACH,IAAKxJ,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,kCAAU,CACxC8E,EAAUjI,KAAO,GACjB,MAIF,OADA7G,KAAK6B,KAAK,gBACHiN,EAAUtF,OAAO,UAAU,GAEpC,KAAK,GACH,IAAKxJ,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,gEAAe,CAC7C8E,EAAUjI,KAAO,GACjB,MAIF,OADA7G,KAAK6B,KAAK,gBACHiN,EAAUtF,OAAO,UAAU,GAEpC,KAAK,GACHtB,EAAQ,EAEV,KAAK,GAOH,OADA4G,EAAUjI,KAAO,IACV,EAAI9C,EAAa,SAAa,KAEvC,KAAK,GAGH,KAFAsE,EAAQrI,KAAKyI,MAEF,IAAIpL,IAAI2M,SAAS,iDAAe,CACzC8E,EAAUjI,KAAO,GACjB,MAGFiI,EAAUjI,KAAO,GACjB,MAEF,KAAK,GACH,IAAKwB,EAAM,IAAIhL,IAAI2M,SAAS,wFAAmB,CAC7C8E,EAAUjI,KAAO,GACjB,MAGF,GAAgB,IAAVqB,EAAc,CAClB4G,EAAUjI,KAAO,GACjB,MAGF,OAAOiI,EAAUtF,OAAO,WAAY,IAEtC,KAAK,GAEH,OADAsF,EAAUjI,KAAO,GACV7G,KAAK+C,KAAK,GAAGtE,OAAOsP,EAAO,IAAM,KAAKtP,OAAOwF,EAAOyH,OAAOyC,QAEpE,KAAK,GAEH,OADAjG,EAAQ,EACD4G,EAAUtF,OAAO,WAAY,IAEtC,KAAK,GACH,IAAKnB,EAAM,IAAIhL,IAAI2M,SAAS,oGAAqB,CAC/C8E,EAAUjI,KAAO,GACjB,MAGF,GAAgB,IAAVqB,EAAc,CAClB4G,EAAUjI,KAAO,GACjB,MAGF,OAAOiI,EAAUtF,OAAO,WAAY,IAEtC,KAAK,GAEH,OADAsF,EAAUjI,KAAO,GACV7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOyC,QAE3C,KAAK,GACHjG,EAAQ,EACR4G,EAAUjI,KAAO,GACjB,MAEF,KAAK,GACH,IAAKwB,EAAM,IAAIhL,IAAI2M,SAAS,wFAAmB,CAC7C8E,EAAUjI,KAAO,GACjB,MAGF,GAAgB,IAAVqB,EAAc,CAClB4G,EAAUjI,KAAO,GACjB,MAGF,OAAOiI,EAAUtF,OAAO,WAAY,IAEtC,KAAK,GAEH,OADAsF,EAAUjI,KAAO,GACV7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,GACHjG,EAAQ,EACR4G,EAAUjI,KAAO,GACjB,MAEF,KAAK,GACH,IAAKwB,EAAM,IAAIhL,IAAI2M,SAAS,wCAAW,CACrC8E,EAAUjI,KAAO,GACjB,MAIF,OADAiI,EAAUjI,KAAO,GACV7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOyC,QAE3C,KAAK,GACHW,EAAUjI,KAAO,GACjB,MAEF,KAAK,GACH,KAAMwB,EAAM,IAAIhL,IAAMgL,EAAM,IAAIhL,KAAKkM,cAAcS,SAAS,OAAQ,CAClE8E,EAAUjI,KAAO,GACjB,MAKF,OAFAsD,QAAQiD,KAAK,0BAA0B3O,OAAOuB,KAAK+O,SACnDD,EAAUjI,KAAO,GACV7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,GACHW,EAAUjI,KAAO,GACjB,MAEF,KAAK,GACH,IAAKwB,EAAM,IAAIhL,IAAI2M,SAAS,gBAAO,CACjC8E,EAAUjI,KAAO,GACjB,MAGF,OAAOiI,EAAUtF,OAAO,QAAS,IAEnC,KAAK,GACHW,QAAQiD,KAAK,0BAA0B3O,OAAOuB,KAAK+O,SAErD,KAAK,GACHD,EAAUjI,KAAO,GACjB,MAEF,KAAK,GAEH,OADA7G,KAAK6B,KAAK,iBACHiN,EAAUtF,OAAO,UAAU,GAEpC,KAAK,GACL,IAAK,MACH,OAAOsF,EAAUxE,UAGtBuE,EAAU7O,UAOf,OAJA,SAAoBgP,GAClB,OAAOJ,EAAYzO,MAAMH,KAAME,YAhL5B,IAyLN,CACDmB,IAAK,yBACL3E,MAAO,WAEL,MAAsB,kBADL,EAAIwH,EAAM/G,aAAa,OAAQ6C,KAAKyI,KAAK,GAAGpL,IAAK,EAAG,GAAG4R,SAGzE,CACD5N,IAAK,SACL3E,MAAO,SAAgBwS,GACrB,OAAOA,EAAMC,OAAOnP,QAMrB,CACDqB,IAAK,WACL3E,MAAO,WACL,IAAI0S,GAAY,EAAIvL,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASuG,IACrG,IAAIC,EACAnH,EACAoH,EACA7Q,EACA+J,EACA+G,EACAC,EAASvP,UACb,OAAO0D,EAAY,QAAYoF,MAAK,SAAmB0G,GACrD,OACE,OAAQA,EAAUxG,KAAOwG,EAAU7I,MACjC,KAAK,EAGH,OAFAyI,EAASG,EAAOhS,OAAS,QAAmB8G,IAAdkL,EAAO,GAAmBA,EAAO,GAAK,EACpEC,EAAU7I,KAAO,EACV7G,KAAK2P,YAEd,KAAK,EACH,KAAML,EAAS,GAAI,CACjBI,EAAU7I,KAAO,EACjB,MAKF,OAFAyI,EAASxR,KAAKC,IAAIuR,EAAS,EAAG,GAC9BI,EAAU7I,KAAO,EACV7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAO6Q,GAAQ7Q,OAAOwF,EAAOyH,OAAOyC,QAE9G,KAAK,EAIH,IAHAhG,EAAUnI,KAAKmI,QACfoH,EAAQ,GAEH7Q,EAAI,EAAGA,GAAK,GAAIA,IACnB+J,EAAON,EAAQzJ,GAAGrB,IAClBmS,EAAO,CACLK,KAAK,EAAI3L,EAAM/G,aAAa,OAAQsL,EAAM,EAAG,GAAGwG,OAChDa,MAAM,EAAI5L,EAAM/G,aAAa,OAAQsL,EAAM,EAAG,GAAGwG,OACjDc,QAAQ,EAAI7L,EAAM/G,aAAa,OAAQsL,EAAM,GAAI,IAAIwG,OACrDe,QAAQ,EAAI9L,EAAM/G,aAAa,OAAQsL,EAAM,GAAI,GAAGwG,OACpDgB,OAAO,EAAI/L,EAAM/G,aAAa,OAAQsL,EAAM,IAAIwG,QAElDM,EAAMjN,KAAKkN,GAIb,OADAE,EAAU7I,KAAO,GACV7G,KAAKkQ,aAEd,KAAK,GACH,OAAOR,EAAUlG,OAAO,SAAU+F,EAAMY,WAE1C,KAAK,GACL,IAAK,MACH,OAAOT,EAAUpF,UAGtB+E,EAAUrP,UAOf,OAJA,WACE,OAAOoP,EAAUjP,MAAMH,KAAME,YA1D1B,IAmEN,CACDmB,IAAK,UACL3E,MAAO,WACL,IAAI0T,GAAW,EAAIvM,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASuH,EAAUR,GAC9G,IAAI1H,EAAoBqH,EACxB,OAAO5L,EAAY,QAAYoF,MAAK,SAAoBsH,GACtD,OACE,OAAQA,EAAWpH,KAAOoH,EAAWzJ,MACnC,KAAK,EAEH,OADAyJ,EAAWzJ,KAAO,EACX7G,KAAK2P,YAEd,KAAK,EAGH,OAFAxH,EAAUnI,KAAKmI,QACfmI,EAAWzJ,KAAO,EACX7G,KAAK+C,KAAK,GAAGtE,OAAOoR,GAAIpR,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOyC,QAElF,KAAK,EAiBH,OAhBYnO,KAAKuQ,yBACjBf,EAAO,CACLK,GAAIA,EACJE,OAAQ,GACRE,MAAO,GACPO,UAAW,GACXnI,MAAO,IAGLrI,KAAKuQ,2BACPf,EAAKO,QAAS,EAAI7L,EAAM/G,aAAa,OAAQgL,EAAQ,GAAG9K,IAAK,EAAG,IAAI4R,OACpEO,EAAKS,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQgL,EAAQ,GAAG9K,IAAK,GAAG4R,OAC/DO,EAAKgB,WAAY,EAAItM,EAAM/G,aAAa,OAAQgL,EAAQ,GAAG9K,IAAK,GAAG4R,QAGrEqB,EAAWzJ,KAAO,GACX7G,KAAKyQ,WAEd,KAAK,GAGH,OAFAjB,EAAKnH,MAAQiI,EAAW5D,KACxB4D,EAAWzJ,KAAO,GACX7G,KAAKkQ,aAEd,KAAK,GACH,OAAOI,EAAW9G,OAAO,SAAUgG,GAErC,KAAK,GACL,IAAK,MACH,OAAOc,EAAWhG,UAGvB+F,EAAWrQ,UAOhB,OAJA,SAAiB0Q,GACf,OAAON,EAASjQ,MAAMH,KAAME,YAnDzB,IAwDN,CACDmB,IAAK,aACL3E,MAAO,WACL,IAAIiU,GAAc,EAAI9M,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS8H,IACvG,OAAOhN,EAAY,QAAYoF,MAAK,SAAoB6H,GACtD,OACE,OAAQA,EAAW3H,KAAO2H,EAAWhK,MACnC,KAAK,EAEH,OADAgK,EAAWhK,KAAO,EACX7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOgC,UAAUzP,OAAO,KAE5D,KAAK,EACH,OAAO4S,EAAWrH,OAAO,UAAU,GAErC,KAAK,EACL,IAAK,MACH,OAAOqH,EAAWvG,UAGvBsG,EAAW5Q,UAOhB,OAJA,WACE,OAAO2Q,EAAYxQ,MAAMH,KAAME,YArB5B,IA0BN,CACDmB,IAAK,UACL3E,MAAO,WACL,IAAIoU,GAAW,EAAIjN,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASiI,IACpG,OAAOnN,EAAY,QAAYoF,MAAK,SAAoBgI,GACtD,OACE,OAAQA,EAAW9H,KAAO8H,EAAWnK,MACnC,KAAK,EAEH,OADAmK,EAAWnK,KAAO,EACX7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOW,OAE3C,KAAK,EACH,OAAO2E,EAAWxH,OAAO,UAAU,GAErC,KAAK,EACL,IAAK,MACH,OAAOwH,EAAW1G,UAGvByG,EAAW/Q,UAOhB,OAJA,WACE,OAAO8Q,EAAS3Q,MAAMH,KAAME,YArBzB,IA0BN,CACDmB,IAAK,6BAEL3E,MAAO,WACL,IAAIuU,GAA8B,EAAIpN,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASoI,EAAUC,GACjI,IAAIC,EACJ,OAAOxN,EAAY,QAAYoF,MAAK,SAAoBqI,GACtD,OACE,OAAQA,EAAWnI,KAAOmI,EAAWxK,MACnC,KAAK,EACH,GAAI7G,KAAKkI,MAAM0B,MAAO,CACpByH,EAAWxK,KAAO,EAClB,MAGF,OAAOwK,EAAW7H,OAAO,SAAUqC,QAAQC,OAAO,cAEpD,KAAK,EAGH,OAFAsF,EAAQ,IAAI3S,OAAO0S,GAAK1S,OAAOwF,EAAOyH,OAAOyC,OAC7CkD,EAAWxK,KAAO,EACX7G,KAAK+C,KAAKqO,GAEnB,KAAK,EAGH,GAFMC,EAAW3E,KAER,CACP2E,EAAWxK,KAAO,GAClB,MAIF,OADAwK,EAAWxK,KAAO,EACX7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOyC,QAE3C,KAAK,EACH,OAAOkD,EAAW7H,OAAO,SAAUqC,QAAQC,OAAO,sCAEpD,KAAK,GAEH,OADAuF,EAAWxK,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAO4F,aAE3C,KAAK,GACH,OAAOD,EAAW7H,OAAO,SAAUqC,QAAQgB,QAAQ,oBAAoBpO,OAAO0S,KAEhF,KAAK,GACL,IAAK,MACH,OAAOE,EAAW/G,UAGvB4G,EAAWlR,UAOhB,OAJA,SAAoCuR,GAClC,OAAON,EAA4B9Q,MAAMH,KAAME,YAjD5C,IAuDN,CACDmB,IAAK,oBACL3E,MAAO,WACL,IAAI8U,GAAqB,EAAI3N,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS2I,EAAUnD,EAAW6C,GACnI,OAAOvN,EAAY,QAAYoF,MAAK,SAAoB0I,GACtD,OACE,OAAQA,EAAWxI,KAAOwI,EAAW7K,MACnC,KAAK,EACH,GAAI7G,KAAKkI,MAAM0B,MAAO,CACpB8H,EAAW7K,KAAO,EAClB,MAGF,OAAO6K,EAAWlI,OAAO,SAAUqC,QAAQC,OAAO,cAEpD,KAAK,EAGH,OAFA4F,EAAWxI,KAAO,EAClBwI,EAAW7K,KAAO,EACX7G,KAAK2R,iBAAiBrD,GAE/B,KAAK,EAEH,OADAoD,EAAW7K,KAAO,EACX7G,KAAK4R,2BAA2BT,GAEzC,KAAK,EACH,OAAOO,EAAWlI,OAAO,SAAUqC,QAAQgB,QAAQ,oBAAoBpO,OAAO0S,KAEhF,KAAK,GAGH,OAFAO,EAAWxI,KAAO,GAClBwI,EAAWpI,GAAKoI,EAAU,MAAU,GAC7BA,EAAWlI,OAAO,SAAUqC,QAAQC,OAAO4F,EAAWpI,KAE/D,KAAK,GACL,IAAK,MACH,OAAOoI,EAAWpH,UAGvBmH,EAAWzR,KAAM,CAAC,CAAC,EAAG,UAO3B,OAJA,SAA2B6R,EAAKC,GAC9B,OAAON,EAAmBrR,MAAMH,KAAME,YAvCnC,IAoDN,CACDmB,IAAK,wBACL3E,MAAO,WACL,IAAIqV,GAAyB,EAAIlO,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkJ,EAAUC,GAC5H,IAAIC,EAAgCC,EAAWC,EAAOC,EAEtD,OAAOzO,EAAY,QAAYoF,MAAK,SAAoBsJ,GACtD,OACE,OAAQA,EAAWpJ,KAAOoJ,EAAWzL,MACnC,KAAK,EAIH,GAAsB,KAFtBqL,GADAA,EAAOD,EAAIC,MACCjD,QAEDxR,OAAe,CACxB6U,EAAWzL,KAAO,EAClB,MAGF,OAAOyL,EAAW9I,OAAO,SAAUqC,QAAQC,OAAO,iBAEpD,KAAK,EACU,GAmCboG,EAjCe,SAAsB7U,GAInC,IAHA,IAAIkV,EAAY,GACZC,EAAU,GAEL9T,EAAI,EAAGsI,EAAM,EAAGtI,EAAIrB,EAAII,QAC3BJ,EAAIqB,IAAM,OAERsI,GAAOyL,IACTF,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAhBK,IAmBHsI,GACFuL,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAMN,OADA6T,EAAUjQ,KAAKkQ,GACRD,EAGFG,CAAaR,GACpBI,EAAWpJ,KAAO,EAElBiJ,EAAY5M,EAA2B2M,GACvCI,EAAWpJ,KAAO,EAElBiJ,EAAUhM,IAEZ,KAAK,GACH,IAAKiM,EAAQD,EAAUtM,KAAKO,KAAM,CAChCkM,EAAWzL,KAAO,GAClB,MAKF,OAFAwL,EAAID,EAAM1V,MACV4V,EAAWzL,KAAO,GACX7G,KAAK+C,KAAK,KAEnB,KAAK,GACH,IAAK/C,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,8CAAY,CAC1CsI,EAAWzL,KAAO,GAClB,MAIF,OADAyL,EAAWzL,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAOwT,EAAIU,OAEjC,KAAK,GACH,IAAM3S,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,kDAAgBhK,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAShK,KAAKkI,MAAM2F,UAAY,CACjGyE,EAAWzL,KAAO,GAClB,MAIF,OADAyL,EAAWzL,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAO4T,GAAG5T,OAAOwF,EAAOyH,OAAOyC,QAErD,KAAK,GAEH,OADAmE,EAAWzL,KAAO,GACX7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,GACHmE,EAAWzL,KAAO,GAClB,MAEF,KAAK,GAEH,OADAyL,EAAWzL,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOgC,YAE3C,KAAK,GACH4E,EAAWzL,KAAO,GAClB,MAEF,KAAK,GACHyL,EAAWzL,KAAO,GAClB,MAEF,KAAK,GACHyL,EAAWpJ,KAAO,GAClBoJ,EAAWhJ,GAAKgJ,EAAU,MAAU,GAEpCH,EAAUxS,EAAE2S,EAAWhJ,IAEzB,KAAK,GAKH,OAJAgJ,EAAWpJ,KAAO,GAElBiJ,EAAU7L,IAEHgM,EAAWM,OAAO,IAE3B,KAAK,GACH,OAAON,EAAW9I,OAAO,SAAUqC,QAAQgB,QAAQ,oBAErD,KAAK,GAGH,OAFAyF,EAAWpJ,KAAO,GAClBoJ,EAAWO,GAAKP,EAAU,MAAU,GAC7BA,EAAW9I,OAAO,SAAUqC,QAAQC,OAAOwG,EAAWO,KAE/D,KAAK,GACL,IAAK,MACH,OAAOP,EAAWhI,UAGvB0H,EAAWhS,KAAM,CAAC,CAAC,EAAG,IAAK,CAAC,EAAG,GAAI,GAAI,UAO5C,OAJA,SAA+B8S,GAC7B,OAAOf,EAAuB5R,MAAMH,KAAME,YA5IvC,IAiJN,CACDmB,IAAK,eACL3E,MAAO,WACL,IAAIqW,GAAgB,EAAIlP,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkK,IACzG,OAAOpP,EAAY,QAAYoF,MAAK,SAAoBiK,GACtD,OACE,OAAQA,EAAW/J,KAAO+J,EAAWpM,MACnC,KAAK,EACL,IAAK,MACH,OAAOoM,EAAW3I,UAGvB0I,OAOL,OAJA,WACE,OAAOD,EAAc5S,MAAMH,KAAME,YAd9B,IA0BN,CACDmB,IAAK,cACL3E,MAAO,WACL,IAAIwW,GAAe,EAAIrP,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASqK,EAAUlB,GAClH,IAAIC,EAAgCkB,EAAYC,EAAQhB,EAExD,OAAOzO,EAAY,QAAYoF,MAAK,SAAoBsK,GACtD,OACE,OAAQA,EAAWpK,KAAOoK,EAAWzM,MACnC,KAAK,EACH,GAAI7G,KAAKkI,MAAM0B,MAAO,CACpB0J,EAAWzM,KAAO,EAClB,MAGF,OAAOyM,EAAW9J,OAAO,SAAUqC,QAAQC,OAAO,cAEpD,KAAK,EAIH,GAAsB,KAFtBoG,GADAA,EAAOD,EAAIC,MACCjD,QAEDxR,OAAe,CACxB6V,EAAWzM,KAAO,EAClB,MAGF,OAAOyM,EAAW9J,OAAO,SAAUqC,QAAQC,OAAO,iBAEpD,KAAK,EAuCH,OAtCa,GAmCboG,EAjCe,SAAsB7U,GAInC,IAHA,IAAIkV,EAAY,GACZC,EAAU,GAEL9T,EAAI,EAAGsI,EAAM,EAAGtI,EAAIrB,EAAII,QAC3BJ,EAAIqB,IAAM,OAERsI,GAAOyL,IACTF,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAhBK,IAmBHsI,GACFuL,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAMN,OADA6T,EAAUjQ,KAAKkQ,GACRD,EAGFG,CAAaR,GACpBoB,EAAWpK,KAAO,EAClBoK,EAAWzM,KAAO,GACX7G,KAAK2R,iBAAiBM,EAAIsB,WAEnC,KAAK,GACHH,EAAa7N,EAA2B2M,GACxCoB,EAAWpK,KAAO,GAElBkK,EAAWjN,IAEb,KAAK,GACH,IAAKkN,EAASD,EAAWvN,KAAKO,KAAM,CAClCkN,EAAWzM,KAAO,GAClB,MAKF,OAFAwL,EAAIgB,EAAO3W,MACX4W,EAAWzM,KAAO,GACX7G,KAAKwT,eAEd,KAAK,GAEH,OADAF,EAAWzM,KAAO,GACX7G,KAAK+C,KAAK,KAEnB,KAAK,GACH,IAAK/C,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,8CAAY,CAC1CsJ,EAAWzM,KAAO,GAClB,MAIF,OADAyM,EAAWzM,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAOwT,EAAIU,OAEjC,KAAK,GACH,IAAM3S,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAS,kDAAgBhK,KAAKyI,KAAK,IAAIpL,IAAI2M,SAAShK,KAAKkI,MAAM2F,UAAY,CACjGyF,EAAWzM,KAAO,GAClB,MAIF,OADAyM,EAAWzM,KAAO,GACX7G,KAAK+C,KAAK,GAAGtE,OAAO4T,GAAG5T,OAAOwF,EAAOyH,OAAOyC,QAErD,KAAK,GAEH,OADAmF,EAAWzM,KAAO,GACX7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,GACHmF,EAAWzM,KAAO,GAClB,MAEF,KAAK,GACHyM,EAAWzM,KAAO,GAClB,MAEF,KAAK,GACHyM,EAAWpK,KAAO,GAClBoK,EAAWhK,GAAKgK,EAAU,MAAU,IAEpCF,EAAWzT,EAAE2T,EAAWhK,IAE1B,KAAK,GAKH,OAJAgK,EAAWpK,KAAO,GAElBkK,EAAW9M,IAEJgN,EAAWV,OAAO,IAE3B,KAAK,GAEH,OADAU,EAAWzM,KAAO,GACX7G,KAAKkQ,aAEd,KAAK,GACH,OAAOoD,EAAW9J,OAAO,SAAUqC,QAAQgB,QAAQ,oBAErD,KAAK,GAGH,OAFAyG,EAAWpK,KAAO,GAClBoK,EAAWT,GAAKS,EAAU,MAAU,GAC7BA,EAAW9J,OAAO,SAAUqC,QAAQC,OAAOwH,EAAWT,KAE/D,KAAK,GACL,IAAK,MACH,OAAOS,EAAWhJ,UAGvB6I,EAAWnT,KAAM,CAAC,CAAC,EAAG,IAAK,CAAC,GAAI,GAAI,GAAI,UAO7C,OAJA,SAAqByT,GACnB,OAAOP,EAAa/S,MAAMH,KAAME,YAvJ7B,IA4JN,CACDmB,IAAK,mBACL3E,MAAO,WACL,IAAIgX,GAAoB,EAAI7P,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS6K,EAAUrF,GACvH,OAAO1K,EAAY,QAAYoF,MAAK,SAAoB4K,GACtD,OACE,OAAQA,EAAW1K,KAAO0K,EAAW/M,MACnC,KAAK,EAEH,OADA+M,EAAW/M,KAAO,EACX7G,KAAK+C,KAAK,IAAItE,OAAO6P,GAAW7P,OAAOwF,EAAOyH,OAAOyC,MAAO,KAAK1P,OAAOwF,EAAOyH,OAAOW,MAAM5N,OAAOwF,EAAOyH,OAAOkE,MAE1H,KAAK,EACH,GAAM5P,KAAK6T,iBAAiBtK,gBAAkB+E,EAAU/E,cAAgB,CACtEqK,EAAW/M,KAAO,EAClB,MAKF,OAFA7G,KAAKkI,MAAMmG,SAASC,UAAYtO,KAAK6T,iBACrC7T,KAAK6B,KAAK,cAAe7B,KAAKkI,OACvB0L,EAAWpK,OAAO,SAAUqC,QAAQgB,QAAQ,kBAAkBpO,OAAO6P,KAE9E,KAAK,EAEH,OADAsF,EAAW/M,KAAO,GACX7G,KAAKkQ,aAEd,KAAK,GACH,OAAO0D,EAAWpK,OAAO,SAAUqC,QAAQC,OAAO,4BAEpD,KAAK,GACL,IAAK,MACH,OAAO8H,EAAWtJ,UAGvBqJ,EAAW3T,UAOhB,OAJA,SAA0B8T,GACxB,OAAOJ,EAAkBvT,MAAMH,KAAME,YAnClC,IAwCN,CACDmB,IAAK,gBACL3E,MAAO,WACL,IAAIqX,GAAiB,EAAIlQ,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkL,IAC1G,IAEIC,EACApU,EAHAqU,EAASlU,KAITmU,EAAUjU,UACd,OAAO0D,EAAY,QAAYoF,MAAK,SAAoBoL,GACtD,OACE,OAAQA,EAAWlL,KAAOkL,EAAWvN,MACnC,KAAK,EAkFH,GAjFAoN,EAAUE,EAAQ1W,OAAS,QAAoB8G,IAAf4P,EAAQ,GAAmBA,EAAQ,GAAK,GACxEtU,GAAS,EACToU,EAAQpM,QAAsB,WAC5B,IAAIwM,GAAQ,EAAIxQ,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASwL,EAAUhF,GAC3G,IAAI5Q,EAAG6V,EACP,OAAO3Q,EAAY,QAAYoF,MAAK,SAAoBwL,GACtD,OACE,OAAQA,EAAWtL,KAAOsL,EAAW3N,MACnC,KAAK,EAKH,GAJe,IAAXyI,IACFzP,GAAS,KAGLyP,EAAS,GAAI,CACjBkF,EAAW3N,KAAO,GAClB,MAGFnI,EAAI,GAEN,KAAK,EACH,KAAMA,GAAK,GAAI,CACb8V,EAAW3N,KAAO,GAClB,MAKF,MAFA0N,GAAa,EAAIrQ,EAAM/G,aAAa,OAAQ+W,EAAOzL,KAAK/J,GAAGrB,IAAK,EAAG,GAAG4R,QAErDxR,OAAS,GAAI,CAC5B+W,EAAW3N,KAAO,EAClB,MAIF,OADAyI,IAAWiF,EAAa,EACjBC,EAAWhL,OAAO,QAAS,IAEpC,KAAK,EAGH,MAFA+K,GAAa,EAAIrQ,EAAM/G,aAAa,OAAQ+W,EAAOzL,KAAK/J,GAAGrB,IAAK,GAAI,GAAG4R,QAEtDxR,OAAS,GAAI,CAC5B+W,EAAW3N,KAAO,GAClB,MAIF,OADAyI,IAAWiF,EAAa,EACjBC,EAAWhL,OAAO,QAAS,IAEpC,KAAK,GACH9K,IACA8V,EAAW3N,KAAO,EAClB,MAEF,KAAK,GAKH,GAJIyI,EAAS,IACXzP,GAAS,GAGPA,EAAQ,CACV2U,EAAW3N,KAAO,GAClB,MAGF,OAAO2N,EAAWhL,OAAO,UAE3B,KAAK,GAEH,OADAgL,EAAW3N,KAAO,GACXqN,EAAOnR,KAAK,GAAGtE,OAAO6Q,GAAQ7Q,OAAOwF,EAAOyH,OAAOyC,MAAMlQ,OAAO,GAAI,KAAKQ,OAAOwF,EAAOyH,OAAOW,MAAM5N,OAAOwF,EAAOyH,OAAOkE,MAElI,KAAK,GACL,IAAK,MACH,OAAO4E,EAAWlK,UAGvBgK,OAGL,OAAO,SAAUG,GACf,OAAOJ,EAAMlU,MAAMH,KAAME,YA3EC,KA+EzBL,EAAQ,CACXuU,EAAWvN,KAAO,GAClB,MAMF,OAHA7G,KAAKkI,MAAMmG,SAASC,UAAYtO,KAAK6T,iBACrC7T,KAAK6B,KAAK,cAAe7B,KAAKkI,OAC9BkM,EAAWvN,KAAO,EACX7G,KAAK+C,KAAKkB,EAAOyH,OAAOW,MAEjC,KAAK,EACH,OAAO+H,EAAW5K,OAAO,UAAU,GAErC,KAAK,GAEH,OADA4K,EAAWvN,KAAO,GACX7G,KAAKkQ,aAEd,KAAK,GACH,OAAOkE,EAAW5K,OAAO,UAAU,GAErC,KAAK,GACL,IAAK,MACH,OAAO4K,EAAW9J,UAGvB0J,EAAWhU,UAOhB,OAJA,WACE,OAAO+T,EAAe5T,MAAMH,KAAME,YAzH/B,IA8HN,CACDmB,IAAK,qBACL3E,MAAO,WACL,IAAIgY,GAAsB,EAAI7Q,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS6L,IAC/G,IAAIV,EACAW,EAAU1U,UACd,OAAO0D,EAAY,QAAYoF,MAAK,SAAoB6L,GACtD,OACE,OAAQA,EAAW3L,KAAO2L,EAAWhO,MACnC,KAAK,EAGH,OAFAoN,EAAUW,EAAQnX,OAAS,QAAoB8G,IAAfqQ,EAAQ,GAAmBA,EAAQ,GAAK,GACxEC,EAAWhO,KAAO,EACX7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,EAEH,OADA0G,EAAWhO,KAAO,EACX7G,KAAK8U,cAAcb,GAE5B,KAAK,EACH,OAAOY,EAAWrL,OAAO,SAAUqL,EAAWnI,MAEhD,KAAK,EACL,IAAK,MACH,OAAOmI,EAAWvK,UAGvBqK,EAAW3U,UAOhB,OAJA,WACE,OAAO0U,EAAoBvU,MAAMH,KAAME,YA5BpC,IAiCN,CACDmB,IAAK,gBACL3E,MAAO,WACL,IAAIqY,GAAiB,EAAIlR,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkM,IAC1G,IAAIf,EACAgB,EAAU/U,UACd,OAAO0D,EAAY,QAAYoF,MAAK,SAAoBkM,GACtD,OACE,OAAQA,EAAWhM,KAAOgM,EAAWrO,MACnC,KAAK,EAGH,OAFAoN,EAAUgB,EAAQxX,OAAS,QAAoB8G,IAAf0Q,EAAQ,GAAmBA,EAAQ,GAAK,GACxEC,EAAWrO,KAAO,EACX7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE5C,KAAK,EAEH,OADA+G,EAAWrO,KAAO,EACX7G,KAAK8U,cAAcb,GAE5B,KAAK,EACH,OAAOiB,EAAW1L,OAAO,SAAU0L,EAAWxI,MAEhD,KAAK,EACL,IAAK,MACH,OAAOwI,EAAW5K,UAGvB0K,EAAWhV,UAOhB,OAJA,WACE,OAAO+U,EAAe5U,MAAMH,KAAME,YA5B/B,IAiCN,CACDmB,IAAK,YACL3E,MAAO,WACL,IAAIyY,GAAa,EAAItR,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASsM,IACtG,OAAOxR,EAAY,QAAYoF,MAAK,SAAoBqM,GACtD,OACE,OAAQA,EAAWnM,KAAOmM,EAAWxO,MACnC,KAAK,EAEH,OADAwO,EAAWxO,KAAO,EACX7G,KAAK+C,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,MAAO,KAAK1P,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOW,MAAM5N,OAAOwF,EAAOyH,OAAOkE,MAEpI,KAAK,EACH,OAAOyF,EAAW7L,OAAO,UAAU,GAErC,KAAK,EACL,IAAK,MACH,OAAO6L,EAAW/K,UAGvB8K,EAAWpV,UAOhB,OAJA,WACE,OAAOmV,EAAWhV,MAAMH,KAAME,YArB3B,IA0BN,CACDmB,IAAK,mBACLzE,IAAK,WACH,IAII0Y,EAJuBnR,EAAY,+DAAgE,CACrGmK,UAAW,IAGOpJ,KAAKlF,KAAKyI,KAAK,GAAGpL,KAEtC,OAAIiY,EACKA,EAAMjR,OAAOiK,eAEpB,MAICtG,EA9oDc,CA+oDrBlE,EAAa,UAEf,EAAIhD,EAAgB,SAAakH,EAAK,eAAgB,CACpDY,SAAS,EACTgB,OAAO,EACPS,SAAS,KAEX,EAAIvJ,EAAgB,SAAakH,EAAK,gBAAiB,CAAC,UAAW,UACnE,IAAIjH,EAAWiH,EACfvL,EAAO,QAAcsE,G,0ECrtDrB,YAEA,IAAI1E,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EAErB,IAAIkE,EAAsBtE,EAAuBC,EAAQ,MAErDiZ,EAASjZ,EAAQ,KAsBjByE,EApBS,SAAgBiB,EAAMiB,GACjC,IAAI5F,EAAM,GAEV,OAAQ4F,GACN,IAAK,OACL,IAAK,QACH5F,EAAMmY,EAAOzP,KAAK/D,GAAMvC,SAAS,QACjC,MAEF,IAAK,OACHpC,GAAM,EAAIkY,EAAOE,YAAYC,OAAOC,aAAaxV,MAAMuV,QAAQ,EAAI/U,EAAmB,SAAaqB,KACnG,MAEF,QACE,MAAM,IAAIuE,UAAU,oBAAoB9H,OAAOwE,IAGnD,OAAO5F,GAITZ,EAAO,QAAcsE,I,2DClCrB,YAEAxE,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EAErB,IAAI8Y,EAASjZ,EAAQ,KAsBjByE,EApBS,SAAgB1D,EAAK4F,GAChC,IAAI2S,EAEJ,OAAQ3S,GACN,IAAK,OACL,IAAK,QACH2S,EAASJ,EAAOzP,KAAK1I,EAAK,QAC1B,MAEF,IAAK,OACHuY,EAASJ,EAAOzP,MAAK,EAAIwP,EAAOM,YAAYxY,GAAM,UAClD,MAEF,QACE,MAAM,IAAIkJ,UAAU,oBAAoB9H,OAAOwE,IAGnD,OAAO2S,GAITnZ,EAAO,QAAcsE,I,0DC5BrBxE,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,aAAc,EAiBrBA,EAAO,QAhBQ,CACb0R,MAAO,KACPT,UAAW,SACX4D,WAAY,SACZwE,QAAS,SACTC,UAAW,SACXC,KAAM,UACNrK,OAAQ,UACRU,KAAM,UACNuD,IAAK,UACLqG,UAAW,KACXC,MAAO,OACPC,MAAO,OACP1I,MAAO,OACP2I,MAAO,S,uDClBT,IAAI/Z,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,QAAcA,EAAQ4Z,0BAA4B5Z,EAAQ6Z,UAAY7Z,EAAQ8Z,aAAU,EAE/F,IAAI3S,EAAevH,EAAuBC,EAAQ,MAE9CuH,EAAqBxH,EAAuBC,EAAQ,MAEpDuE,EAA0BxE,EAAuBC,EAAQ,KAEzDuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAElDsC,EAAmBvC,EAAuBC,EAAQ,KAElDsE,EAAgBvE,EAAuBC,EAAQ,KAE/CwE,EAAmBzE,EAAuBC,EAAQ,KAElDka,EAAuBla,EAAQ,KAE/B2H,EAAS3H,EAAQ,KAEjB4H,EAAQ5H,EAAQ,KAEpB,SAASiJ,EAA2BC,GAAK,GAAsB,qBAAXL,QAAgD,MAAtBK,EAAEL,OAAOM,UAAmB,CAAE,GAAIjF,MAAMkF,QAAQF,KAAOA,EAErI,SAAqCA,EAAGG,GAAU,IAAKH,EAAG,OAAQ,GAAiB,kBAANA,EAAgB,OAAOI,EAAkBJ,EAAGG,GAAS,IAAIE,EAAItJ,OAAOiD,UAAUC,SAASC,KAAK8F,GAAGM,MAAM,GAAI,GAAc,WAAND,GAAkBL,EAAEvF,cAAa4F,EAAIL,EAAEvF,YAAY+C,MAAM,GAAU,QAAN6C,GAAqB,QAANA,EAAa,OAAOrF,MAAMuF,KAAKP,GAAI,GAAU,cAANK,GAAqB,2CAA2CG,KAAKH,GAAI,OAAOD,EAAkBJ,EAAGG,GAF7QM,CAA4BT,IAAK,CAAE,IAAI9G,EAAI,EAAOwH,EAAI,aAAiB,MAAO,CAAEC,EAAGD,EAAGL,EAAG,WAAe,OAAInH,GAAK8G,EAAE/H,OAAe,CAAE2I,MAAM,GAAe,CAAEA,MAAM,EAAO1J,MAAO8I,EAAE9G,OAAWiB,EAAG,SAAW0G,GAAM,MAAMA,GAAOC,EAAGJ,GAAO,MAAM,IAAIK,UAAU,yIAA4I,IAAIC,EAA6CC,EAAzCC,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAER,EAAG,WAAeK,EAAKhB,EAAEL,OAAOM,aAAgBI,EAAG,WAAe,IAAIe,EAAOJ,EAAGK,OAAsC,OAA9BH,EAAmBE,EAAKR,KAAaQ,GAASjH,EAAG,SAAWmH,GAAOH,GAAS,EAAMF,EAAMK,GAAQR,EAAG,WAAe,IAAWI,GAAoC,MAAhBF,EAAE,QAAoBA,EAAE,SAAvD,QAAiF,GAAIG,EAAQ,MAAMF,KAI53B,SAASb,EAAkBmB,EAAKC,IAAkB,MAAPA,GAAeA,EAAMD,EAAItJ,UAAQuJ,EAAMD,EAAItJ,QAAQ,IAAK,IAAIiB,EAAI,EAAGuI,EAAO,IAAIzG,MAAMwG,GAAMtI,EAAIsI,EAAKtI,IAAOuI,EAAKvI,GAAKqI,EAAIrI,GAAM,OAAOuI,EAEhL,SAASjI,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAI3b,IA2EIyW,EA3EAC,EAAuB,WAyBzB,SAASA,KACP,EAAI3X,EAAgB,SAAaoB,KAAMuW,IACvC,EAAIzV,EAAgB,SAAad,KAAM,iBAAa,IACpD,EAAIc,EAAgB,SAAad,KAAM,UAAM,IAC7C,EAAIc,EAAgB,SAAad,KAAM,YAAQ,IAC/C,EAAIc,EAAgB,SAAad,KAAM,YAAQ,IAC/C,EAAIc,EAAgB,SAAad,KAAM,iBAAa,IACpD,EAAIc,EAAgB,SAAad,KAAM,cAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,cAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,aAAS,IAChD,EAAIc,EAAgB,SAAad,KAAM,aAAS,IAChD,EAAIc,EAAgB,SAAad,KAAM,gBAAY,IACnD,EAAIc,EAAgB,SAAad,KAAM,mBAAe,IACtD,EAAIc,EAAgB,SAAad,KAAM,WAAY,IAiCrD,OAtEA,EAAIY,EAAa,SAAa2V,EAAS,CAAC,CACtClV,IAAK,UACLzE,IAAK,WACH,OAAOoD,KAAKyW,UAEd5R,IAAK,SAAa6R,GAChB1W,KAAKyW,SAAWC,EAAQ5Q,UAEzB,CACDzE,IAAK,OACLzE,IAAK,WACH,OAAOoD,KAAKyW,SAAS/N,KAAI,SAAUgO,GACjC,OAAOA,EAAQrZ,QAOnBwH,IAAK,SAAa7C,GAChBmI,QAAQwM,KAAK,+EAoBjB,EAAI/V,EAAa,SAAa2V,EAAS,CAAC,CACtClV,IAAK,YACL3E,MAAO,WACL,OAA4B,IAAxBsD,KAAK0W,QAAQjZ,QAKK,kBADL,EAAIyG,EAAM/G,aAAa,OAAQ6C,KAAK0W,QAAQ,GAAGrZ,IAAK,EAAG,GAAG4R,UAG3E,CAAC,CACH5N,IAAK,WACL3E,MAAO,SAAkB+L,GACvB,IAAImO,EAAU,IAAIL,EACdlZ,EAAMoL,EAAKpL,IAQf,OAPAuZ,EAAQC,KAAM,EAAI3S,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACxD2H,EAAQtU,MAAO,EAAI4B,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACzD2H,EAAQ9G,MAAO,EAAI5L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OAC1D2H,EAAQ7G,QAAS,EAAI7L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI4R,OAC7D2H,EAAQ5G,QAAS,EAAI9L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OAC5D2H,EAAQ3G,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,IAAI4R,OACxD2H,EAAQE,OAAQ,EAAI5S,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OAAOjF,SAAS,UACnE4M,IAER,CACDvV,IAAK,SACL3E,MAAO,SAAgBqa,GACrB,OAAO,IAAIV,EAA0BU,OAGlCR,EAvEkB,GA0E3B9Z,EAAQ8Z,QAAUA,EAElB9Z,EAAQ6Z,UAAYA,EAEpB,SAAWA,GACTA,EAAS,UAAgB,YACzBA,EAAS,GAAS,KAClBA,EAAS,KAAW,OACpBA,EAAS,OAAa,SACtBA,EAAS,MAAY,QALvB,CAMGA,IAAc7Z,EAAQ6Z,UAAYA,EAAY,KAEjD,IAAID,EAAyC,SAAUW,IACrD,EAAInY,EAAU,SAAawX,EAA2BW,GAEtD,IAAI3W,EAASrB,EAAaqX,GAE1B,SAASA,EAA0BU,GACjC,IAAI5V,EASJ,OAPA,EAAIvC,EAAgB,SAAaoB,KAAMqW,GACvClV,EAAQd,EAAOX,KAAKM,OACpB,EAAIc,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,WAAO,IACxF,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,YAAa,KAC9F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,SAAU,KAC3F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,KAAM,GACvFA,EAAM4V,IAAMA,EACL5V,EAopBT,OAjpBA,EAAIP,EAAa,SAAayV,EAA2B,CAAC,CACxDhV,IAAK,QACL3E,MAAO,SAAeiW,EAAMsE,GAC1B,OAAQtE,GACN,KAAK2D,EAAUY,UACU,KAAnBlX,KAAKsO,UACPnE,QAAQwM,KAAK,gCAAiClY,OAAOkU,EAAM,qBAE3D3S,KAAKsO,UAAY2I,EAGnB,MAEF,KAAKX,EAAUa,GACbnX,KAAK6W,IAAMI,EACX,MAEF,KAAKX,EAAUc,KACbpX,KAAKqX,OAAO/U,KAAK,CACfqQ,KAAM,IACNsE,UAAWA,IAEb,MAEF,KAAKX,EAAUgB,OACbtX,KAAKqX,OAAO/U,KAAK,CACfqQ,KAAM,IACNsE,UAAWA,IAEb,MAEF,KAAKX,EAAUiB,MACbvX,KAAKqX,OAAO/U,KAAK,CACfqQ,KAAM,IACNsE,UAAWA,IAEb,MAEF,QACE,MAAM,IAAIzY,MAAM,iBAAiBC,OAAOkU,IAG5C,OAAO3S,OAER,CACDqB,IAAK,WACL3E,MAAO,WACL,OAAOsD,KAAKqX,OAAO3O,KAAI,SAAUxG,GAC/B,IAAIyQ,EAAOzQ,EAAKyQ,KACZsE,EAAY/U,EAAK+U,UACrB,MAAO,GAAGxY,OAAOkU,GAAMlU,OAAOwY,GAAWxY,OAAOwF,EAAOyH,OAAOyC,UAC7DxF,SAQJ,CACDtH,IAAK,cACL3E,MAAO,WACL,IAEI8a,EAFAjW,EAASvB,KAuHb,MApHe,CACb6G,KAAM,WACJ,IAAIoE,GAAQ,EAAIpH,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASC,IACjG,IAAI0O,EAAOC,EAAUhZ,EAAG+J,EAAMmO,EAC9B,OAAOhT,EAAY,QAAYoF,MAAK,SAAkBC,GACpD,OACE,OAAQA,EAASC,KAAOD,EAASpC,MAC/B,KAAK,EAGH,GAFAoC,EAASC,KAAO,EAEE,IAAZsO,EAAgB,CACpBvO,EAASpC,KAAO,EAChB,MAGF,OAAOoC,EAASO,OAAO,SAAU,CAC/B9M,MAAO,KACP0J,MAAM,IAGV,KAAK,EACH,GAAIoR,EAAS,CACXvO,EAASpC,KAAO,GAChB,MAIF,OADAoC,EAASpC,KAAO,EACTtF,EAAOwV,IAAIpF,iBAAiBpQ,EAAO+M,WAE5C,KAAK,EAEH,OADArF,EAASpC,KAAO,EACTtF,EAAOwV,IAAIhU,KAAKxB,EAAOoW,YAEhC,KAAK,EAIH,GAHAF,EAAQxO,EAASyD,KACjBvC,QAAQC,IAAI,QAASqN,GAEjBA,EAAO,CACTxO,EAASpC,KAAO,GAChB,MAGF,OAAOoC,EAASO,OAAO,SAAU,CAC/B9M,MAAO,KACP0J,MAAM,IAGV,KAAK,GAEH,OADA6C,EAASpC,KAAO,GACTtF,EAAOwV,IAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOkE,MAEjD,KAAK,GACH3G,EAASpC,KAAO,GAChB,MAEF,KAAK,GAEH,OADAoC,EAASpC,KAAO,GACTtF,EAAOwV,IAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOsK,OAEjD,KAAK,GACH0B,EAAW,GACXhZ,EAAI,EAEN,KAAK,GACH,KAAMA,GAAK,IAAK,CACduK,EAASpC,KAAO,GAChB,MAKF,GAA0B,MAF1B4B,EAAOlH,EAAOwV,IAAItO,KAAK/J,IAEZrB,IAAI4R,OAAgB,CAC7BhG,EAASpC,KAAO,GAChB,MAGF,OAAOoC,EAASO,OAAO,QAAS,IAElC,KAAK,IACHoN,EAAUL,EAAQqB,SAASnP,IACnB6F,UAAY/M,EAAO+M,UAC3BoJ,EAASpV,KAAKsU,GAEhB,KAAK,GACHlY,IACAuK,EAASpC,KAAO,GAChB,MAEF,KAAK,GAGH,OADA2Q,EAAUE,EAAS,GAAGb,GACf5N,EAASO,OAAO,SAAU,CAC/B9M,MAAOgb,EACPtR,MAAM,IAGV,KAAK,GAGH,OAFA6C,EAASC,KAAO,GAChBD,EAASK,GAAKL,EAAQ,MAAU,GACzBA,EAASO,OAAO,SAAUqC,QAAQC,OAAO7C,EAASK,KAE3D,KAAK,GACL,IAAK,MACH,OAAOL,EAASqB,UAGrBvB,EAAS,KAAM,CAAC,CAAC,EAAG,UAOzB,OAJA,WACE,OAAOkC,EAAM9K,MAAMH,KAAME,YA7GvB,MA2HT,CACDmB,IAAK,iBACL3E,MAAO,WACL,IAAImb,GAAkB,EAAIhU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASoC,IAC3G,IAAI0L,EACJ,OAAOhT,EAAY,QAAYoF,MAAK,SAAmBwC,GACrD,OACE,OAAQA,EAAUtC,KAAOsC,EAAU3E,MACjC,KAAK,EAEH,OADA2E,EAAU3E,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOuB,KAAK6W,IAAIpY,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOyC,QAE3F,KAAK,EAKH,OAJAyI,EAAU,IAAIL,GACNM,GAAK7W,KAAK6W,GAClBD,EAAQtI,UAAYtO,KAAKsO,UACzB9C,EAAU3E,KAAO,EACV7G,KAAK+W,IAAItK,aAElB,KAAK,EAWH,OAVAmK,EAAQF,QAAUlL,EAAUkB,KAExBkK,EAAQkB,cACVlB,EAAQ7G,QAAS,EAAI7L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,EAAG,IAAI4R,OAC7E2H,EAAQ3G,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,OACxE2H,EAAQpG,WAAY,EAAItM,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,QAI9EzD,EAAU3E,KAAO,GACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOgC,YAE/C,KAAK,GACH,OAAOlC,EAAUhC,OAAO,SAAUoN,GAEpC,KAAK,GACL,IAAK,MACH,OAAOpL,EAAUlB,UAGtBY,EAAUlL,UAOf,OAJA,WACE,OAAO6X,EAAgB1X,MAAMH,KAAME,YA1ChC,IAgDN,CACDmB,IAAK,MACL3E,MAAO,WACL,IAAIqb,GAAO,EAAIlU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkD,IAChG,IAAW6K,EAAIa,EAAUhZ,EAAG+J,EAAMmO,EAASzK,EAAI6L,EAE/C,OAAOpU,EAAY,QAAYoF,MAAK,SAAmBoD,GACrD,OACE,OAAQA,EAAUlD,KAAOkD,EAAUvF,MACjC,KAAK,EAEH,OADAuF,EAAUvF,KAAO,EACV7G,KAAK+W,IAAIpF,iBAAiB3R,KAAKsO,WAExC,KAAK,EAEH,OADAlC,EAAUvF,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK/C,KAAK2X,YAE5B,KAAK,EAGH,GAFQvL,EAAUM,KAEP,CACTN,EAAUvF,KAAO,EACjB,MAGF,OAAOuF,EAAU5C,OAAO,SAAU,IAEpC,KAAK,EACH,KAAMxJ,KAAK6W,GAAK,GAAI,CAClBzK,EAAUvF,KAAO,GACjB,MAKF,OAFAgQ,EAAK/Y,KAAKC,IAAIiC,KAAK6W,GAAK,EAAG,GAC3BzK,EAAUvF,KAAO,GACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAOoY,GAAIpY,OAAOwF,EAAOyH,OAAOyC,QAE9G,KAAK,GACHuJ,EAAW,GACXhZ,EAAI,EAEN,KAAK,GACH,KAAMA,GAAK,IAAK,CACd0N,EAAUvF,KAAO,GACjB,MAKF,GAA0B,MAF1B4B,EAAOzI,KAAK+W,IAAItO,KAAK/J,IAEVrB,IAAI4R,OAAgB,CAC7B7C,EAAUvF,KAAO,GACjB,MAGF,OAAOuF,EAAU5C,OAAO,QAAS,IAEnC,KAAK,IACHoN,EAAUL,EAAQqB,SAASnP,IACnB6F,UAAYtO,KAAKsO,UACzBoJ,EAASpV,KAAKsU,GAEhB,KAAK,GACHlY,IACA0N,EAAUvF,KAAO,GACjB,MAEF,KAAK,GACH,KAAM6Q,EAASja,QAAU,GAAwB,IAAnBia,EAAS,GAAGb,IAAW,CACnDzK,EAAUvF,KAAO,GACjB,MAGFsF,EAAK,EAEP,KAAK,GACH,KAAMA,EAAKuL,EAASja,QAAS,CAC3B2O,EAAUvF,KAAO,GACjB,MAGF,GAA0B,IAApB6Q,EAASvL,GAAI0K,GAAW,CAC5BzK,EAAUvF,KAAO,GACjB,MAIF,OADA6Q,EAAS,GAAGb,GAAKa,EAASvL,GAAI0K,GAAK1K,EAC5BC,EAAU5C,OAAO,QAAS,IAEnC,KAAK,GACH2C,IACAC,EAAUvF,KAAO,GACjB,MAEF,KAAK,GACH,IAAKmR,EAAM,EAAGA,EAAMN,EAASja,OAAQua,IACnCN,EAASM,GAAKnB,GAAKa,EAASM,EAAM,GAAGnB,GAAK,EAI5C,OADAzK,EAAUvF,KAAO,GACV7G,KAAK+W,IAAI7G,aAElB,KAAK,GACH,OAAO9D,EAAU5C,OAAO,SAAUkO,EAASvH,WAE7C,KAAK,GACL,IAAK,MACH,OAAO/D,EAAU9B,UAGtB0B,EAAUhM,UAOf,OAJA,WACE,OAAO+X,EAAK5X,MAAMH,KAAME,YA/GrB,IAoHN,CACDmB,IAAK,SACL3E,MAAO,WACL,IAAIub,GAAU,EAAIpU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASyD,IACnG,IAAWqK,EACX,OAAOhT,EAAY,QAAYoF,MAAK,SAAmBwD,GACrD,OACE,OAAQA,EAAUtD,KAAOsD,EAAU3F,MACjC,KAAK,EAEH,OADA2F,EAAU3F,KAAO,EACV7G,KAAK+W,IAAIpF,iBAAiB3R,KAAKsO,WAExC,KAAK,EAEH,OADA9B,EAAU3F,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK/C,KAAK2X,YAE5B,KAAK,EAGH,GAFQnL,EAAUE,KAEP,CACTF,EAAU3F,KAAO,EACjB,MAGF,OAAO2F,EAAUhD,OAAO,cAAU,GAEpC,KAAK,EAEH,OADAgD,EAAU3F,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOuB,KAAK6W,IAAIpY,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOyC,QAE3F,KAAK,EAKH,OAJAyI,EAAU,IAAIL,GACNM,GAAK7W,KAAK6W,GAClBD,EAAQtI,UAAYtO,KAAKsO,UACzB9B,EAAU3F,KAAO,GACV7G,KAAK+W,IAAItK,aAElB,KAAK,GAUH,OATAmK,EAAQF,QAAUlK,EAAUE,KAExBkK,EAAQkB,cACVlB,EAAQ7G,QAAS,EAAI7L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,EAAG,IAAI4R,OAC7E2H,EAAQ3G,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,OACxE2H,EAAQpG,WAAY,EAAItM,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,QAG9EzC,EAAU3F,KAAO,GACV7G,KAAK+W,IAAI7G,aAElB,KAAK,GACH,OAAO1D,EAAUhD,OAAO,SAAUoN,GAEpC,KAAK,GACL,IAAK,MACH,OAAOpK,EAAUlC,UAGtBiC,EAAUvM,UAOf,OAJA,WACE,OAAOiY,EAAQ9X,MAAMH,KAAME,YA3DxB,IAgEN,CACDmB,IAAK,iBACL3E,MAAO,WACL,IAAIwb,GAAkB,EAAIrU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASyE,IAC3G,IAAWqJ,EACX,OAAOhT,EAAY,QAAYoF,MAAK,SAAmBwE,GACrD,OACE,OAAQA,EAAUtE,KAAOsE,EAAU3G,MACjC,KAAK,EAEH,OADA2G,EAAU3G,KAAO,EACV7G,KAAK+W,IAAIpF,iBAAiB3R,KAAKsO,WAExC,KAAK,EAEH,OADAd,EAAU3G,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK/C,KAAK2X,YAE5B,KAAK,EAGH,GAFQnK,EAAUd,KAEP,CACTc,EAAU3G,KAAO,EACjB,MAGF,OAAO2G,EAAUhE,OAAO,cAAU,GAEpC,KAAK,EAGH,OAFAgE,EAAUtE,KAAO,EACjBsE,EAAU3G,KAAO,GACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOuB,KAAK6W,IAAIpY,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOyC,QAE3F,KAAK,GAKH,OAJAyI,EAAU,IAAIL,GACNM,GAAK7W,KAAK6W,GAClBD,EAAQtI,UAAYtO,KAAKsO,UACzBd,EAAU3G,KAAO,GACV7G,KAAK+W,IAAIoB,qBAElB,KAAK,GAGH,OAFAvB,EAAQnR,SAAW+H,EAAUd,KAC7BkK,EAAQwB,YAAcpY,KAAKoY,YACpB5K,EAAUhE,OAAO,SAAUoN,GAEpC,KAAK,GAGH,OAFApJ,EAAUtE,KAAO,GACjBsE,EAAUlE,GAAKkE,EAAS,MAAU,GAC3BA,EAAUhE,OAAO,SAAUqC,QAAQC,OAAO0B,EAAUlE,KAE7D,KAAK,GACL,IAAK,MACH,OAAOkE,EAAUlD,UAGtBiD,EAAUvN,KAAM,CAAC,CAAC,EAAG,UAO1B,OAJA,WACE,OAAOkY,EAAgB/X,MAAMH,KAAME,YAvDhC,IAoEN,CACDmB,IAAK,cACL3E,MAAO,WACL,IAAIwW,GAAe,EAAIrP,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAAS8E,EAASyK,EAAKtB,GACtH,IAAI7E,EAAgCC,EAAWC,EAAOC,EAEtD,OAAOzO,EAAY,QAAYoF,MAAK,SAAmBkF,GACrD,OACE,OAAQA,EAAUhF,KAAOgF,EAAUrH,MACjC,KAAK,EACH,GAAIkQ,EAAI7O,MAAM0B,MAAO,CACnBsE,EAAUrH,KAAO,EACjB,MAGF,OAAOqH,EAAU1E,OAAO,SAAUqC,QAAQC,OAAO,cAEnD,KAAK,EAIH,GAAsB,KAFtBoG,GADAA,EAAOmG,EAAInG,MACCjD,QAEDxR,OAAe,CACxByQ,EAAUrH,KAAO,EACjB,MAGF,OAAOqH,EAAU1E,OAAO,SAAUqC,QAAQC,OAAO,iBAEnD,KAAK,EACU,GAmCboG,EAjCe,SAAsB7U,GAInC,IAHA,IAAIkV,EAAY,GACZC,EAAU,GAEL9T,EAAI,EAAGsI,EAAM,EAAGtI,EAAIrB,EAAII,QAC3BJ,EAAIqB,IAAM,OAERsI,GAAOyL,IACTF,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAhBK,IAmBHsI,GACFuL,EAAUjQ,KAAKkQ,GACfA,EAAU,GACVxL,EAAM,IAENwL,GAAWnV,EAAIqB,GACfsI,GAAO,EACPtI,KAMN,OADA6T,EAAUjQ,KAAKkQ,GACRD,EAGFG,CAAaR,GACpBhE,EAAUhF,KAAO,EACjBiJ,EAAY5M,EAA2B2M,GACvChE,EAAUhF,KAAO,GAEjBiJ,EAAUhM,IAEZ,KAAK,GACH,IAAKiM,EAAQD,EAAUtM,KAAKO,KAAM,CAChC8H,EAAUrH,KAAO,GACjB,MAKF,OAFAwL,EAAID,EAAM1V,MACVwR,EAAUrH,KAAO,GACVkQ,EAAIhU,KAAK,KAElB,KAAK,GAGH,GAFAoH,QAAQC,IAAI,mBAAoB2M,EAAIhI,SAE/BgI,EAAItO,KAAK,IAAIpL,IAAI2M,SAAS,8CAAY,CACzCkE,EAAUrH,KAAO,GACjB,MAIF,OADAqH,EAAUrH,KAAO,GACVkQ,EAAIhU,KAAK,GAAGtE,OAAO4Z,EAAI1F,OAEhC,KAAK,GACH,IAAMoE,EAAItO,KAAK,IAAIpL,IAAI2M,SAAS,kDAAgB+M,EAAItO,KAAK,IAAIpL,IAAI2M,SAAS+M,EAAI7O,MAAM2F,UAAY,CAC9FK,EAAUrH,KAAO,GACjB,MAIF,OADAqH,EAAUrH,KAAO,GACVkQ,EAAIhU,KAAK,GAAGtE,OAAO4T,GAAG5T,OAAOwF,EAAOyH,OAAOyC,QAEpD,KAAK,GAEH,OADAD,EAAUrH,KAAO,GACVkQ,EAAIhU,KAAK,IAAItE,OAAOwF,EAAOyH,OAAOyC,QAE3C,KAAK,GACHhE,QAAQC,IAAI,cAAe2M,EAAIhI,QAC/Bb,EAAUrH,KAAO,GACjB,MAEF,KAAK,GACH,OAAOqH,EAAU1E,OAAO,SAAUqC,QAAQC,OAAO,mBAEnD,KAAK,GAEH,OADAoC,EAAUrH,KAAO,GACVkQ,EAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOyC,QAE1C,KAAK,GACHhE,QAAQC,IAAI,eAAgB2M,EAAIhI,QAElC,KAAK,GACHb,EAAUrH,KAAO,GACjB,MAEF,KAAK,GACHqH,EAAUrH,KAAO,GACjB,MAEF,KAAK,GACHqH,EAAUhF,KAAO,GACjBgF,EAAU5E,GAAK4E,EAAS,MAAU,IAElCiE,EAAUxS,EAAEuO,EAAU5E,IAExB,KAAK,GAKH,OAJA4E,EAAUhF,KAAO,GAEjBiJ,EAAU7L,IAEH4H,EAAU0E,OAAO,IAE1B,KAAK,GACH,OAAO1E,EAAU1E,OAAO,SAAUqC,QAAQgB,QAAQ,oBAEpD,KAAK,GAGH,OAFAqB,EAAUhF,KAAO,GACjBgF,EAAU2E,GAAK3E,EAAS,MAAU,GAC3BA,EAAU1E,OAAO,SAAUqC,QAAQC,OAAOoC,EAAU2E,KAE7D,KAAK,GACL,IAAK,MACH,OAAO3E,EAAU5D,UAGtBsD,EAAU,KAAM,CAAC,CAAC,EAAG,IAAK,CAAC,GAAI,GAAI,GAAI,UAO5C,OAJA,SAAqBW,EAAIC,GACvB,OAAO0E,EAAa/S,MAAMH,KAAME,YA5J7B,MAkKFmW,EAnqBoC,CAoqB3CG,EAAqB7X,oBAEvBlC,EAAQ4Z,0BAA4BA,EACpC,IAAItV,EAAWwV,EACf9Z,EAAO,QAAcsE,G,iCCvyBrB,IAAI1E,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQiE,kBAAe,EAEvB,IAAI9B,EAAmBvC,EAAuBC,EAAQ,KAMtDG,EAAQiE,aAJW,SAASA,KAC1B,EAAI9B,EAAgB,SAAaoB,KAAMU,K,iCCVzC,IAAIrE,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,QAAcA,EAAQ6b,wBAA0B7b,EAAQ8b,MAAQ9b,EAAQ6Z,UAAY7Z,EAAQ+b,WAAQ,EAE3G,IAAI5U,EAAevH,EAAuBC,EAAQ,MAE9CqE,EAAsBtE,EAAuBC,EAAQ,MAErDuH,EAAqBxH,EAAuBC,EAAQ,MAEpDuE,EAA0BxE,EAAuBC,EAAQ,KAEzDuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAElDsC,EAAmBvC,EAAuBC,EAAQ,KAElDsE,EAAgBvE,EAAuBC,EAAQ,KAE/CwE,EAAmBzE,EAAuBC,EAAQ,KAElDka,EAAuBla,EAAQ,KAE/B2H,EAAS3H,EAAQ,KAEjB4H,EAAQ5H,EAAQ,KAEpB,SAAS0C,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAI3b,IA8EIyW,EAUAiC,EAxFAC,EAAqB,WACvB,SAASA,IACP,IAAIxV,EAAO9C,UAAUzC,OAAS,QAAsB8G,IAAjBrE,UAAU,GAAmBA,UAAU,GAAK,IAC/E,EAAItB,EAAgB,SAAaoB,KAAMwY,IACvC,EAAI1X,EAAgB,SAAad,KAAM,OAAQ,KAC/C,EAAIc,EAAgB,SAAad,KAAM,KAAM,IAC7C,EAAIc,EAAgB,SAAad,KAAM,UAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,WAAY,KACnD,EAAIc,EAAgB,SAAad,KAAM,OAAQ,KAC/C,EAAIc,EAAgB,SAAad,KAAM,QAAS,KAChD,EAAIc,EAAgB,SAAad,KAAM,QAAS,KAChD,EAAIc,EAAgB,SAAad,KAAM,QAAS,KAChD,EAAIc,EAAgB,SAAad,KAAM,UAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,WAAW,GAClDA,KAAKgD,KAAOA,EA4Dd,OAzDA,EAAIpC,EAAa,SAAa4X,EAAO,KAAM,CAAC,CAC1CnX,IAAK,WACL3E,MAAO,SAAkB+L,GACvB,IAAIgQ,EAAQ,IAAID,EACZnb,EAAMoL,EAAKpL,IAOf,OANAob,EAAM5B,KAAM,EAAI3S,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACtDwJ,EAAMC,OAA8D,YAArD,EAAIxU,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACzDwJ,EAAMzV,MAAO,EAAIkB,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI4R,OACzDwJ,EAAME,UAAW,EAAIzU,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OAC5DwJ,EAAMG,MAAO,EAAI1U,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OAEhDwJ,EAAMG,MACZ,IAAK,SACHH,EAAMxI,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,IAAI+H,QAAQ,OAAQ,IACtEqT,EAAMI,QAAS,EACf,MAEF,IAAK,KACHJ,EAAMK,SAAU,EAChB,MAEF,IAAK,SACHL,EAAMxI,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI+H,QAAQ,OAAQ,IAC1EqT,EAAMM,OAAQ,EAAI7U,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OACzDwJ,EAAMO,OAAQ,EAAI9U,EAAM/G,aAAa,OAAQE,EAAK,IAAI4R,OACtDwJ,EAAMI,QAAS,EACf,MAEF,IAAK,SACHJ,EAAMxI,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI+H,QAAQ,OAAQ,IAC1EqT,EAAMM,OAAQ,EAAI7U,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OACzDwJ,EAAMO,OAAQ,EAAI9U,EAAM/G,aAAa,OAAQE,EAAK,IAAI4R,OACtD,MAEF,QACE9E,QAAQwM,KAAK,kCAAmClY,OAAOpB,EAAK,MAGhE,OAAOob,IAER,CACDpX,IAAK,gBACL3E,MAAO,SAAuB+L,GAC5B,IAAIgQ,EAAQ,IAAID,EACZnb,EAAMoL,EAAKpL,IAKf,OAJAob,EAAM5B,KAAM,EAAI3S,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GACpDob,EAAMxI,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI+H,QAAQ,OAAQ,IAC1EqT,EAAMO,OAAQ,EAAI9U,EAAM/G,aAAa,OAAQE,EAAK,IAAI4R,OACtDwJ,EAAMI,QAAS,EACRJ,IAER,CACDpX,IAAK,SACL3E,MAAO,SAAgBqa,GACrB,OAAO,IAAIuB,EAAwBvB,OAGhCyB,EA1EgB,GA6EzB/b,EAAQ+b,MAAQA,EAEhB/b,EAAQ6Z,UAAYA,EAEpB,SAAWA,GACTA,EAAS,MAAY,QACrBA,EAAS,OAAa,SACtBA,EAAS,OAAa,SACtBA,EAAS,QAAc,UAJzB,CAKGA,IAAc7Z,EAAQ6Z,UAAYA,EAAY,KAGjD7Z,EAAQ8b,MAAQA,EAEhB,SAAWA,GACTA,EAAK,MAAY,QACjBA,EAAK,SAAe,WACpBA,EAAK,IAAU,MAHjB,CAIGA,IAAU9b,EAAQ8b,MAAQA,EAAQ,KAErC,IAAID,EAAuC,SAAUtB,IACnD,EAAInY,EAAU,SAAayZ,EAAyBtB,GAEpD,IAAI3W,EAASrB,EAAasZ,GAE1B,SAASA,EAAwBvB,GAC/B,IAAI5V,EASJ,OAPA,EAAIvC,EAAgB,SAAaoB,KAAMsY,GACvCnX,EAAQd,EAAOX,KAAKM,OACpB,EAAIc,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,WAAO,IACxF,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,QAASoX,EAAMU,QAChG,EAAInY,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,SAAU,KAC3F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,UAAW,IAC5FA,EAAM4V,IAAMA,EACL5V,EA2VT,OAxVA,EAAIP,EAAa,SAAa0X,EAAyB,CAAC,CACtDjX,IAAK,QACL3E,MAAO,SAAeiW,EAAMsE,GAC1B,OAAQtE,EAAKpJ,eACX,KAAK+M,EAAUiC,MACbvY,KAAKkZ,MAAQjC,EAAU1N,cACvB,MAEF,KAAK+M,EAAU6C,OACbnZ,KAAKoZ,OAASnC,EACd,MAEF,KAAKX,EAAU+C,OACbrZ,KAAKiU,QAAQ3R,KAAK2U,GAClB,MAEF,KAAKX,EAAUgD,QACbtZ,KAAKiU,QAAUgD,EAAUnR,QACzB,MAEF,QACE,MAAM,IAAItH,MAAM,iBAAiBC,OAAOkU,IAI5C,OAAO3S,OAER,CACDqB,IAAK,MACL3E,MAAO,WACL,IAAIqb,GAAO,EAAIlU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASC,IAChG,IAAI0O,EAAO8B,EAAQ7a,EAAG+J,EAAMgQ,EAAOe,EAAUrN,EAAIsN,EAAOC,EAExD,OAAO9V,EAAY,QAAYoF,MAAK,SAAkBC,GACpD,OACE,OAAQA,EAASC,KAAOD,EAASpC,MAC/B,KAAK,EACH,GAAsB,KAAhB7G,KAAKoZ,OAAgB,CACzBnQ,EAASpC,KAAO,EAChB,MAIF,OADAoC,EAASpC,KAAO,EACT7G,KAAK2Z,YAAY3Z,KAAKoZ,QAE/B,KAAK,EACH,OAAOnQ,EAASO,OAAO,SAAUP,EAASyD,MAE5C,KAAK,EACHzD,EAASK,GAAKtJ,KAAKkZ,MACnBjQ,EAASpC,KAAOoC,EAASK,KAAOiP,EAAMU,MAAQ,EAAIhQ,EAASK,KAAOiP,EAAMqB,SAAW,GAAK3Q,EAASK,KAAOiP,EAAMsB,IAAM,GAAK,GACzH,MAEF,KAAK,EAEH,OADA5Q,EAASpC,KAAO,EACT7G,KAAK+W,IAAI+C,mBAAmB9Z,KAAKiU,SAE1C,KAAK,EAEH,OADAwD,EAAQxO,EAASyD,KACVzD,EAASO,OAAO,QAAS,IAElC,KAAK,GAEH,OADAP,EAASpC,KAAO,GACT7G,KAAK+W,IAAIgD,cAAc/Z,KAAKiU,SAErC,KAAK,GAEH,OADAwD,EAAQxO,EAASyD,KACVzD,EAASO,OAAO,QAAS,IAElC,KAAK,GAEH,OADAP,EAASpC,KAAO,GACT7G,KAAK+W,IAAI+C,mBAAmB,EAAE,GAAGrb,QAAO,EAAIkC,EAAmB,SAAaX,KAAKiU,WAE1F,KAAK,GAEH,OADAwD,EAAQxO,EAASyD,KACVzD,EAASO,OAAO,QAAS,IAElC,KAAK,GAGH,GAFA+P,EAAS,IAEJ9B,EAAO,CACVxO,EAASpC,KAAO,GAChB,MAGF,GAAM7G,KAAKkZ,QAAUX,EAAMU,OAAiC,IAAxBjZ,KAAKiU,QAAQxW,OAAe,CAC9DwL,EAASpC,KAAO,GAChB,MAGFnI,EAAI,EAEN,KAAK,GACH,KAAMA,EAAI,IAAK,CACbuK,EAASpC,KAAO,GAChB,MAKF,GAA0B,MAF1B4B,EAAOzI,KAAK+W,IAAItO,KAAK/J,IAEVrB,IAAI4R,OAAgB,CAC7BhG,EAASpC,KAAO,GAChB,MAGF,OAAOoC,EAASO,OAAO,QAAS,IAElC,KAAK,GACHiP,EAAQD,EAAMwB,cAAcvR,GAC5B8Q,EAAOjX,KAAKmW,GAEd,KAAK,GACH/Z,IACAuK,EAASpC,KAAO,GAChB,MAEF,KAAK,GACHoC,EAASpC,KAAO,GAChB,MAEF,KAAK,GACC,EAKJ2S,GAAW,EACXrN,EAAK,EAEP,KAAK,GACH,KAAMA,EAAK,IAAK,CACdlD,EAASpC,KAAO,GAChB,MAKF,GAA2B,MAF3B4S,EAAQzZ,KAAK+W,IAAItO,KAAK0D,IAEV9O,IAAI4R,OAAgB,CAC9BhG,EAASpC,KAAO,GAChB,MAIF,OADA2S,GAAW,EACJvQ,EAASO,OAAO,QAAS,IAElC,KAAK,GAGH,IAFAkQ,EAASlB,EAAMZ,SAAS6B,IAEX5C,KAAO0C,EAAO9b,OAAS,EAAI,CACtCwL,EAASpC,KAAO,GAChB,MAIF,OADA2S,GAAW,EACJvQ,EAASO,OAAO,QAAS,IAElC,KAAK,GACH+P,EAAOjX,KAAKoX,GAEd,KAAK,GACHvN,IACAlD,EAASpC,KAAO,GAChB,MAEF,KAAK,GACH,IAAK2S,EAAU,CACbvQ,EAASpC,KAAO,GAChB,MAGF,OAAOoC,EAASO,OAAO,QAAS,IAElC,KAAK,GAEH,OADAP,EAASpC,KAAO,GACT7G,KAAK+W,IAAIhU,KAAKkB,EAAOyH,OAAOC,QAErC,KAAK,GACH1C,EAASpC,KAAO,GAChB,MAEF,KAAK,GAEH,OADAoC,EAASpC,KAAO,GACT7G,KAAK+W,IAAI7G,aAElB,KAAK,GACH,OAAOjH,EAASO,OAAO,SAAU+P,GAEnC,KAAK,GACL,IAAK,MACH,OAAOtQ,EAASqB,UAGrBvB,EAAS/I,UAOd,OAJA,WACE,OAAO+X,EAAK5X,MAAMH,KAAME,YAvKrB,IA4KN,CACDmB,IAAK,SACL3E,MAAO,WACL,IAAIub,GAAU,EAAIpU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASoC,IACnG,IAAI+G,EACJ,OAAOrO,EAAY,QAAYoF,MAAK,SAAmBwC,GACrD,OACE,OAAQA,EAAUtC,KAAOsC,EAAU3E,MACjC,KAAK,EAEH,OADA2E,EAAU3E,KAAO,EACV7G,KAAKpD,MAEd,KAAK,EAEH,OADAqV,EAAMzG,EAAUkB,KACTlB,EAAUhC,OAAO,SAAUyI,EAAIxU,OAASwU,EAAI,QAAK,GAE1D,KAAK,EACL,IAAK,MACH,OAAOzG,EAAUlB,UAGtBY,EAAUlL,UAOf,OAJA,WACE,OAAOiY,EAAQ9X,MAAMH,KAAME,YAvBxB,IA4BN,CACDmB,IAAK,cACL3E,MAAO,WACL,IAAIud,GAAe,EAAIpW,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASkD,EAASoN,GACjH,IAAIG,EAAQW,EAAaC,EAAKC,EAAK7c,EAAOkL,EAAM6F,EAAW+L,EAAWC,EACtE,OAAO1W,EAAY,QAAYoF,MAAK,SAAmBoD,GACrD,OACE,OAAQA,EAAUlD,KAAOkD,EAAUvF,MACjC,KAAK,EAEH,OADAuF,EAAUvF,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK,IAAItE,OAAO2a,EAAQ,MAE1C,KAAK,EAIH,GAHAG,EAAS,GAGyD,KAFlEW,EAAcla,KAAK+W,IAAItO,KAAK,GAAGpL,KAEbkM,cAAcqB,QAAQwO,EAAO7P,eAAuB,CACpE6C,EAAUvF,KAAO,GACjB,MAQF,IALAsT,EAAM,EAAGC,EAAM,EAGf7c,EAAQ,GAEDA,EAAQ2c,EAAYzc,QAAiC,MAAvByc,EAAY3c,IAC/CA,GAAS,EAGX,KAAOA,EAAQ2c,EAAYzc,QAAiC,MAAvByc,EAAY3c,IAC/CA,GAAS,EAGb,KAAK,EASH,GAHAkL,EAAOzI,KAAK+W,IAAItO,KAAK2R,EAAM,GAGP,MAFpB9L,GAAY,EAAIpK,EAAM/G,aAAa,OAAQsL,EAAKpL,IAAK8c,EAAM5c,EAAOA,GAAO0R,QAEhD,CACvB7C,EAAUvF,KAAO,GACjB,MAGF0S,EAAOjX,KAAK,IAAIkW,EAAMlK,IACtBlC,EAAUvF,KAAO,GACjB,MAEF,KAAK,GACH,OAAOuF,EAAU5C,OAAO,QAAS,IAEnC,KAAK,GAGH,GAAa,KAFb4Q,GAAO,GAEW,CAChBhO,EAAUvF,KAAO,GACjB,MAQF,GAJAuT,EAAM,MADND,GAAO,GAKM,GAAK5c,EAAQ,IAAK,CAC7B6O,EAAUvF,KAAO,GACjB,MAGF,OAAOuF,EAAU5C,OAAO,QAAS,IAEnC,KAAK,GACH4C,EAAUvF,KAAO,EACjB,MAEF,KAAK,GACHuF,EAAUvF,KAAO,GACjB,MAEF,KAAK,GACHwT,EAAYra,KAAK+W,IAAItO,KAAK,GAAGpL,IAGmC,KAFhEid,GAAc,EAAIpW,EAAM/G,aAAa,OAAQkd,EAAW,GAAI,IAAIpL,QAEhD1F,cAAcqB,QAAQwO,EAAO7P,gBAC3CgQ,EAAOjX,KAAK,IAAIkW,EAAM8B,IAG1B,KAAK,GAEH,OADAlO,EAAUvF,KAAO,GACV7G,KAAK+W,IAAIhU,KAAKkB,EAAOyH,OAAOwK,OAErC,KAAK,GACH,OAAO9J,EAAU5C,OAAO,SAAU+P,GAEpC,KAAK,GACL,IAAK,MACH,OAAOnN,EAAU9B,UAGtB0B,EAAUhM,UAOf,OAJA,SAAqBuO,GACnB,OAAO0L,EAAa9Z,MAAMH,KAAME,YAzG7B,MA+GFoY,EA1WkC,CA2WzC9B,EAAqB7X,oBAEvBlC,EAAQ6b,wBAA0BA,EAClC,IAAIvX,EAAWyX,EACf/b,EAAO,QAAcsE,G,iCCrfrB,IAAI1E,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAO,QAAcA,EAAQ8d,uBAAyB9d,EAAQ6Z,UAAY7Z,EAAQ+d,UAAO,EAEzF,IAAI5W,EAAevH,EAAuBC,EAAQ,MAE9CuH,EAAqBxH,EAAuBC,EAAQ,MAEpDuE,EAA0BxE,EAAuBC,EAAQ,KAEzDuC,EAAaxC,EAAuBC,EAAQ,KAE5CwC,EAA8BzC,EAAuBC,EAAQ,KAE7DyC,EAAmB1C,EAAuBC,EAAQ,KAElDsC,EAAmBvC,EAAuBC,EAAQ,KAElDsE,EAAgBvE,EAAuBC,EAAQ,KAE/CwE,EAAmBzE,EAAuBC,EAAQ,KAElDka,EAAuBla,EAAQ,KAE/B2H,EAAS3H,EAAQ,KAEjB4H,EAAQ5H,EAAQ,KAEpB,SAAS0C,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3EC,KAAKC,UAAUC,SAASC,KAAKP,QAAQC,UAAUG,KAAM,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAFzPC,GAA6B,OAAO,WAAc,IAAuDC,EAAnDC,GAAQ,EAAIf,EAAgB,SAAaE,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,EAAIhB,EAAgB,SAAaiB,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,EAAIpB,EAA2B,SAAakB,KAAMH,IAI3b,IAoEIyW,EApEAkE,EAAoB,WAyBtB,SAASA,KACP,EAAI5b,EAAgB,SAAaoB,KAAMwa,IACvC,EAAI1Z,EAAgB,SAAad,KAAM,UAAM,IAC7C,EAAIc,EAAgB,SAAad,KAAM,YAAQ,IAC/C,EAAIc,EAAgB,SAAad,KAAM,iBAAa,IACpD,EAAIc,EAAgB,SAAad,KAAM,cAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,cAAU,IACjD,EAAIc,EAAgB,SAAad,KAAM,aAAS,IAChD,EAAIc,EAAgB,SAAad,KAAM,WAAY,IA+BrD,OA/DA,EAAIY,EAAa,SAAa4Z,EAAM,CAAC,CACnCnZ,IAAK,UACLzE,IAAK,WACH,OAAOoD,KAAKyW,UAEd5R,IAAK,SAAa6R,GAChB1W,KAAKyW,SAAWC,EAAQ5Q,UAEzB,CACDzE,IAAK,OACLzE,IAAK,WACH,OAAOoD,KAAKyW,SAAS/N,KAAI,SAAUgO,GACjC,OAAOA,EAAQrZ,QAOnBwH,IAAK,SAAa7C,GAChBmI,QAAQwM,KAAK,+EAejB,EAAI/V,EAAa,SAAa4Z,EAAM,CAAC,CACnCnZ,IAAK,YACL3E,MAAO,WACL,OAA4B,IAAxBsD,KAAK0W,QAAQjZ,QAKK,kBADL,EAAIyG,EAAM/G,aAAa,OAAQ6C,KAAK0W,QAAQ,GAAGrZ,IAAK,EAAG,GAAG4R,UAG3E,CAAC,CACH5N,IAAK,WACL3E,MAAO,SAAkB+L,GACvB,IAAI+G,EAAO,IAAIgL,EACXnd,EAAMoL,EAAKpL,IAMf,OALAmS,EAAKqH,KAAM,EAAI3S,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACrDO,EAAKM,MAAO,EAAI5L,EAAM/G,aAAa,OAAQE,EAAK,EAAG,GAAG4R,OACtDO,EAAKO,QAAS,EAAI7L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,IAAI4R,OAC1DO,EAAKQ,QAAS,EAAI9L,EAAM/G,aAAa,OAAQE,EAAK,GAAI,GAAG4R,OACzDO,EAAKS,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQE,EAAK,IAAI4R,OAC9CO,IAER,CACDnO,IAAK,SACL3E,MAAO,SAAgBqa,GACrB,OAAO,IAAIwD,EAAuBxD,OAG/ByD,EAhEe,GAmExB/d,EAAQ+d,KAAOA,EAEf/d,EAAQ6Z,UAAYA,EAEpB,SAAWA,GACTA,EAAS,GAAS,KAClBA,EAAS,OAAa,SACtBA,EAAS,MAAY,QAHvB,CAIGA,IAAc7Z,EAAQ6Z,UAAYA,EAAY,KAEjD,IAAIiE,EAAsC,SAAUvD,IAClD,EAAInY,EAAU,SAAa0b,EAAwBvD,GAEnD,IAAI3W,EAASrB,EAAaub,GAE1B,SAASA,EAAuBxD,GAC9B,IAAI5V,EAQJ,OANA,EAAIvC,EAAgB,SAAaoB,KAAMua,GACvCpZ,EAAQd,EAAOX,KAAKM,OACpB,EAAIc,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,WAAO,IACxF,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,SAAU,KAC3F,EAAIL,EAAgB,UAAa,EAAID,EAAuB,SAAaM,GAAQ,KAAM,GACvFA,EAAM4V,IAAMA,EACL5V,EA+LT,OA5LA,EAAIP,EAAa,SAAa2Z,EAAwB,CAAC,CACrDlZ,IAAK,QACL3E,MAAO,SAAeiW,EAAMsE,GAC1B,OAAQtE,GACN,KAAK2D,EAAUa,GACbnX,KAAK6W,IAAMI,EACX,MAEF,KAAKX,EAAUgB,OACbtX,KAAKqX,OAAO/U,KAAK,CACfqQ,KAAM,IACNsE,UAAWA,IAEb,MAEF,KAAKX,EAAUiB,MACbvX,KAAKqX,OAAO/U,KAAK,CACfqQ,KAAM,IACNsE,UAAWA,IAEb,MAEF,QACE,MAAM,IAAIzY,MAAM,iBAAiBC,OAAOkU,IAG5C,OAAO3S,OAER,CACDqB,IAAK,WACL3E,MAAO,WACL,OAAOsD,KAAKqX,OAAO3O,KAAI,SAAUxG,GAC/B,IAAIyQ,EAAOzQ,EAAKyQ,KACZsE,EAAY/U,EAAK+U,UACrB,MAAO,GAAGxY,OAAOkU,GAAMlU,OAAOwY,GAAWxY,OAAOwF,EAAOyH,OAAOyC,UAC7DxF,SAEJ,CACDtH,IAAK,MACL3E,MAAO,WACL,IAAIqb,GAAO,EAAIlU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASC,IAChG,IAAW8N,EAAItH,EAAO7Q,EAAG+J,EAAM+G,EAC/B,OAAO5L,EAAY,QAAYoF,MAAK,SAAkBC,GACpD,OACE,OAAQA,EAASC,KAAOD,EAASpC,MAC/B,KAAK,EAEH,OADAoC,EAASpC,KAAO,EACT7G,KAAK+W,IAAIpH,YAElB,KAAK,EAEH,OADA1G,EAASpC,KAAO,EACT7G,KAAK+W,IAAIhU,KAAK/C,KAAK2X,YAE5B,KAAK,EAGH,GAFQ1O,EAASyD,KAEN,CACTzD,EAASpC,KAAO,EAChB,MAGF,OAAOoC,EAASO,OAAO,SAAU,IAEnC,KAAK,EACH,KAAMxJ,KAAK6W,GAAK,GAAI,CAClB5N,EAASpC,KAAO,GAChB,MAKF,OAFAgQ,EAAK/Y,KAAKC,IAAIiC,KAAK6W,GAAK,EAAG,GAC3B5N,EAASpC,KAAO,GACT7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAOwF,EAAOyH,OAAOkE,KAAKnR,OAAOoY,GAAIpY,OAAOwF,EAAOyH,OAAOyC,QAE9G,KAAK,GACHoB,EAAQ,GACR7Q,EAAI,EAEN,KAAK,GACH,KAAMA,GAAK,IAAK,CACduK,EAASpC,KAAO,GAChB,MAKF,GAA0B,MAF1B4B,EAAOzI,KAAK+W,IAAItO,KAAK/J,IAEVrB,IAAI4R,OAAgB,CAC7BhG,EAASpC,KAAO,GAChB,MAGF,OAAOoC,EAASO,OAAO,QAAS,IAElC,KAAK,GACHgG,EAAOgL,EAAK5C,SAASnP,GACrB8G,EAAMjN,KAAKkN,GAEb,KAAK,GACH9Q,IACAuK,EAASpC,KAAO,GAChB,MAEF,KAAK,GAEH,OADAoC,EAASpC,KAAO,GACT7G,KAAK+W,IAAI7G,aAElB,KAAK,GACH,OAAOjH,EAASO,OAAO,SAAU+F,EAAMY,WAEzC,KAAK,GACL,IAAK,MACH,OAAOlH,EAASqB,UAGrBvB,EAAS/I,UAOd,OAJA,WACE,OAAO+X,EAAK5X,MAAMH,KAAME,YA9ErB,IAmFN,CACDmB,IAAK,SACL3E,MAAO,WACL,IAAIub,GAAU,EAAIpU,EAAkB,SAA2BD,EAAY,QAAYkF,MAAK,SAASoC,IACnG,IAAWsE,EACX,OAAO5L,EAAY,QAAYoF,MAAK,SAAmBwC,GACrD,OACE,OAAQA,EAAUtC,KAAOsC,EAAU3E,MACjC,KAAK,EAEH,OADA2E,EAAU3E,KAAO,EACV7G,KAAK+W,IAAIpH,YAElB,KAAK,EAEH,OADAnE,EAAU3E,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK/C,KAAK2X,YAE5B,KAAK,EAGH,GAFQnM,EAAUkB,KAEP,CACTlB,EAAU3E,KAAO,EACjB,MAGF,OAAO2E,EAAUhC,OAAO,cAAU,GAEpC,KAAK,EAEH,OADAgC,EAAU3E,KAAO,EACV7G,KAAK+W,IAAIhU,KAAK,GAAGtE,OAAOuB,KAAK6W,IAAIpY,OAAOwF,EAAOyH,OAAOyC,OAAO1P,OAAOwF,EAAOyH,OAAOyC,QAE3F,KAAK,EAIH,OAHAqB,EAAO,IAAIgL,GACN3D,GAAK7W,KAAK6W,GACfrL,EAAU3E,KAAO,GACV7G,KAAK+W,IAAItK,aAElB,KAAK,GAUH,OATA+C,EAAKkH,QAAUlL,EAAUkB,KAErB8C,EAAKsI,cACPtI,EAAKO,QAAS,EAAI7L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,EAAG,IAAI4R,OAC1EO,EAAKS,OAAQ,EAAI/L,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,OACrEO,EAAKgB,WAAY,EAAItM,EAAM/G,aAAa,OAAQ6C,KAAK+W,IAAItO,KAAK,GAAGpL,IAAK,GAAG4R,QAG3EzD,EAAU3E,KAAO,GACV7G,KAAK+W,IAAI7G,aAElB,KAAK,GACH,OAAO1E,EAAUhC,OAAO,SAAUgG,GAEpC,KAAK,GACL,IAAK,MACH,OAAOhE,EAAUlB,UAGtBY,EAAUlL,UAOf,OAJA,WACE,OAAOiY,EAAQ9X,MAAMH,KAAME,YA1DxB,MAgEFqa,EA7MiC,CA8MxC/D,EAAqB7X,oBAEvBlC,EAAQ8d,uBAAyBA,EACjC,IAAIxZ,EAAWyZ,EACf/d,EAAO,QAAcsE,G,8NChUf0Z,EAAU,IAAIC,I,EAU0BC,aAR9B,WAAO,IAAD,EACKC,mBAASH,EAAQ7d,IAAI,SAD1B,mBAGlB,MAAO,CACLie,KAJgB,KAIXC,QAJW,S,mBAQRC,E,KAAcC,E,+BCT5B,I,EA4G4CL,aA5G7B,WAEdxQ,QAAQiD,KAAK,gBAFO,MAGNwN,mBAAS,IAAIK,KAApBlE,EAHa,sBAKY6D,mBAAS7D,EAAI7O,OALzB,mBAKbgT,EALa,KAKHC,EALG,KAMdC,ECVQ,SAAiB1e,GAC5B,IAAM2e,EAAMC,mBAIZ,OAHAC,qBAAU,WACRF,EAAIG,QAAU9e,KAET2e,EAAIG,QDKOC,CAAQP,GAE7BnE,EAAIrN,GAAG,WAAW,WAEjByR,EAAY,eAAIpE,EAAI7O,WAGrB6O,EAAIrN,GAAG,cAAc,WAEpByR,EAAY,eAAIpE,EAAI7O,WAGrB6O,EAAIrN,GAAG,mBAAmB,WACzBS,QAAQC,IAAI,mBACZ+Q,EAAY,eAAIpE,EAAI7O,WAGrB,IAAIwT,GAAO,EAGL9R,EAAK,uCAAG,WAAMyO,GAAN,mBAAAsD,EAAA,6DACP9N,EAAWwK,EAAIxK,SACpBC,EAAWuK,EAAIvK,SAFH,SAGGiJ,EAAInN,MAAMiE,EAAUC,GAAU,GAHjC,cAGTmE,EAHS,SAIJkJ,EAAY,eAAKD,EAAN,CAAgBtR,OAAO,KAJ9B,kBAKNqI,GALM,2CAAH,sDASL2J,EAAc,uCAAG,WAAMC,GAAN,2BAAAF,EAAA,0DAClBD,EADkB,yCAId7P,QAAQC,OAAO,iBAJD,UAMtB4P,GAAO,EANe,SAUhBR,EAAStS,QAVO,yCAUSiD,QAAQC,OAAO,eAVxB,UAYA,UAAjB+P,EAAQlJ,KAZS,iCAadoE,EAAI7G,aAbU,cAcpBwL,GAAO,EAda,mBAeb,GAfa,WAkBA,QAAjBG,EAAQlJ,KAlBS,kCAmBdoE,EAAI+E,UAnBU,eAoBpBJ,GAAO,EApBa,mBAqBb,GArBa,WAyBA,UAAjBG,EAAQlJ,KAzBS,qBA0BhBuI,EAAStR,MA1BO,2CA0BO,GA1BP,yBA2BJA,EAAMiS,EAAQxD,KA3BV,eA2BhBpG,EA3BgB,OA4BpByJ,GAAO,EA5Ba,kBA6BbzJ,GA7Ba,WAiCA,WAAjB4J,EAAQlJ,KAjCS,oBAkCfuI,EAAStR,MAlCM,2CAkCQ,GAlCR,eAmChBwH,EAAQyK,EAAQxD,IAnCA,UAoCJjH,EAAMxU,MApCF,eAoChBqV,EApCgB,OAqCpByJ,GAAO,EArCa,kBAsCbzJ,GAtCa,WA0CA,YAAjB4J,EAAQlJ,KA1CS,oBA2CfuI,EAAStR,MA3CM,2CA2CQ,GA3CR,eA4ChBwH,EAAQyK,EAAQxD,IA5CA,UA6CJjH,EAAM2K,SA7CF,eA6ChB9J,EA7CgB,OA8CpByJ,GAAO,EA9Ca,kBA+CbzJ,GA/Ca,WAkDD,oBAAjB4J,EAAQlJ,KAlDU,oBAmDfuI,EAAStR,MAnDM,2CAmDQ,GAnDR,eAoDhBwH,EAAQyK,EAAQxD,IApDA,UAqDJjH,EAAM4K,iBArDF,eAqDhB/J,EArDgB,OAsDpByJ,GAAO,EAtDa,kBAuDbzJ,GAvDa,iEA4DrByJ,GAAO,EA5Dc,kBA6Dd7P,QAAQC,OAAR,OA7Dc,0DAAH,sDAiEpB,MAAO,CACNiL,IAAKA,EACLmE,SAAUA,EACVE,aAAcA,EACdQ,eAAgBA,M,mBAIJK,E,KAAaC,E,OE7F2BvB,aAjBlC,WAAO,IAAD,EACkBC,oBAAS,GAD3B,mBAClBuB,EADkB,KACHC,EADG,OAEoBxB,mBAAS,CACrDyB,SAAS,GACTnK,KAAK,KAJmB,mBAczB,MANa,CACZiK,eAAeA,EACfC,kBAAkBA,EAClBE,gBAXwB,KAYxBC,mBAZwB,S,mBAiBZC,E,KAAkBC,E,iDCG1BC,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLC,eAAgB,SAChBC,WAAY,SACZC,cAAe,UAEhBC,UAAW,CACV1f,MAAO,QACP2f,OAAQN,EAAMO,QAAQ,EAAG,GACzBC,QAAS,OACTJ,cAAe,SACfF,eAAgB,SAChBC,WAAY,UAEbM,aAAc,CACbC,SAAU,OACVC,OAAQ,MACRH,QAAS,OACTN,eAAgB,SAChBC,WAAY,SACZ1O,SAAU,WACVmP,UAAW,OACXC,OAAQb,EAAMa,OAAOC,OAAS,GAE/BC,eAAgB,CACfC,QAAS,OACTN,SAAU,OACVC,OAAQ,OACRH,QAAS,OACTJ,cAAe,UAEhBa,cAAe,GACfC,gBAAiB,CAChBC,UAAW,YAEZC,KAAM,CACLzgB,MAAO,MACPigB,UAAWZ,EAAMO,QAAQ,IAE1Bc,OAAQ,CACPf,OAAQN,EAAMO,QAAQ,EAAG,EAAG,IAE7Be,OAAQ,CACPV,UAAWZ,EAAMO,QAAQ,IAE1BgB,SAAU,CACTV,OAAQb,EAAMa,OAAOC,OAAS,EAC9BU,MAAO,QAERC,OAAQ,CACPC,YAAa,OAEdC,iBAAkB,CACjBhhB,MAAO,aAIM,SAASihB,IACvB,IAAMC,EAAU/B,IADe,EAGL1B,IAAlBH,EAHuB,EAGvBA,KAAMC,EAHiB,EAGjBA,QACR4D,EAAaxC,IAJY,EAKmBO,IAA1CL,EALuB,EAKvBA,kBAAmBG,EALI,EAKJA,mBALI,EAMIoC,cAA3BC,EANuB,EAMvBA,SAAUC,EANa,EAMbA,aAEZC,EAAQ,uCAAG,WAAO9c,EAAMrC,GAAb,eAAAgc,EAAA,6DAChBhc,EAAEof,iBACEC,EAAS,CAAEnR,SAAU7L,EAAK6L,SAAUC,SAAU9L,EAAK8L,UAFvC,SAGKmR,EAAcD,GAHnB,iBAMC,IAAItE,KACZ7V,IAAI,OAAQma,GACpBlE,EAAQkE,IARO,2CAAH,wDAYRC,EAAgBC,sBAAW,uCAChC,WAAMF,GAAN,SAAArD,EAAA,6DAECwD,GAAY,GACZC,GAAqB,GAHtB,SAIiBV,EAAW9C,eAAe,CACzCjJ,KAAM,QACN0F,IAAK2G,IANP,0CAUEK,GAAgB,GAChBD,GAAqB,GAXvB,mBAYS,GAZT,eAeE7C,EAAmB,CAClBF,SAAU,QACVnK,KAAM,qDAEPkK,GAAkB,GAClB+C,GAAY,GACZC,GAAqB,GArBvB,mBAsBS,GAtBT,4CADgC,sDA0BhC,CAACV,IA9C6B,EAmDS9D,oBAAUC,GAnDnB,mBAmDxByE,EAnDwB,KAmDVD,EAnDU,OAoDmBzE,oBAAS,GApD5B,mBAoDxB2E,EApDwB,KAoDLH,EApDK,OAqDCxE,oBAAS,GArDV,mBAqDxB4E,EArDwB,KAqDdL,EArDc,OAsDWvE,oBAAS,GAtDpB,mBAsDxB6E,EAtDwB,KAsDTC,EAtDS,KAiF/B,OAzBAnE,qBAAU,WAAM,4CACf,sBAAAI,EAAA,sEACOsD,EAAcpE,GADrB,4CADe,sBAMf,GAFA1Q,QAAQC,IAAI,YAAasU,EAAWxD,UAEhCL,EAAM,CACT,QAAgCtW,IAA5Bma,EAAWtD,aAA4B,OAE1CsD,EAAWxD,SAAStS,UACnB8V,EAAWtD,aAAaxS,SAEzB8W,GAAiB,GAZH,WAAD,wBAabC,IAEAjB,EAAWtD,aAAaxS,UACvB8V,EAAWxD,SAAStS,UAGrByW,GAAgB,GAChBK,GAAiB,OAGjB,CAAC7E,EAAM6D,EAAWxD,SAAUwD,EAAWtD,aAAc6D,IAGvD,kBAACW,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MAClD0C,GACA,kBAACS,EAAA,EAAD,CAAOD,UAAWtB,EAAQpB,cACzB,kBAAC4C,EAAA,EAAD,CACCF,UAAWtB,EAAQJ,OACnBD,MAAM,cAEP,kBAAC8B,EAAA,EAAD,CAAYC,QAAQ,SACjBzB,EAAW9V,QAET8V,EAAW9U,MAEZ,GADA,qBAFA,uBAON,kBAACwW,EAAA,EAAD,CAAUL,UAAWtB,EAAQN,SAAUkC,KAAMf,GAC5C,kBAACM,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MACnD,kBAACyD,EAAA,EAAD,MACCb,GACA,kBAACO,EAAA,EAAD,CAAOD,UAAWtB,EAAQd,gBACzB,kBAACuC,EAAA,EAAD,CACCC,QAAQ,QACRJ,UAAWtB,EAAQZ,eAFpB,4BAMA,kBAAC0C,EAAA,EAAD,CACCJ,QAAQ,YACR/B,MAAM,YACN2B,UAAWtB,EAAQX,gBACnB0C,QAjEiB,WACvB9B,EAAW3H,IAAI0J,cA4DV,6BAWD/B,EAAWxD,SAAS7Q,SACpB,kBAACqW,EAAA,EAAD,CAAMX,UAAWtB,EAAQF,kBACxB,kBAACoC,EAAA,EAAD,KACC,kBAACT,EAAA,EAAD,CAAYC,QAAQ,KAAKL,UAAU,KAAKc,cAAY,GAApD,wCAGA,kBAACV,EAAA,EAAD,CAAYC,QAAQ,QAAQL,UAAU,KAAtC,mGAEC,kBAACe,EAAA,EAAD,CAAMC,KAAK,6DAAX,4BAGA,0BAAMC,KAAK,MAAMC,aAAW,iBAA5B,gBAEQ,KAET,kBAACd,EAAA,EAAD,CAAYC,QAAQ,QAAQL,UAAU,KAAtC,iHAGC,0BACCiB,KAAK,MACLC,aAAW,sBAFZ,gBAKQ,IART,QAeDtC,EAAWxD,SAAS7Q,SAAWmV,GAChC,kBAACQ,EAAA,EAAD,CAAOD,UAAWtB,EAAQxB,WACzB,kBAACiD,EAAA,EAAD,CACCJ,UAAU,KACVK,QAAQ,KACRJ,UAAWtB,EAAQP,QAHpB,mBAOA,0BACC6B,UAAWtB,EAAQT,KACnBc,SAAUD,EAAaC,IAEvB,kBAACmC,EAAA,EAAD,CACCd,QAAQ,WACRjD,OAAO,SACPgE,UAAQ,EACRC,WAAS,EACTtK,GAAG,WACHuK,MAAM,eACNpe,KAAK,WACLqe,aAAa,WACbC,WAAS,EACTC,SAAU3C,IAEX,kBAACqC,EAAA,EAAD,CACCd,QAAQ,WACRjD,OAAO,SACPgE,UAAQ,EACRC,WAAS,EACTne,KAAK,WACLoe,MAAM,eACNzO,KAAK,WACLkE,GAAG,WACHwK,aAAa,mBACbE,SAAU3C,IAEX,kBAAC4C,EAAA,EAAD,CACCC,QACC,kBAACC,EAAA,EAAD,CACChlB,MAAM,WACN0hB,MAAM,YAGRgD,MAAM,uBAEP,kBAACb,EAAA,EAAD,CACC5N,KAAK,SACLwO,WAAS,EACThB,QAAQ,YACR/B,MAAM,UACN2B,UAAWtB,EAAQR,QALpB,qB,0EChRO,SAAS0D,GAAYC,GACnC,IAAM1P,EAAO0P,EAAM1P,KAEfG,GADauP,EAAMC,SACf3P,GACJ4P,EACH,kBAACC,EAAA,EAAD,CAAcC,MAAO,CAAEC,WAAY,aAAe5P,GAI/C5Q,EAAMyQ,EAAKoD,MACd,mGAGD,GAAI7T,EAAK,CACR,IAAIygB,EACH,uBACCF,MAAO,CAAE5D,MAAO,UAAW+D,WAAY,QACvCrB,KAAMrf,EAAI,GACVkG,OAAO,SACPya,IAAI,uBAEH3gB,EAAI,IAGPqgB,EACC,kBAACC,EAAA,EAAD,CAAcC,MAAO,CAAEC,WAAY,aACjC5P,EAAE1H,UAAU,EAAG0H,EAAEzH,QAAQnJ,EAAI,KAD/B,IACsCygB,EAAW,IAC/C7P,EAAE1H,UAAU0H,EAAEzH,QAAQnJ,EAAI,IAAMA,EAAI,GAAGhE,SAM3C,IACI4kB,EACA5gB,GAA6C,IAFjC,CAAC,OAAQ,OAAQ,QAEdmJ,QAAQnJ,EAAI,GAAGqE,OAAO,MAAWuc,EAAM5gB,EAAI,IAG9D,IAAI6gB,EAAQpQ,EAAKoD,MAAM,6BAKvB,OAHIgN,IAAOD,EAAM,WAAaC,EAAM,GAAK,QAGrCD,EAEF,kBAACE,EAAA,EAAD,CACCC,gBAAgB,EAChBR,MAAO,CACNC,WAAY,MACZ7E,QAAS,OACTJ,cAAe,SACfyF,UAAW,OACXnF,SAAU,OACVoF,SAAU,SACVnF,OAAQ,OACRR,WAAY,eAGZ+E,EACD,kBAAC,IAAD,CACCE,MAAO,CACYW,gBAAiB,OACjBC,WAAW,KAE9BC,WAAY,CACXzF,QAAS,QACSG,OAAQ,OACRuF,IAAI,IACJC,KAAK,IACL1U,SAAS,WACT9Q,MAAO,QAG1BylB,IAAKX,KAMP,kBAACE,EAAA,EAAD,CAAUC,gBAAgB,EAAMR,MAAO,CAAEC,WAAY,QACnDH,GC/EL,IAgDemB,GAhDY,SAAArB,GAC1B,IAAMhF,EAAQsG,cACVC,EAAcvB,EAAMuB,YACxB,OACC,kBAACZ,EAAA,EAAD,CAAUC,gBAAgB,EAAM1J,SAAS,EAAMzX,IAAK8hB,EAAY9hB,KAC9D8hB,EAAYxQ,KACZ,kBAACoP,EAAA,EAAD,CACCC,MAAO,CACNoB,UAAW,KACXhF,MACsB,WAArB+E,EAAYxQ,KACTiK,EAAMyG,QAAQC,MAAMC,KACC,WAArBJ,EAAYxQ,KACZiK,EAAMyG,QAAQG,QAAQD,KACtB3G,EAAMyG,QAAQI,UAAUF,MAE7BC,QAASL,EAAYxQ,OAGtB,GAEAwQ,EAAYpT,OACZ,kBAACgS,EAAA,EAAD,CACCC,MAAO,CAAEoB,UAAW,OACpBI,QAASL,EAAYpT,SAGtB,GAED,kBAACgS,EAAA,EAAD,CAAcC,MAAO,CAAEoB,UAAW,QACjC,kBAACzB,GAAD,CACCzP,KAAMiR,EAAYjR,KAClB7Q,IAAK8hB,EAAY9hB,OAIlB8hB,EAAY3S,UACZ,kBAACuR,EAAA,EAAD,CACCC,MAAO,CAAEoB,UAAW,OACpBI,QAASL,EAAYO,MAAQ,IAC7BD,UAAWN,EAAY3S,YAGxB,KC9CW,SAASmT,GAAmB/B,GAC1C,IAAM1P,EAAO0P,EAAM1P,KACb0R,EAAQhC,EAAMvgB,IACpB,OAAQ,kBAACsgB,GAAD,CAAatgB,IAAKuiB,EAAO/B,SAAU,OAAQ3P,KAAMA,ICD1D,IAAM2R,GAAW,uCAAG,WAAOC,EAAapF,GAApB,uBAAA/C,EAAA,uEAEd/E,EAAU,CACbxJ,KAAM,CACLyJ,GAAI,GACJkN,IAAK,GACLhU,OAAQ,GACRzB,UAAW,GACXkC,UAAW,GACXP,MAAO,GACP+T,GAAI,IAEL3b,MAAO,GACP5C,SAAU,KACV2S,YAAa,OAENhL,KAAKkB,UAAYwV,EAAYxV,UACrCsI,EAAQxJ,KAAKyJ,GAAKiN,EAAYjN,GAC9BD,EAAQxJ,KAAK6C,MAAQ6T,EAAY7T,MACjC2G,EAAQxJ,KAAK2C,OAAS+T,EAAY/T,OAnBhB,SAqBFkU,GAA2BvF,EAAY9H,GArBrC,cAqBd3E,EArBc,OAwBlB2E,EAAQnR,SAAWwM,EAAIxM,SAxBL,UAyBamR,EAAQnR,SAASoB,OAzB9B,eA0BlBqd,GADIA,EAzBc,QA0BsBxnB,OAGpBe,OAAS,GAC5BymB,EAAmB,GAAG7mB,IAAI2M,SAAS,kBAEnC4M,EAAQxJ,KAAK2C,OAASmU,EAAmB,GAAG7mB,IAC1CsN,UAAU,EAAG,IACbsE,OACF2H,EAAQxJ,KAAKoD,UAAY0T,EAAmB,GAAG7mB,IAC7CsN,UAAU,GACVsE,OAEFiV,EAAqBA,EAAmBpe,MAAM,IAvC7B,EA0C2Bqe,GAC5CD,EACA,EACA,GA7CiB,mBA0CjBtN,EAAQvO,MA1CS,KA0CFuO,EAAQwN,kBA1CN,KAgDlBxN,EAAQwB,YAAcnG,EAAImG,YAhDR,kBAiDXxB,GAjDW,2DAmDX/K,QAAQC,OAAR,OAnDW,0DAAH,wDAuDXmY,GAA0B,uCAAG,WAAOvF,EAAY9H,GAAnB,iBAAA+E,EAAA,6DAC9BvK,EAAQsN,EAAW3H,IACrB5H,OAAOkV,WACPC,MAAM,YAAa1N,EAAQxJ,KAAKkB,WAChCgW,MAAM,SAAU1N,EAAQxJ,KAAK2C,QAC7BuU,MAAM,QAAS1N,EAAQxJ,KAAK6C,OAC5BqU,MAAM,KAAM1N,EAAQxJ,KAAKyJ,IAC3B1M,QAAQC,IAAI,IAAKgH,GAPiB,SASlBsN,EAAW9C,eAAe,CACzCjJ,KAAM,kBACN0F,IAAKjH,IAX4B,UAS9Ba,EAT8B,gDAajBpG,QAAQC,OAAO,4BAbE,cAclC3B,QAAQC,IAAI6H,GAdsB,kBAe3BA,GAf2B,2CAAH,wDA0B1BsS,GAAc,uCAAG,WAAO7F,EAAY8F,GAAnB,iBAAA7I,EAAA,sEAGjBvK,EAAQsN,EAAW3H,IACrB5H,OAAOkV,WACPC,MAAM,YAAaE,EAASlW,WAC1BkW,EAAS3N,IAAIzF,EAAMkT,MAAM,KAAME,EAAS3N,IACxC2N,EAASvU,OAAOmB,EAAMkT,MAAM,QAASE,EAASvU,OAC9CuU,EAASzU,QAAQqB,EAAMkT,MAAM,SAAUE,EAASzU,QAChDyU,EAASliB,MAAM8O,EAAMkT,MAAM,OAAQE,EAASliB,MAT3B,SAWLoc,EAAW9C,eAAe,CACzCjJ,KAAM,SACN0F,IAAKjH,IAbe,cAWjBa,EAXiB,yBAedA,GAfc,2DAiBdpG,QAAQC,OAAR,OAjBc,0DAAH,wDAsBdqY,GAAoB,SAAC9b,EAAO+b,EAAmBrZ,GAEpD,IADA,IAAIkH,EAAM,GACDvT,EAAI,EAAGA,EAAI2J,EAAM5K,OAAQiB,IAAK,CACtC,IAAIyH,EAAIkC,EAAM3J,GAAGrB,IAEjB,GAAI8I,EAAEmP,MAAM,wCAA0B,CAErC,IAAI6N,EAAc,CACjBxQ,KAAM,GACN5C,OAAQ,GACRmC,KAAM,GACN1B,UAAW,GACXnP,IAAK0J,GAGNoY,EAAYO,MAAQU,IACpBjB,EAAYxQ,KAAOxM,EAAE,GACrBgd,EAAY3S,UAAYrK,EAAEwE,UAAUxE,EAAE1I,OAAS,IAC/C,IAAIgnB,EAAate,EAAEyE,QAAQ,KAC3BuY,EAAYpT,OAAS5J,EAAEwE,UAAU,EAAG8Z,GACpCtB,EAAYjR,KAAO/L,EAAEwE,UAAU8Z,EAAa,EAAGte,EAAE1I,OAAS,IAC1DwU,EAAI3P,KAAK,kBAAC,GAAD,CAAoBjB,IAAK0J,EAAOoY,YAAaA,UAGtDlR,EAAI3P,KAAKqhB,GAAmB,CAAEzR,KAAM/L,EAAG9E,IAAK0J,KAE7CA,IAED,MAAO,CAACkH,EAAKmS,ICtECM,GAzDG,SAAA9C,GACjB,IAAI+C,EAAO/C,EAAM+C,KACbvX,EAAOwU,EAAMxU,KACbsR,EAAakD,EAAMlD,WACjB9B,EAAQsG,cACR0B,EAAW,uCAAG,WAAMjlB,GAAN,iBAAAgc,EAAA,sEAGd6I,EAAW,CAAElW,UAAWqW,EAAK3hB,MACjCoK,EAAKyX,eAAe,IACpBzX,EAAK0X,oBAAmB,GALN,SAOZpG,EAAW9C,eAAe,CAAEjJ,KAAM,QAPtB,uBASZ+L,EAAW9C,eAAe,CAAEjJ,KAAM,UATtB,wBAUF4R,GAAe7F,EAAY8F,GAVzB,QAUdvS,EAVc,OAYlB7E,EAAKyX,eAAe5S,GACpB7E,EAAK2X,aAAaJ,EAAK3hB,MACvBoK,EAAK4X,SAAS,GACd5X,EAAK6X,YAAY,IAEjB7X,EAAK8X,qBAAqB,IAjBR,kDAmBlB/a,QAAQmZ,MAAR,MAnBkB,0DAAH,sDAuBjB,OACC,kBAACf,EAAA,EAAD,CACC4C,QAAM,EACN3E,QAASoE,EACTvjB,IAAKsjB,EAAK3hB,KACVgf,MAAO,CACNoD,WAAY,QACZC,gBACgB,YAAfV,EAAK5L,MACF6D,EAAMyG,QAAQC,MAAMC,KACL,QAAfoB,EAAK5L,MACL6D,EAAMyG,QAAQI,UAAUF,KACxB3G,EAAMyG,QAAQG,QAAQD,KAC1B+B,gBAAgB,MAChB/H,OAAQ,QAETzE,SAAS,GAET,kBAACiJ,EAAA,EAAD,CACCyB,QAAS,kBAACtD,EAAA,EAAD,CAAYC,QAAQ,SAASwE,EAAK3hB,MAC3CygB,UACC,kBAACvD,EAAA,EAAD,CAAYC,QAAQ,SAASwE,EAAK1U,W,GCb+B0K,aAzC1C,WAAO,IAAD,EACCC,mBAAS,IADV,mBAC1BrH,EAD0B,KACfwR,EADe,OAEH,IAAInK,WAAS,CAC1CxN,KAAM,CACLyJ,GAAI,GACJkN,IAAK,GACLhU,OAAQ,GACRzB,UAAW,GACXkC,UAAW,GACXP,MAAO,IAER5H,MAAM,GACN5C,SAAS,OAZuB,mBAE1BmR,EAF0B,KAEjB2O,EAFiB,OAeK3K,mBAAS,IAfd,mBAe1B4K,EAf0B,KAebX,EAfa,OAgBPjK,mBAAS,GAhBF,mBAgB1B7P,EAhB0B,KAgBnBia,EAhBmB,OAiBiBpK,mBAAS,IAjB1B,mBAiB1B6K,EAjB0B,KAiBPP,EAjBO,OAkBDtK,mBAAS,IAlBR,mBAkB1B4J,EAlB0B,KAkBhBS,EAlBgB,OAmBarK,oBAAS,GAnBtB,mBAsCjC,MAlBa,CACZrH,UAAWA,EACXwR,aAAcA,EACdnO,QAASA,EACT2O,WAAYA,EACZC,YAAaA,EACbX,eAAgBA,EAChB9Z,MAAOA,EACPia,SAAUA,EACVS,kBAAoBA,EACpBP,qBAAuBA,EACvBV,SAAUA,EACVS,YAAcA,EACdS,gBAjCgC,KAkChCZ,mBAlCgC,S,qBAyCpBa,G,MAA0BC,G,MCjCzB,SAASC,GAAajE,GACpC,IAiBMnD,EAjBY9B,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLU,OAAQ,oBACRmF,SAAU,OACVlF,UAAU,OACVT,WAAW,SACXD,eAAe,UAEhBgJ,SAAU,CACTC,SAAU,OACVxoB,MAAO,OAERyoB,KAAM,CACLpI,QAAS,MACTrgB,MAAO,WAGOmf,GACVgC,EAAaxC,IAnBwB,EAoBTtB,mBAAS,IApBA,mBAoBpCqL,EApBoC,KAoBzBC,EApByB,OAqBPtL,mBAAS,MArBF,mBAqBpCuL,EArBoC,KAqBxBC,EArBwB,KAuBrChZ,EAAOwY,KAETS,EAAc/K,iBAAO,IACrBgL,EAAgB1E,EAAM0E,cACtBC,EAAkB3E,EAAM2E,gBACxBC,EAAmB5E,EAAM4E,iBAkG7B,OAhGAjL,qBAAU,WAAM,4CACf,0CAAAI,EAAA,sDACKpC,EAAS,CAAC,MAAO,YACjBkN,EAAQ,GAFb,eAIgBlN,EAJhB,gDAIWmN,EAJX,KAKOtV,EAAQsN,EAAW3H,IAAI5H,OAAOqJ,SAAO8L,MAAM,QAASoC,GAL3D,SAMmBhI,EAAW9C,eAAe,CACzCjJ,KAAM,SACN0F,IAAKjH,IART,OAMOa,EANP,OAUO0U,EAAM1U,EAAIvJ,KAAI,SAACic,EAAM5Z,GACxB,OACC,kBAAC,GAAD,CACC1J,IAAKsjB,EAAK3hB,KACV2hB,KAAMA,EACNvX,KAAMA,EACNsR,WAAYA,OAIf+H,EAAMC,GAAKC,EApBd,mCAsBEP,EAAcK,GACdD,EAAiB,OAvBnB,kDAyBErc,QAAQmZ,MAAR,MAzBF,2DADe,sBA8BX5E,EAAWxD,SAAStR,QACvBO,QAAQC,IAAI,cA/BG,WAAD,wBAgCdwc,MAEC,CAAClI,EAAWxD,SAAStR,QAGxB2R,qBAAU,WACT,IAAMsL,EAAQ,uCAAG,4BAAAlL,EAAA,sDAEhBxR,QAAQC,IAAI,aAAc+b,GAC1Bhc,QAAQC,IAAI,gBAAiBkc,GAC7BK,EAAMR,EAAWG,GACjBnc,QAAQC,IAAI,MAAOuc,GACnBT,EAAaS,GANG,2CAAH,qDASbjI,EAAWxD,SAAStR,OACpBuc,GACAG,EAAc7oB,OAAS,IAEvB0M,QAAQC,IAAI,MACZyc,OAEC,CAACP,EAAeH,EAAYzH,EAAWxD,SAAStR,QAEnD2R,qBAAU,WACT,IAAMsL,EAAQ,uCAAG,gCAAAlL,EAAA,yDAIZ0K,EAAY7K,QAAQ+K,GACvBI,EAAMN,EAAY7K,QAAQ+K,GAE1BnV,EAAQsN,EAAW3H,IACjB5H,OAAOqJ,SACP8L,MAAM,SAAUiC,GAGdI,EAZW,gCAaCjI,EAAW9C,eAAe,CACzCjJ,KAAM,SACN0F,IAAKjH,IAfS,UAaXa,EAbW,iDAiBE,GAjBF,OAmBf0U,EAAM1U,EAAIvJ,KAAI,SAACic,EAAM5Z,GACpB,OACC,kBAAC,GAAD,CACC1J,IAAKsjB,EAAK3hB,KACV2hB,KAAMA,EACNvX,KAAMA,EACNsR,WAAYA,OAIf2H,EAAY7K,QAAQ+K,GAAmBI,EA7BxB,OA+BhBT,EAAaS,GA/BG,4CAAH,qDAiCVjI,EAAWxD,SAAStR,OAAS2c,EAAgB9oB,OAAS,IACzD0M,QAAQC,IAAI,OACZyc,OAEC,CAACN,EAAiB7H,EAAWxD,SAAStR,QAGxC,kBAACgW,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MACnD,kBAAC+C,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQqH,UACD,IAA3BS,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,MAE2B,IAA3BP,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,MAE2B,IAA3BP,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,MAE2B,IAA3BP,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,MAE2B,IAA3BP,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,MAE2B,IAA3BP,EAAgB9oB,QAAqC,IAArBwoB,EAAUxoB,QAC1C,kBAACqpB,EAAA,EAAD,OAGDb,GAAa,kBAACc,EAAA,EAAD,CAAMhH,UAAWtB,EAAQuH,MAAzB,IAAiCC,EAAjC,MACZA,GAAa,I,2ECpJH,SAASe,GAAYpF,GACnC,IAqCMnD,EArCY9B,aAAW,SAAAC,GAAK,MAAK,CACtCkJ,SAAU,CACTC,SAAU,OACVxoB,MAAO,OAERsf,KAAM,CACLU,OAAO,OACPuF,IAAI,EACJC,KAAK,EACL1U,SAAS,WACToP,OAAO,SACPwJ,aAAa,sCACblK,WAAW,SACXD,eAAe,UAEhB3N,OAAQ,CACPiO,QAAS,OACTJ,cAAe,SACfzf,MAAO,QAER2pB,KAAM,CACL9D,UAAW,OAEZ+D,IAAK,CACJpB,SAAU,SACVzI,SAAU,OAEX8J,aAAc,CACbhE,UAAW,OAEZiE,QAAS,CACR9pB,MAAO,OACP6f,QAAS,QAEVkK,UAAW,MAGI5K,GACVgC,EAAaxC,IAvCuB,EAwCAtB,mBAAS,GAxCT,mBAwCnC2M,EAxCmC,KAwCpBC,EAxCoB,OAyCJ5M,oBAAS,GAzCL,mBAyCnC6M,EAzCmC,KAyCtBC,EAzCsB,KA0CtClB,EAAmB5E,EAAM4E,iBACzBmB,EAAqB/F,EAAM+F,mBA4B/B,OAfApM,qBAAU,WACT,IAAI+K,EAAgB,MACpB,OAAQiB,GACP,KAAK,EACJjB,EAAgB,MAChB,MACD,KAAK,EACJA,EAAgB,WAKlBE,EAAiBF,KACf,CAACiB,EAAef,IAGlB,kBAAC5G,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MACnD,kBAAC+C,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQqH,WAC3BpH,EAAWxD,SAAStR,OAAS,kBAACkd,EAAA,EAAD,OAG/BpI,EAAWxD,SAAStR,OACpB,kBAACgW,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQtP,QAC7B,kBAACyQ,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQ4I,SAC7B,kBAACO,GAAA,EAAD,CACCxJ,MAAM,UACN4C,aAAW,eACXjB,UAAWtB,EAAQ2I,aACnB5G,QApCoB,WACzBkH,GAAe,SAAAD,GAAW,OAAKA,OAqC1B,kBAAC,KAAD,OAED,kBAACI,GAAA,EAAD,CACCnrB,MAAO6qB,EACPO,eAAe,UACfC,UAAU,UACVC,SA/Ce,SAACroB,EAAGsoB,GACxBT,EAAiBS,IA+CZlI,UAAWtB,EAAQyI,KACnB/G,QAAQ,cAER,kBAAC+H,GAAA,EAAD,CACCC,SAAO,EACP/G,MAAM,2BACNrB,UAAWtB,EAAQ0I,MAEpB,kBAACe,GAAA,EAAD,CACCC,SAAO,EACP/G,MAAM,2BACNrB,UAAWtB,EAAQ0I,QAItB,kBAACiB,GAAA,EAAD,CAAUC,GAAIZ,GACb,kBAACa,GAAA,EAAD,CACCN,SA3D0B,SAACroB,GAEhCgoB,EAAmBhoB,EAAEgI,OAAOjL,QA0DvB6rB,YAAY,2BACZxI,UAAWtB,EAAQ6I,eCrHX,SAASkB,KACvB,IAWM/J,EAXY9B,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLxO,SAAU,WACV+O,QAAS,OACTqL,YAAY,aAAD,OAAe7L,EAAMyG,QAAQvK,SACxCgE,eAAgB,SAChBC,WAAY,SACZQ,OAAO,OACPmF,SAAU,WAGIhG,GAZmB,EAaO9B,mBAAS,IAbhB,mBAa5B0L,EAb4B,KAabE,EAba,OAcW5L,mBAAS,IAdpB,mBAc5B2L,EAd4B,KAcXoB,EAdW,KAenC,OACC,kBAAC/H,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MACnD,kBAACmK,GAAD,CAAaR,iBAAoBA,EAAkBmB,mBAAoBA,IACvE,kBAAC9B,GAAD,CAAcS,cAAeA,EAAeE,iBAAoBA,EAAkBD,gBAAiBA,K,8HCPvF,SAASmC,GAAY9G,GACnC,IAAMlF,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLtf,MAAO,OACPorB,YAAa,MACbC,aAAc,MACdC,cAAe,OACfjG,WAAW,OACXH,UAAW,QAEZ3J,QAAS,CACRyE,OAAQ,OACRL,OAAQ,GAETvK,KAAM,CACLyQ,UAAW,OAEZlR,KAAM,CACLkR,UAAW,OAEZpF,KAAM,CACLzgB,MAAO,OACP6f,QAAS,QAEV+H,OAAQ,CACPY,SAAU,SACVxI,OAAQ,cACR6F,UAAW,MACXrF,UAAW,UAEZ+K,QAAS,CACR1F,UAAW,KACXrF,UAAW,SACXoE,WAAY,OAEb4G,GAAI,CACHxrB,MAAO,YAIH6P,EAAOwY,KACPhP,EAAUxJ,EAAKwJ,QACfoS,EAAapH,EAAMoH,WAClBvK,EAAU/B,IACXgC,EAAaxC,IA5CuB,EA6CRtB,oBAAS,GA7CD,mBA6CnCqO,EA7CmC,KA6CxBC,EA7CwB,OA8CRvK,cAA1BE,EA9CkC,EA8ClCA,aAAc4C,EA9CoB,EA8CpBA,QAIhB3C,EAAQ,uCAAG,WAAMqK,GAAN,iBAAAxN,EAAA,yDAKI,KADpBzJ,GAFIA,EAAOiX,EAAOjX,MAENjD,QACHxR,OALO,wDAMhByrB,GAAa,GAET7Q,EAAM,CACT1F,KAAMwW,EAAOxW,KACbT,KAAMA,EACNqB,UAAWqD,EAAQxJ,KAAKkB,UACxByV,IAAKnN,EAAQxJ,KAAK2W,KAZH,kBAgBTnN,EAAQwB,YAAYC,EAAIqG,EAAW3H,KAhB1B,OAiBfH,EAAQnR,SAASuF,QACjBoC,EAAKmY,WAAL,eACI3O,EADJ,CAECvO,MAAO,GACP+b,kBAAmB,KAEpB4E,GAAW,GAvBI,yDAyBf7e,QAAQmZ,MAAR,MAzBe,2BA6BhB4F,GAAa,GA7BG,0DAAH,sDAgCd,OACC,kBAACtJ,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,UAAWtB,EAAQ5B,MACnD,0BACCiC,SAAUD,EAAaC,GACvBiB,UAAWtB,EAAQT,KACnBoL,YAAU,EACV/H,aAAa,OAEb,kBAACgI,GAAA,EAAD,CAAatJ,UAAWtB,EAAQ9L,MAC/B,kBAAC2W,GAAA,EAAD,qBAEA,kBAAC,IAAD,CACCC,GACC,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAU/sB,MAAO,KAAjB,UACA,kBAAC+sB,GAAA,EAAD,CAAU/sB,MAAO,KAAjB,UACA,kBAAC+sB,GAAA,EAAD,CAAU/sB,MAAO,KAAjB,WAGFsG,KAAK,OACL0mB,MAAO,CAAExI,SAAU,oBACnBO,QAASA,EACTkI,aAAa,OAIf,kBAACC,GAAA,EAAD,CAAS7J,UAAWtB,EAAQ3F,QAAS+Q,YAAY,aACjD,kBAAC,IAAD,CACC9J,UAAWtB,EAAQvM,KACnBqX,GAAI,kBAACtI,EAAA,EAAD,CAAWG,MAAM,eAAK0I,WAAS,IACnCJ,MAAO,CAAExI,UAAU,GACnBle,KAAK,OACLye,QAASA,EACTkI,aAAa,KAEd,kBAACpJ,EAAA,EAAD,CACCJ,QAAQ,YACR/B,MAAM,UACN2B,UAAWtB,EAAQ0G,OACnB4E,QAAS,kBAAC,KAAD,MACTpX,KAAK,UALN,gBASA,kBAACiN,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQqK,SAC5BG,GAAa,kBAAChJ,EAAA,EAAD,CAAkB+J,KAAM,Y,wBCjIvC,GAAgB,SAASC,EAAGvD,GAI5B,OAHA,GAAgBnqB,OAAO2tB,gBAClB,CAAEC,UAAW,cAAgB3pB,OAAS,SAAUypB,EAAGvD,GAAKuD,EAAEE,UAAYzD,IACvE,SAAUuD,EAAGvD,GAAK,IAAK,IAAI0D,KAAK1D,EAAOA,EAAE2D,eAAeD,KAAIH,EAAEG,GAAK1D,EAAE0D,MACpDH,EAAGvD,IASrB,IAAI,GAAW,WAQlB,OAPA,GAAWnqB,OAAOiM,QAAU,SAAkB6J,GAC1C,IAAK,IAAIlM,EAAGzH,EAAI,EAAGmH,EAAI3F,UAAUzC,OAAQiB,EAAImH,EAAGnH,IAE5C,IAAK,IAAI0rB,KADTjkB,EAAIjG,UAAUxB,GACOnC,OAAOiD,UAAU6qB,eAAe3qB,KAAKyG,EAAGikB,KAAI/X,EAAE+X,GAAKjkB,EAAEikB,IAE9E,OAAO/X,IAEKlS,MAAMH,KAAME,Y,o4ECnBhC,SAAmBoqB,EAAOC,EAAYC,EAAUC,GAM9C,IAAIC,EACAC,GAAY,EAEZC,EAAW,EAEf,SAASC,IACHH,GACFroB,aAAaqoB,GAuBjB,SAASI,IACP,IAAIC,EAAO/qB,KACPgrB,EAAUzrB,KAAK0rB,MAAQL,EACvBrqB,EAAOL,UAOX,SAASgF,IACP0lB,EAAWrrB,KAAK0rB,MAChBT,EAASrqB,MAAM4qB,EAAMxqB,GAQvB,SAAS2qB,IACPR,OAAYnmB,EAhBVomB,IAmBAF,IAAiBC,GAKnBxlB,IAGF2lB,SAEqBtmB,IAAjBkmB,GAA8BO,EAAUV,EAK1CplB,KACwB,IAAfqlB,IAYTG,EAAYloB,WAAWioB,EAAeS,EAAQhmB,OAAuBX,IAAjBkmB,EAA6BH,EAAQU,EAAUV,KAMvG,MAtE0B,mBAAfC,IACTE,EAAeD,EACfA,EAAWD,EACXA,OAAahmB,GAiEfumB,EAAQK,OA1ER,WACEN,IACAF,GAAY,GA0EPG,E,wHDzFF,SAAmBb,EAAGvD,GAEzB,SAAS0E,IAAOprB,KAAKC,YAAcgqB,EADnC,GAAcA,EAAGvD,GAEjBuD,EAAEzqB,UAAkB,OAANknB,EAAanqB,OAAO0I,OAAOyhB,IAAM0E,EAAG5rB,UAAYknB,EAAElnB,UAAW,IAAI4rB,G,iqHEZpE,SAASC,GAAezJ,GACtC,IAAMlF,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLE,WAAY,SACZQ,OAAQ,OACRmF,SAAU,QAEXoD,SAAU,CACTC,SAAU,OACVxoB,MAAO,OAERulB,IAAK,CACJvF,OAAQ,OACR0J,aAAc,gCACdzJ,UAAW,OACX8N,SAAU,SACV3C,YAAa,OAEd4C,OAAQ,CACPhuB,MAAO,MACPulB,IAAK,EACLzU,SAAU,WACVoP,OAAQ,MAETrQ,KAAM,GACNoe,UAAW,CACVzN,UAAW,SACXqF,UAAW,OACXqI,SAAU,IACVC,WAAY,KAGbtT,YAAa,CACZ/J,SAAU,WACVsd,OAAQ,EACRhJ,gBAAiB/F,EAAMyG,QAAQuI,WAAWC,OAE3C9b,OAAQ,CACPgO,UAAW,UAGZ+N,aAAc,CACbjD,cAAe,QAEhBkD,UAAW,CACVrJ,SAAU,UACVE,WAAY,EACZrlB,MAAO,OACPorB,YAAa,MACbC,aAAc,WAIVxb,EAAOwY,KACPhP,EAAUxJ,EAAKwJ,QACf6H,EAAU/B,IACVgC,EAAaxC,IAEbb,EAAM2Q,IAAMC,YA1D2B,EA2DfrR,oBAAS,GA3DM,mBA2DtCsR,EA3DsC,KA2D7BlD,EA3D6B,KA6D7CzN,qBAAU,WACU,IAAfnO,EAAKrC,MACRsQ,EAAIG,QAAQ2Q,UAAY,GAIxBhiB,QAAQC,IAAI,gBACZ4e,GAAW,MAEV,CAAC5b,EAAKrC,QAET,IAAMqhB,EAAc,uCAAG,kCAAAzQ,EAAA,6DAItBxR,QAAQC,IAAI,YAJU,SAOrBiiB,YAAYvjB,KAAK,mBAPI,SAQL8N,EAAQnR,SAASoB,OARZ,UAQjBoL,EARiB,OASrBoa,YAAYvjB,KAAK,4BACjBqB,QAAQC,IAAI,MAAO6H,IAEfA,EAAI7L,KAZa,wBAapB4iB,GAAW,GAbS,2BAiBrB/W,EAAMA,EAAIvV,MAEV2vB,YAAYvjB,KAAK,cACbwjB,EAASnI,GACZlS,EACA2E,EAAQwN,kBACRxN,EAAQvO,MAAM5K,QAEf4uB,YAAYvjB,KAAK,uBACbyjB,EA1BiB,uBA0BF3V,EAAQvO,OA1BN,aA0BgBikB,EAAO,KACxCE,EAAuBF,EAAO,GAClCniB,QAAQC,IAAI,UAAWwM,GACvBzM,QAAQC,IAAI,WAAYmiB,GACxBpiB,QAAQC,IAAI,uBAAwBoiB,GACpCH,YAAYvjB,KAAK,cACjBsE,EAAKmY,WAAL,eACI3O,EADJ,CAECvO,MAAOkkB,EACPnI,kBAAmBoI,KAEpBH,YAAYvjB,KAAK,uBACjBujB,YAAYI,QACX,WACA,kBACA,4BAEDJ,YAAYI,QACX,aACA,aACA,uBAEDJ,YAAYI,QACX,aACA,aACA,uBAEDJ,YAAYK,iBAAiB,WAAW7kB,SAAQ,SAAAlI,GAC/CwK,QAAQC,IAAIzK,MAGb0sB,YAAYM,aACZN,YAAYO,gBACZ5D,GAAW,GA3DU,kDA6DrB7e,QAAQmZ,MAAR,MA7DqB,0DAAH,qDAiEpB,OACC,kBAAC1D,EAAA,EAAD,CACCC,WAAS,EACTxE,IAAKA,EACLyE,UAAU,OACVjJ,GAAG,iBACHkJ,UAAWtB,EAAQ5B,MAEnB,kBAACyD,EAAA,EAAD,MACClT,EAAKrC,MACL,kBAAC6c,GAAA,EAAD,CACCpH,QAAO,sBAAE,sBAAA7E,EAAA,sEAEF+C,EAAW9C,eAAe,CAAEjJ,KAAM,QAFhC,uBAIF+L,EAAW9C,eAAe,CAAEjJ,KAAM,UAJhC,OAKRqW,GAAW,GACX5b,EAAK4X,SACJ5X,EAAKqY,kBAAkBhoB,OAAS,EAAI,EAAI,GAPjC,2CAUTsiB,UAAWtB,EAAQ8M,QAEnB,kBAAC,KAAD,OAGD,GAED,kBAAC3L,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAWtB,EAAQqE,KAClC,kBAAClD,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAWtB,EAAQrR,MAClC,kBAAC8S,EAAA,EAAD,CAAYH,UAAWtB,EAAQ1O,OAAQoQ,QAAS,SAC9CvJ,EAAQxJ,KAAK2C,QAGf,kBAACmQ,EAAA,EAAD,CAAYC,QAAS,KAAMJ,UAAWtB,EAAQ+M,WAC5C5U,EAAQxJ,KAAK6C,OAGf,kBAACiQ,EAAA,EAAD,CAAYH,UAAWtB,EAAQlL,UAAW4M,QAAS,SACjDvJ,EAAQxJ,KAAKkB,WAEf,kBAAC4R,EAAA,EAAD,CAAYH,UAAWtB,EAAQjO,UAAW2P,QAAS,SAAnD,SACGvJ,EAAQxJ,KAAKoD,aAIlB,kBAAC,GAAD,CACCuP,UAAWtB,EAAQsN,UACnBc,iBAAiB,iBACjBC,WAAYlW,EAAQvO,MAAM5K,OAC1BoJ,KAAMulB,EACNF,QAASA,EACTa,OACC,kBAAC9M,EAAA,EAAD,CACC7B,MAAM,YACN4L,KAAM,GACNjK,UAAWtB,EAAQuO,WAIpBpW,EAAQvO,OAEV,kBAACuX,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAWtB,EAAQqN,eAEnC,kBAAClM,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAWtB,EAAQrG,aAClC,kBAACsQ,GAAD,CAAaM,WAAYA,M,cCvNvBiE,GAAY,uCAAG,WAAOzI,EAASpX,EAAKsR,GAArB,eAAA/C,EAAA,6DAGjBvO,EAAK6X,YAAYT,GAHA,kBAKGD,GAAe7F,EAAY8F,GAL9B,UAKTvS,EALS,OAMb9H,QAAQC,IAAI6H,KACRA,EAAIxU,OAAS,GAPJ,iBAQT2P,EAAK8X,qBAAqBjT,GAC1B7E,EAAK4X,SAAS,GATL,+BAWT5X,EAAK6X,YAAY,IAXR,mBAYF,GAZE,mFAeNpZ,QAAQC,OAAR,OAfM,0DAAH,0DCUH,SAASohB,GAAYtL,GACnC,IAAI+C,EAAO/C,EAAM+C,KACbvX,EAAOwU,EAAMxU,KACbsR,EAAakD,EAAMlD,WAHmB,EAIN9D,mBAAS,CAC5CuS,OAAQ,KACRC,OAAQ,OANiC,mBAInCC,EAJmC,KAIvBC,EAJuB,OAQM1S,oBAAS,GARf,mBAQnC2S,EARmC,KAQjBC,EARiB,KAcpCC,EAAe,uCAAG,WAAM9tB,GAAN,eAAAgc,EAAA,yDACvBhc,EAAEof,kBACEwO,EAFmB,uBAGtBC,GAAoB,GAHE,6BAMN,IAAb7tB,EAAEwlB,OANiB,qBAQlBR,EAAK1U,MAAMyd,WAAW,0CARJ,qDASlB/I,EAAK5U,OAAO2d,WAAW,KATL,wDAUtBvjB,QAAQC,IAAI,sBAAuBgD,EAAMuX,EAAMjG,GAVzB,UAiBrB2N,YAAYvjB,KAAK,eAjBI,UAkBL+a,GAAYc,EAAMjG,GAlBb,QAkBrB9H,EAlBqB,OAmBrBzM,QAAQC,IAAI,UAAWwM,GACvByV,YAAYvjB,KAAK,cACjBsE,EAAK4X,SAAS,GACd5X,EAAKmY,WAAW3O,GAChByV,YAAYI,QAAQ,cAAe,eACnCJ,YAAYI,QAAQ,aAAc,cAClCJ,YAAYK,iBAAiB,WAAW7kB,SAAQ,SAAAlI,GAC/CwK,QAAQC,IAAIzK,MAEb0sB,YAAYM,aACZN,YAAYO,gBA7BS,mDA+BrBziB,QAAQmZ,MAAR,MA/BqB,2DAAH,sDAmCfqK,EAAkB,WACvBL,EAAc,CACbH,OAAQ,KACRC,OAAQ,QAGJQ,EAAiB,uCAAG,WAAMC,GAAN,eAAAlS,EAAA,6DACnB6I,EADmB,aACNvU,MAAO,GAAIF,OAAQ,GAAIzN,KAAM,IAAOurB,GAD9B,kBAGlBZ,GAAazI,EAAUpX,EAAMsR,GAHX,OAIxBiP,IAJwB,gDAMxBxjB,QAAQmZ,MAAR,MANwB,yDAAH,sDASvB,OACC,kBAACf,EAAA,EAAD,CACC/B,QAASiN,EACTK,cA1DuB,SAAAnuB,GACxBA,EAAEof,iBACFuO,EAAc,CAAEH,OAAQxtB,EAAEouB,QAAU,EAAGX,OAAQztB,EAAEquB,QAAU,IAC3DR,GAAoB,IAwDnBrI,QAAM,EACN9jB,IAAKsjB,EAAK9N,GACViC,SAAS,EACTkJ,MAAO,CAAEzE,OAAQ,SAEjB,kBAAC0Q,GAAA,EAAD,CACCpX,GAAG,cACHqX,aAAW,EACXC,QAASR,EACTS,gBAAgB,iBAChBC,eACuB,OAAtBhB,EAAWD,QAAyC,OAAtBC,EAAWF,OACtC,CACArK,IAAKuK,EAAWD,OAChBrK,KAAMsK,EAAWF,aAEjB5oB,EAEJ8b,KAA4B,OAAtBgN,EAAWD,QAEjB,kBAAC3D,GAAA,EAAD,CACCjJ,QAAS,SAAA7gB,GAAC,OACTiuB,EAAkB,CACjBtf,UAAWqW,EAAKrW,UAChB2B,MAAO0U,EAAK1U,UAJf,8CAUA,kBAACwZ,GAAA,EAAD,CACCjJ,QAAS,SAAA7gB,GAAC,OACTiuB,EAAkB,CACjBtf,UAAWqW,EAAKrW,UAChByB,OAAQ4U,EAAK5U,WAJhB,6BAYD,kBAACwS,EAAA,EAAD,CACCP,MAAO,CAAEoB,UAAW,MAAOqI,SAAU,IAAKC,WAAY,MAEtD,kBAAC3J,EAAA,EAAD,CACCyB,QACC,kBAACtD,EAAA,EAAD,CACCC,QAAQ,KACR/B,MACC1T,OAAOia,EAAKriB,MAAQ,GACjB,QACAoI,OAAOia,EAAKriB,MAAQ,GACpB,YACAoI,OAAOia,EAAKriB,MAAQ,EACpB,UACA,SAGHqiB,EAAKriB,QAIQ,OAAhBqiB,EAAK3U,QACL,kBAAC+R,EAAA,EAAD,CACCyB,QACC,kBAACtD,EAAA,EAAD,CAAYC,QAAQ,QAAQ/B,MAAM,iBAAlC,OAID4D,MAAO,CAAEsM,UAAW,YAKvB,kBAACvM,EAAA,EAAD,CACCyB,QAAS,kBAACtD,EAAA,EAAD,CAAYC,QAAQ,SAASwE,EAAK1U,OAC3CwT,UACC,kBAACvD,EAAA,EAAD,CAAYC,QAAQ,SAASwE,EAAK5U,QAEnCiS,MAAO,CAAEoB,UAAW,MAAOqI,SAAU,IAAKC,WAAY,OAEvD,kBAAC3J,EAAA,EAAD,CACCyB,QAAS,kBAACtD,EAAA,EAAD,CAAYC,QAAQ,SAASwE,EAAK7U,MAC3C2T,UACC,kBAACvD,EAAA,EAAD,CAAYC,QAAQ,SAApB,MAAgCwE,EAAK9N,O,uDC1I3B,SAAS0X,GAAc3M,GACrC,IAuEMnD,EAvEY9B,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CACLE,WAAY,SACZD,eAAgB,SAChB4F,SAAU,OACVnF,OAAQ,QAETuI,SAAU,CACTC,SAAU,OACVxoB,MAAO,MACP6f,QAAS,OACTJ,cAAe,SACfF,eAAgB,UAEjB1P,KAAM,CACLiB,SAAU,WACVmgB,MAAO,IACP7L,gBAAiB,mBAElB8L,UAAW,CACVpgB,SAAU,WACVmgB,MAAO,MACP7C,OAAQ,MACRlO,OAAQ,QAETU,SAAU,CACTV,OAAQb,EAAMa,OAAOC,OAAS,GAE/BmO,MAAO,CACN7O,cAAe,UAEhBgB,KAAM,CACLzgB,MAAO,OACP2f,OAAQ,OACRE,QAAS,OACTJ,cAAe,SACfF,eAAgB,SAChBC,WAAY,UAEboI,OAAQ,CACPpH,UAAW,WACXP,UAAW,QAEZvN,MAAO,CACN8N,UAAW,aACXxgB,MAAO,MACP2f,OAAQ,QAETnN,OAAQ,CACPgO,UAAW,aACXxgB,MAAO,MACP2f,OAAQ,QAET5a,KAAM,CACLyb,UAAW,aACXxgB,MAAO,MACP2f,OAAQ,QAETwR,UAAW,CACVrgB,SAAU,WACV6O,OAAQ,QAETyR,QAAS,CACRL,UAAW,SACXpR,OAAQ,QAET8I,KAAM,CACLzoB,MAAO,WAIOmf,GACVtP,EAAOwY,KACPlH,EAAaxC,IA1EyB,EA2EkBtB,oBAC7D,GA5E2C,mBA2ErCgU,EA3EqC,KA2EZC,EA3EY,OA+EJjU,mBAAS,IA/EL,mBA+ErCkU,EA/EqC,KA+EvBC,EA/EuB,OAiFMtS,IAA1CL,EAjFoC,EAiFpCA,kBAAmBG,EAjFiB,EAiFjBA,mBAE3BhB,qBAAU,WACT,GAAInO,EAAKoY,YAAY/nB,OAAS,EAAG,CAEhC,IAAIwU,EAAM7E,EAAKoY,YAAY9c,KAAI,SAAAic,GAC9B,OACC,kBAACuI,GAAD,CACCvI,KAAMA,EACNvX,KAAMA,EACNsR,WAAYA,OAIfqQ,EAAgB9c,MAEf,CAAC7E,IAEJ,IAAM4hB,EAAmB,WACxBH,GACC,SAAAD,GAAuB,OAAKA,MArGc,EAwGFjQ,cAAlCE,EAxGoC,EAwGpCA,aAAc4C,EAxGsB,EAwGtBA,QAASwN,EAxGa,EAwGbA,OAEzBC,EAAc,uCAAG,WAAM/F,GAAN,SAAAxN,EAAA,gFAGbsR,GAAa,eACd9D,EADa,CACL7a,UAAWlB,EAAKmG,YAC7BnG,EACAsR,GANmB,kCASpBtC,GAAkB,GAClBG,EAAmB,CAClBF,SAAU,QACVnK,KAAM,+CAZa,sBAepB8c,IAfoB,yDAkBrB7kB,QAAQmZ,MAAR,MAlBqB,0DAAH,sDAgDpB,OACC,kBAAC1D,EAAA,EAAD,CACCC,WAAS,EACTC,UAAU,OACVC,UAAWtB,EAAQ5B,KACnBhG,GAAG,iBAEH,kBAACsY,GAAA,EAAD,CAAOC,UAAU,OAAO/G,GAAgC,IAA5Bjb,EAAKoY,YAAY/nB,QACf,IAA5B2P,EAAKoY,YAAY/nB,OACjB,kBAACmiB,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQqH,UAC7B,kBAACgB,EAAA,EAAD,MACA,kBAACA,EAAA,EAAD,MACA,kBAACA,EAAA,EAAD,MACA,kBAACA,EAAA,EAAD,MACA,kBAACA,EAAA,EAAD,OAGD,+BAIF,kBAACqI,GAAA,EAAD,CACCC,UAAU,KACV/G,GAAIjb,EAAKoY,YAAY/nB,OAAS,EAC9BsiB,UAAWtB,EAAQuH,MAElB5Y,EAAKoY,YAAY/nB,OAAS,EAC1B,kBAACmiB,EAAA,EAAD,CAAMC,WAAS,EAACE,UAAWtB,EAAQuH,MAClC,kBAAC5F,EAAA,EAAD,CACCL,UAAWtB,EAAQN,SACnBkC,KAAMuO,EACNS,WAAW,GAEX,kBAACC,GAAA,EAAD,CACCC,aACCX,GAA0B,UAE3BY,YAAaR,GAEb,kBAAChP,EAAA,EAAD,CAAOyP,UAAW,EAAG1P,UAAWtB,EAAQoN,OACvC,kBAACjE,GAAA,EAAD,CACC7H,UAAWtB,EAAQiQ,UACnBlO,QAASwO,GAET,kBAAC,KAAD,OAGD,kBAAC9O,EAAA,EAAD,CAAYH,UAAWtB,EAAQkQ,SAA/B,4BAIA,kBAAC/E,GAAA,EAAD,CACC7J,UAAWtB,EAAQ3F,QACnB+Q,YAAY,eAEb,0BACC/K,SAAUD,EAAaqQ,GACvBnP,UAAWtB,EAAQT,KACnBoL,YAAU,EACV/H,aAAa,OAEb,kBAAC,IAAD,CACCtB,UAAWtB,EAAQxO,MACnBsZ,GAAI,kBAACtI,EAAA,EAAD,CAAWG,MAAM,iBACrBpe,KAAK,QACLye,QAASA,EACTkI,aAAa,KAGd,kBAAC,IAAD,CACC5J,UAAWtB,EAAQ1O,OACnBwZ,GAAI,kBAACtI,EAAA,EAAD,CAAWG,MAAM,iBACrBpe,KAAK,SACLye,QAASA,EACTkI,aAAa,KAGd,kBAAC,IAAD,CACC5J,UAAWtB,EAAQnc,KACnBinB,GACC,kBAACtI,EAAA,EAAD,CACCG,MAAM,yCACNsO,WACCT,EAAOxxB,OAAS,EACb,iCACA,GAEJ6lB,MAAO2L,EAAOxxB,OAAS,IAGzBisB,MAAO,CACNiG,QAAS,CACRjzB,MAAO,gBAGTsG,KAAK,OACLye,QAASA,EACTkI,aAAa,KAGd,kBAACpJ,EAAA,EAAD,CACCJ,QAAQ,YACR/B,MAAM,UACN2B,UAAWtB,EAAQ0G,OACnBxS,KAAK,UAJN,oBAaJ,kBAACiN,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQrR,MAA9B,qBACKA,EAAKmG,WAGV,kBAACqc,GAAA,EAAD,CAAKxR,MAAM,YAAY2B,UAAWtB,EAAQgQ,WACzC,kBAAC,KAAD,CAAYjO,QAASwO,KAGtB,kBAAC,GAAD,CACChN,MAAO,CAAEU,SAAU,WACnBmK,iBAAiB,gBACjBC,WAAYgC,EAAarxB,OACzBoJ,KAvJiB,WAEtB,GAAgC,IAA5BuG,EAAKoY,YAAY/nB,OAArB,CAGA,IAAI6R,EAASlC,EAAKoY,YAAYpY,EAAKoY,YAAY/nB,OAAS,GAAGoZ,GACvDzF,EAAQsN,EAAW3H,IACrB5H,OAAOoH,WACP+N,MAAM,YAAalX,EAAKmG,WACxB+Q,MAAM,KAAMhV,GACdoP,EAAW9C,eAAe,CACzBjJ,KAAM,SACN0F,IAAKjH,IACHye,MAAK,SAAA5d,GAEP,IAAKA,EAAK,OAAO,EAEjB,IAAI6d,EAAc7d,EAAI7T,QAAO,SAAC2xB,EAAKpL,GAIlC,OAHIA,EAAK9N,GAAKvH,GACbygB,EAAIztB,KAAKqiB,GAEHoL,IACL,IACH3iB,EAAKyX,eAAL,uBAAwBzX,EAAKoY,aAA7B,aAA6CsK,UAiIzC5D,SAAS,EACTa,OACC,kBAAC9M,EAAA,EAAD,CACC7B,MAAM,YACN4L,KAAM,GACNjK,UAAWtB,EAAQuO,WAIpB8B,IAIH,gCChTU,SAASkB,GAAcpO,GACrC,IA2BMnD,EA3BY9B,aAAW,SAAAC,GAAK,MAAK,CACtCC,KAAM,CAEL6F,SAAU,OACVnF,OAAQ,QAETuI,SAAU,CACTC,SAAU,OACVxoB,MAAO,OAER6P,KAAM,CACLmQ,OAAQ,cACRoF,gBAAiB,mBAElB4I,OAAQ,CACPhuB,MAAO,MACPkgB,OAAQ,MAETwS,WAAY,CACXnN,IAAK,IACL1F,QAAS,OACT7f,MAAO,OACP8Q,SAAU,WACVyO,eAAgB,oBAIFJ,GACVtP,EAAOwY,KACPlH,EAAaxC,IA9ByB,EAgCJtB,mBAAS,IAhCL,mBAgCrCkU,EAhCqC,KAgCvBC,EAhCuB,KA0C5CxT,qBAAU,WAET,GAAInO,EAAKqY,kBAAkBhoB,OAAS,EAAG,CAEtC,IAAIwU,EAAM7E,EAAKqY,kBAAkB/c,KAAI,SAAAic,GACpC,OAAO,kBAACuI,GAAD,CACNvI,KAAMA,EACNvX,KAAMA,EACNsR,WAAYA,OAIdqQ,EAAgB9c,MAGf,CAAC7E,EAAKqY,oBAET,IAAM2G,EAAc,uCAAG,kCAAAzQ,EAAA,6DAGlBuU,EAAO9iB,EAAKqY,kBAAkBrY,EAAKqY,kBAAkBhoB,OAAS,GAAGoZ,IAIjE2N,EAAWpX,EAAKoX,UACX3N,GAAKqZ,EARQ,kBAUL3L,GAAe7F,EAAY8F,GAVtB,OAUjBvS,EAViB,OAcjB6d,EAAc7d,EAAI7T,QAAO,SAAC2xB,EAAKpL,GAIlC,OAHIA,EAAK9N,GAAKqZ,GACbH,EAAIztB,KAAKqiB,GAEHoL,IACL,IACH3iB,EAAK8X,qBAAL,uBACI9X,EAAKqY,mBADT,aAEIqK,KAtBiB,kDAyBrB3lB,QAAQmZ,MAAR,MAzBqB,0DAAH,qDA6BpB,OAAmB,IAAflW,EAAKrC,MAAoB,KAG3B,kBAAC6U,EAAA,EAAD,CACCC,WAAS,EACTC,UAAU,OACVC,UAAWtB,EAAQ5B,KACnBhG,GAAG,kBAEH,kBAACyJ,EAAA,EAAD,MACA,kBAACV,EAAA,EAAD,CAAMG,UAAWtB,EAAQwR,WAAYtL,MAAI,GACxC,kBAACiD,GAAA,EAAD,CACCpH,QAAO,uCAAE,WAAO7gB,GAAP,mBAAAgc,EAAA,6DAEJ9I,EAAKwZ,YAAYpB,MAFb,SAGFvM,EAAW9C,eAAe,CAAEjJ,KAAM,UAHhC,OAIJwd,EAAK9D,YAAYpB,MACrB9gB,QAAQC,IAAI,cAAc+lB,EAAGtd,GAC7BzF,EAAK4X,SAAS,GACO5X,EAAK8X,qBAAqB,IAC/C9X,EAAK6X,YAAY,IACbmL,EAAK/D,YAAYpB,MACrB9gB,QAAQC,IAAI,mBAAmBgmB,EAAGD,GAV1B,4CAAF,sDAYPpQ,UAAWtB,EAAQ8M,QAEnB,kBAAC,KAAD,OAGD,kBAAC3L,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQrR,MAC5BA,EAAKoX,SAASlW,UAAd,4BACQlB,EAAKoX,SAASlW,WACpB,GACFlB,EAAKoX,SAASvU,MAAd,kCACS7C,EAAKoX,SAASvU,OACrB,GACF7C,EAAKoX,SAASzU,OAAd,kCACS3C,EAAKoX,SAASzU,QACrB,GACF3C,EAAKoX,SAASliB,KAAd,kCACS8K,EAAKoX,SAASliB,MACrB,KAIL,kBAAC,GAAD,CACC0f,MAAO,CAAEU,SAAU,WACnBmK,iBAAiB,iBACjBC,WAAYgC,EAAarxB,OACVoJ,KAAMulB,EACNiE,gBAAiB,GAChCnE,QAvGF9e,EAAKqY,kBAAkBhoB,OAAS,GAChC2P,EAAKqY,kBAAkBrY,EAAKqY,kBAAkBhoB,OAAS,GAAGoZ,GAAK,EAuG7DkW,OACC,kBAAC9M,EAAA,EAAD,CACC7B,MAAM,YACN4L,KAAM,GACNjK,UAAWtB,EAAQuO,WAIpB8B,ICzJS,SAASwB,KACtB,IAAM5T,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACvCC,KAAM,CACFtf,MAAM,OACNggB,OAAO,YAKLnQ,EAAOwY,KACPnH,EAAU/B,IAKhB,OACE,kBAAC,KAAD,CAAgB3R,MAAOqC,EAAKrC,MAAOwlB,cAJX,SAAC7xB,GACzB0O,EAAK4X,SAAStmB,IAGuDqhB,UAAWtB,EAAQ5B,MACtF,kBAAC0R,GAAD,MACA,kBAACyB,GAAD,MACA,kBAAC3E,GAAD,OC1BN,IAAM3O,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACtC4T,QAAS,CACR7N,gBAAiB/F,EAAMyG,QAAQuI,WAAWC,MAC1Cxd,SAAU,SACV+O,QAAS,QAGVnN,MAAO,CACNwgB,WAAY,eACZ1K,SAAU,OACV4C,YAAa,OACbhG,gBAAiB/F,EAAMyG,QAAQuI,WAAWC,WAI7B,SAAS6E,GAAI9O,GAC3B,IAAMnD,EAAU/B,KAEhB,OAAO,yBAAKqD,UAAWtB,EAAQxO,OAAxB,a,kCCZO,SAAS0gB,KAAc,IAAD,EAKhClU,IAHHN,EAFmC,EAEnCA,eACAC,EAHmC,EAGnCA,kBACAE,EAJmC,EAInCA,gBAED,SAASsU,EAAMhP,GACd,OAAO,kBAAC,KAAD,eAAU6N,UAAW,EAAGtP,QAAQ,UAAayB,IASrD,OACC,kBAACiP,GAAA,EAAD,CACCxQ,KAAMlE,EACN2U,iBAAkB,IAClB3C,QAV0B,SAAC4C,EAAOC,GACpB,cAAXA,GAGJ5U,GAAkB,KAQjB,kBAACwU,EAAD,CAAOvU,SAAUC,EAAgBD,UAC/BC,EAAgBpK,O,2CCXf0K,GAAQqU,aAAe,CAC5B5N,QAAS,CACR1Q,KAAM,OACN6Q,QAAS,CACR0N,KAAMC,KAAOC,WAAW,KACxB7N,KAAM4N,KAAOC,WAAW,MAEzB3N,UAAW,CACVyN,KAAMC,KAAOE,OAAO,KACpB9N,KAAM4N,KAAOE,OAAO,MAErB/N,MAAO,CACN4N,KAAMC,KAAOG,IAAI,KACjB/N,KAAM4N,KAAOG,IAAI,SAKd5U,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACtC2U,UAAW,CACVnU,QAAS,OACT7f,MAAO,OACPggB,OAAO,QAERiU,cAAe,CACdjU,OAAS,SAEVkU,IAAK,CACJlU,OAAS,WAII,SAASmU,KACvB,IAAMjT,EAAU/B,KAChB,OACC,kBAAC3B,EAAD,KACC,kBAACyB,EAAD,KACC,kBAACP,EAAD,KACC,kBAAC0J,GAAD,KACC,kBAACgM,GAAA,EAAD,CAAe/U,MAAOA,IACrB,kBAACgV,GAAA,EAAD,CACC9R,UAAU,OACV+B,SAAS,KACTW,eAAe,OACfzC,UAAWtB,EAAQ+S,eAEnB,kBAAClR,EAAA,EAAD,MACA,kBAAC9B,EAAD,MAEA,kBAACoB,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQgT,KAC7B,kBAACf,GAAD,OAED,kBAAC9Q,EAAA,EAAD,CAAM+E,MAAI,EAAC5E,UAAWtB,EAAQ8S,WAC7B,kBAAC,aAAD,CACCM,YAAa,CACZt0B,MAAO,OACPggB,OAAQ,QAETuU,OAAQ,CACPhP,KAAK,EACL0L,OAAO,EACP7C,QAAQ,EACR5I,MAAM,EACNgP,UAAU,EACVC,aAAa,EACbC,YAAY,EACZC,SAAS,IAGV,kBAAC1J,GAAD,OAED,kBAAC8H,GAAD,OAGD,kBAACK,GAAD,Y,yBC3FO,SAASwB,GAAIvQ,GAC3B,IAAMwQ,EACL,yIAEuC,IACtC,0BAAMrR,KAAK,MAAMC,aAAW,iBAA5B,gEAEQ,KAcV,OARiBqR,KAAOC,UAAUC,OAAOC,UAAUC,WACnCC,UAAU,CACxBC,QAAS,CACRC,OAAQ,UAKU,kBAAClB,GAAD,MAAWU,ECbbS,QACW,cAA7BN,OAAOO,SAASC,UAEe,UAA7BR,OAAOO,SAASC,UAEhBR,OAAOO,SAASC,SAASzd,MACvB,2DCZN0d,IAASC,OAAO,kBAACd,GAAD,MAASe,SAASC,eAAe,SD2H3C,kBAAmBX,WACrBA,UAAUY,cAAcC,MAAMxD,MAAK,SAAAyD,GACjCA,EAAaC,iB,gCEjInBh3B,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETH,OAAOC,eAAeC,EAAS,UAAW,CACxCE,YAAY,EACZC,IAAK,WACH,OAAO42B,EAASjd,WAGpBha,OAAOC,eAAeC,EAAS,QAAS,CACtCE,YAAY,EACZC,IAAK,WACH,OAAO8c,EAAOlB,SAGlBjc,OAAOC,eAAeC,EAAS,OAAQ,CACrCE,YAAY,EACZC,IAAK,WACH,OAAO62B,EAAMjZ,QAIjB,IAAIgZ,EAAWl3B,EAAQ,KAEnBod,EAASpd,EAAQ,KAEjBm3B,EAAQn3B,EAAQ,O","file":"static/js/main.e3e67d73.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"decode\", {\n  enumerable: true,\n  get: function get() {\n    return _decode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"encode\", {\n  enumerable: true,\n  get: function get() {\n    return _encode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"keymap\", {\n  enumerable: true,\n  get: function get() {\n    return _keymap[\"default\"];\n  }\n});\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _keymap = _interopRequireDefault(require(\"./keymap\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dbcswidth = dbcswidth;\nexports.getWidth = getWidth;\nexports.indexOfWidth = indexOfWidth;\nexports.substrWidth = substrWidth;\n\nvar _wcwidth = _interopRequireDefault(require(\"wcwidth\"));\n\nfunction dbcswidth(str) {\n  return str.split('').reduce(function (sum, c) {\n    return sum + (c.charCodeAt(0) > 255 ? 2 : 1);\n  }, 0);\n}\n/**\n* calculate width of string.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n*/\n\n\nfunction getWidth(widthType, str) {\n  switch (widthType) {\n    case 'length':\n      return str.length;\n\n    case 'wcwidth':\n      return (0, _wcwidth[\"default\"])(str);\n\n    case 'dbcs':\n      return dbcswidth(str);\n\n    default:\n      throw new Error(\"Invalid widthType \\\"\".concat(widthType, \"\\\"\"));\n  }\n}\n/**\n* calculate the position that the prefix of string is a specific width\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} width - the width of target string\n*/\n\n\nfunction indexOfWidth(widthType, str, width) {\n  if (widthType === 'length') {\n    return Math.min(width, str.length);\n  }\n\n  for (var i = 0; i <= str.length; i++) {\n    if (getWidth(widthType, str.substr(0, i)) > width) {\n      return i - 1;\n    }\n  }\n\n  return str.length;\n}\n/**\n* extract parts of string, beginning at the character at the specified position,\n* and returns the specified width of characters. if the character is incomplete,\n* it will be replaced by space.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} startWidth - the beginning position of string\n* @params {number} width - the width of target string\n*/\n\n\nfunction substrWidth(widthType, str, startWidth, width) {\n  var ignoreWidth = typeof width === 'undefined';\n  var length = width;\n  var start = startWidth;\n  var prefixSpace = 0,\n      suffixSpace = 0;\n\n  if (widthType !== 'length') {\n    start = indexOfWidth(widthType, str, startWidth);\n\n    if (getWidth(widthType, str.substr(0, start)) < startWidth) {\n      start += 1;\n      prefixSpace = Math.max(getWidth(widthType, str.substr(0, start)) - startWidth, 0);\n    }\n\n    if (!ignoreWidth) {\n      length = indexOfWidth(widthType, str.substr(start), width - prefixSpace);\n      suffixSpace = Math.min(width, getWidth(widthType, str.substr(start))) - (prefixSpace + getWidth(widthType, str.substr(start, length)));\n    }\n  }\n\n  var substr = ignoreWidth ? str.substr(start) : str.substr(start, length);\n  return ' '.repeat(prefixSpace) + substr + ' '.repeat(suffixSpace);\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectQueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _QueryBuilder2 = require(\"./QueryBuilder\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SelectQueryBuilder = /*#__PURE__*/function (_QueryBuilder) {\n  (0, _inherits2[\"default\"])(SelectQueryBuilder, _QueryBuilder);\n\n  var _super = _createSuper(SelectQueryBuilder);\n\n  function SelectQueryBuilder() {\n    (0, _classCallCheck2[\"default\"])(this, SelectQueryBuilder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _super.call.apply(_super, [this].concat(args));\n  }\n\n  return SelectQueryBuilder;\n}(_QueryBuilder2.QueryBuilder);\n\nexports.SelectQueryBuilder = SelectQueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// const WebSocket = require('ws');\nvar Socket = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Socket, _EventEmitter);\n\n  var _super = _createSuper(Socket);\n\n  function Socket(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Socket);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_socket\", void 0);\n    _this._config = config;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Socket, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this2 = this;\n\n      var socket;\n\n      if (typeof WebSocket === 'undefined') {\n        throw new Error(\"'WebSocket' is undefined. Do you include any websocket polyfill?\");\n      } else if (WebSocket.length === 1) {\n        // client \n        socket = new WebSocket(this._config.url);\n      } else {\n        // server\n        var options = {};\n\n        if (this._config.origin) {\n          options.origin = this._config.origin;\n        }\n\n        socket = new WebSocket(this._config.url, options);\n      }\n\n      socket.addEventListener('open', this.emit.bind(this, 'connect'));\n      socket.addEventListener('close', this.emit.bind(this, 'disconnect'));\n      socket.addEventListener('error', this.emit.bind(this, 'error'));\n      var data = [];\n      var timeoutHandler;\n      socket.binaryType = 'arraybuffer';\n      socket.addEventListener('message', function (_ref) {\n        var _data;\n\n        var currData = _ref.data;\n        clearTimeout(timeoutHandler);\n\n        (_data = data).push.apply(_data, (0, _toConsumableArray2[\"default\"])(new Uint8Array(currData)));\n\n        timeoutHandler = setTimeout(function () {\n          _this2.emit('message', data);\n\n          data = [];\n        }, _this2._config.timeout);\n\n        if (currData.byteLength > _this2._config.blobSize) {\n          throw new Error(\"Receive message length(\".concat(currData.byteLength, \") greater than buffer size(\").concat(_this2._config.blobSize, \")\"));\n        }\n      });\n      this._socket = socket;\n      return true;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var socket = this._socket;\n      socket.close();\n    }\n  }, {\n    key: \"send\",\n    value: function send(str) {\n      var socket = this._socket;\n\n      if (socket.readyState === 1\n      /* OPEN */\n      ) {\n          socket.send(str);\n        }\n    }\n  }]);\n  return Socket;\n}(_eventemitter[\"default\"]);\n\nvar _default = Socket;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar config = {\n  name: 'PTT',\n  url: 'wss://ws.ptt.cc/bbs',\n  charset: 'utf8',\n  origin: 'app://pcman',\n  protocol: 'websocket',\n  timeout: 200,\n  blobSize: 1024,\n  preventIdleTimeout: 30,\n  terminal: {\n    columns: 80,\n    rows: 24\n  },\n  numOfPagesPerIteration: 1\n};\nvar _default = config;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"ptt\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Socket\", {\n  enumerable: true,\n  get: function get() {\n    return _socket[\"default\"];\n  }\n});\n\nvar _ptt = _interopRequireDefault(require(\"./sites/ptt\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nvar _socket = _interopRequireDefault(require(\"./socket\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"bot\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\n\nvar _bot = _interopRequireDefault(require(\"./bot\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nvar _sleepPromise = _interopRequireDefault(require(\"sleep-promise\"));\n\nvar _terminal = _interopRequireDefault(require(\"terminal.js\"));\n\nvar _socket = _interopRequireDefault(require(\"../../socket\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _char = require(\"../../utils/char\");\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nfunction _wrapRegExp(re, groups) { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _RegExp = (0, _wrapNativeSuper2[\"default\"])(RegExp); var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = _RegExp.call(this, re, flags); _groups.set(_this, groups || _groups.get(re)); return _this; } (0, _inherits2[\"default\"])(BabelRegExp, _RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = []; args.push.apply(args, arguments); if ((0, _typeof2[\"default\"])(args[args.length - 1]) !== \"object\") { args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Bot = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Bot, _EventEmitter);\n\n  var _super = _createSuper(Bot);\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"line\",\n    get: function get() {\n      var lines = [];\n\n      for (var i = 0; i < this.term.state.rows; i++) {\n        var _this$term$state$getL = this.term.state.getLine(i),\n            str = _this$term$state$getL.str,\n            attr = _this$term$state$getL.attr;\n\n        lines.push({\n          str: str,\n          attr: Object.assign({}, attr)\n        });\n      }\n\n      return lines;\n    }\n  }, {\n    key: \"screen\",\n    get: function get() {\n      return this.line.map(function (line) {\n        return line.str;\n      }).join(\"\\n\");\n    }\n  }]);\n\n  function Bot(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Bot);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"term\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"currentCharset\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"socket\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"preventIdleHandler\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getLine\", function (n) {\n      return _this.term.state.getLine(n);\n    });\n    _this.config = _objectSpread(_objectSpread({}, _config[\"default\"]), config);\n\n    _this.init();\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.socket.connect();\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var _this2 = this;\n\n        var config, socket;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                config = this.config;\n                this.term = new _terminal[\"default\"](config.terminal);\n                this.state = _objectSpread({}, Bot.initialState);\n                this.term.state.setMode(\"stringWidth\", \"dbcs\");\n                this.currentCharset = \"big5\";\n                _context.t0 = config.protocol.toLowerCase();\n                _context.next = _context.t0 === \"websocket\" ? 8 : _context.t0 === \"ws\" ? 8 : _context.t0 === \"wss\" ? 8 : _context.t0 === \"telnet\" ? 9 : _context.t0 === \"ssh\" ? 9 : 9;\n                break;\n\n              case 8:\n                return _context.abrupt(\"break\", 11);\n\n              case 9:\n                throw new Error(\"Invalid protocol: \".concat(config.protocol));\n\n              case 11:\n                socket = new _socket[\"default\"](config);\n                socket.connect();\n                Bot.forwardEvents.forEach(function (e) {\n                  socket.on(e, _this2.emit.bind(_this2, e));\n                });\n                socket.on(\"connect\", function () {\n                  _this2.state.connect = true;\n\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  _this2.emit.apply(_this2, [\"connect\"].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state);\n                }).on(\"disconnect\", function (closeEvent) {\n                  _this2.state.connect = false;\n                  _this2.state.login = false;\n\n                  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                    args[_key2 - 1] = arguments[_key2];\n                  }\n\n                  _this2.emit.apply(_this2, [\"disconnect\", closeEvent].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state);\n                }).on(\"message\", function (data) {\n                  if (_this2.currentCharset !== _this2.config.charset && !_this2.state.login && (0, _utils.decode)(data, \"utf8\").includes(\"登入中，請稍候...\")) {\n                    _this2.currentCharset = _this2.config.charset;\n                  }\n\n                  var msg = (0, _utils.decode)(data, _this2.currentCharset);\n\n                  _this2.term.write(msg);\n\n                  _this2.emit(\"redraw\", _this2.term.toString());\n                }).on(\"error\", function (err) {\n                  console.log(err);\n                  _this2.state.wsError = true;\n\n                  _this2.emit(\"websocket_error\");\n                });\n                this.socket = socket;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }() // get state(): any {\n    // \treturn { ...this.state };\n    // }\n\n  }, {\n    key: \"getContentIterator\",\n    // This will return iterator of content.\n    value: function getContentIterator() {\n      var _this3 = this;\n\n      var infoLine = this.line[23].str;\n      var pgTotal = Number(infoLine.substring(infoLine.indexOf(\"第\") + 2, infoLine.indexOf(\"頁\") - 1).split(\"/\")[1]); // console.log(\"pgtotal\", pgTotal);\n\n      var allRead = false;\n      var firstPage = true;\n      var index = 0;\n      var lines = [];\n      lines.push(this.line[0]);\n      var iterator = {\n        reset: function reset() {\n          index = 0;\n          allRead = false;\n          firstPage = true;\n        },\n        next: function () {\n          var _next = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n            var ni, pgNow, l, i, j, line, r;\n            return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n\n                    if (!(allRead || infoLine.includes(\"此文章無內容\"))) {\n                      _context2.next = 3;\n                      break;\n                    }\n\n                    return _context2.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 3:\n                    ni = 0;\n\n                  case 4:\n                    if (!(ni < _this3.config.numOfPagesPerIteration && !allRead)) {\n                      _context2.next = 21;\n                      break;\n                    }\n\n                    infoLine = _this3.line[23].str;\n                    pgNow = Number(infoLine.substring(infoLine.indexOf(\"第\") + 2, infoLine.indexOf(\"頁\") - 1).split(\"/\")[0]); // console.log(\"pgNow\", pgNow);\n\n                    l = void 0; // console.log(\"infoline\", infoLine);\n\n                    l = infoLine.substring(infoLine.lastIndexOf(\"第\") + 2, infoLine.indexOf(\"行\") - 1).split(\"~\").map(Number); // console.log(\"l\", l);\n\n                    i = firstPage ? l[0] : l[0] + 1;\n\n                    for (j = 1; j <= 22; i++, j++) {\n                      line = _this3.line[j];\n\n                      if (i > index) {\n                        lines.push(line);\n                        index++; // console.log(\"line \", i, \", index \",index,\" \", line);\n                      }\n                    }\n\n                    firstPage = false; // last page\n\n                    if (!(pgNow === pgTotal)) {\n                      _context2.next = 16;\n                      break;\n                    }\n\n                    allRead = true;\n                    _context2.next = 18;\n                    break;\n\n                  case 16:\n                    _context2.next = 18;\n                    return _this3.send(\"\".concat(_utils.keymap.PgDown));\n\n                  case 18:\n                    ni++;\n                    _context2.next = 4;\n                    break;\n\n                  case 21:\n                    // remove all empty lines at the end\n                    if (allRead) {\n                      while (lines.length > 0 && lines[lines.length - 1].str === \"\") {\n                        index--;\n                        lines.pop();\n                      }\n                    }\n\n                    r = {\n                      value: lines,\n                      done: false\n                    };\n                    lines = [];\n                    return _context2.abrupt(\"return\", r);\n\n                  case 27:\n                    _context2.prev = 27;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    return _context2.abrupt(\"return\", Promise.reject(_context2.t0));\n\n                  case 30:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, null, [[0, 27]]);\n          }));\n\n          function next() {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      };\n      return iterator;\n    } // This will return whole object.\n\n  }, {\n    key: \"getContent\",\n    value: function () {\n      var _getContent = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var lines, sentPgDown, i, lastLine, _i, j;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                lines = [];\n                lines.push(this.line[0]);\n                sentPgDown = false;\n\n              case 3:\n                if (!(!this.line[23].str.includes(\"100%\") && !this.line[23].str.includes(\"此文章無內容\"))) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                for (i = 1; i < 23; i++) {\n                  lines.push(this.line[i]);\n                }\n\n                _context3.next = 7;\n                return this.send(_utils.keymap.PgDown);\n\n              case 7:\n                sentPgDown = true;\n                _context3.next = 3;\n                break;\n\n              case 10:\n                lastLine = lines[lines.length - 1];\n                _i = 0;\n\n              case 12:\n                if (!(_i < 23)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                if (!(this.line[_i].str === lastLine.str)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                for (j = _i + 1; j < 23; j++) {\n                  lines.push(this.line[j]);\n                }\n\n                return _context3.abrupt(\"break\", 19);\n\n              case 16:\n                _i++;\n                _context3.next = 12;\n                break;\n\n              case 19:\n                while (lines.length > 0 && lines[lines.length - 1].str === \"\") {\n                  lines.pop();\n                }\n\n                if (!sentPgDown) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                _context3.next = 23;\n                return this.send(_utils.keymap.Home);\n\n              case 23:\n                return _context3.abrupt(\"return\", lines);\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getContent() {\n        return _getContent.apply(this, arguments);\n      }\n\n      return getContent;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getLines\",\n    value: function () {\n      var _getLines = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var lines;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.getContent();\n\n              case 2:\n                lines = _context4.sent;\n                return _context4.abrupt(\"return\", lines.map(function (line) {\n                  return line.str;\n                }));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getLines() {\n        return _getLines.apply(this, arguments);\n      }\n\n      return getLines;\n    }()\n  }, {\n    key: \"send\",\n    value: function send(msg) {\n      var _this4 = this;\n\n      if (this.config.preventIdleTimeout) {\n        this.preventIdle(this.config.preventIdleTimeout);\n      }\n\n      return new Promise(function (resolve, reject) {\n        var autoResolveHandler;\n\n        var cb = function cb(message) {\n          clearTimeout(autoResolveHandler);\n          resolve(true);\n        };\n\n        if (_this4.state.connect) {\n          if (msg.length > 0) {\n            _this4.socket.send((0, _utils.encode)(msg, _this4.currentCharset));\n\n            _this4.once(\"message\", cb);\n\n            autoResolveHandler = setTimeout(function () {\n              _this4.removeListener(\"message\", cb);\n\n              resolve(false);\n            }, _this4.config.timeout * 10);\n          } else {\n            console.info(\"Sending message with 0-length. Skipped.\");\n            resolve(true);\n          }\n        } else {\n          reject();\n        }\n      });\n    }\n  }, {\n    key: \"preventIdle\",\n    value: function preventIdle(timeout) {\n      var _this5 = this;\n\n      clearTimeout(this.preventIdleHandler);\n\n      if (this.state.login) {\n        this.preventIdleHandler = setTimeout( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n          return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.next = 2;\n                  return _this5.send(_utils.keymap.CtrlU);\n\n                case 2:\n                  _context5.next = 4;\n                  return _this5.send(_utils.keymap.ArrowLeft);\n\n                case 4:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5);\n        })), timeout * 1000);\n      }\n    }\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(username, password) {\n        var kick,\n            ret,\n            state,\n            _args6 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                kick = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : true;\n\n                if (!this.state.login) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                username = username.replace(/,/g, \"\");\n\n                if (this.config.charset === \"utf8\") {\n                  username += \",\";\n                }\n\n                _context6.next = 7;\n                return this.send(\"\".concat(username).concat(_utils.keymap.Enter).concat(password).concat(_utils.keymap.Enter));\n\n              case 7:\n                _context6.next = 9;\n                return this.checkLogin(kick);\n\n              case 9:\n                ret = _context6.sent;\n\n                if (ret) {\n                  state = this.state;\n                  state.login = true;\n                  state.position = {\n                    boardname: \"\"\n                  };\n                  this.state.username = username.substring(0, username.length - 1);\n                  this.emit(\"stateChange\", this.state);\n                }\n\n                return _context6.abrupt(\"return\", ret);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7() {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (this.state.login) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\");\n\n              case 2:\n                _context7.next = 4;\n                return this.send(\"G\".concat(_utils.keymap.Enter, \"Y\").concat(_utils.keymap.Enter));\n\n              case 4:\n                this.state.login = false;\n                this.emit(\"stateChange\", this.state);\n                this.send(_utils.keymap.Enter);\n                return _context7.abrupt(\"return\", true);\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"checkLogin\",\n    value: function () {\n      var _checkLogin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(kick) {\n        var state, lines;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(this.line[21].str.includes(\"密碼不對或無此帳號\") || this.line[21].str.includes(\"請重新輸入\"))) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 5:\n                if (!this.line[23].str.includes(\"請稍後再試\")) {\n                  _context8.next = 10;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 10:\n                if (!this.line[13].str.includes(\"亂踹密碼會留下記錄喔\")) {\n                  _context8.next = 15;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 15:\n                state = 0;\n\n              case 16:\n                if (!true) {\n                  _context8.next = 66;\n                  break;\n                }\n\n                _context8.next = 19;\n                return (0, _sleepPromise[\"default\"])(400);\n\n              case 19:\n                lines = this.line;\n\n                if (!lines[22].str.includes(\"登入中，請稍候...\")) {\n                  _context8.next = 23;\n                  break;\n                }\n\n                _context8.next = 64;\n                break;\n\n              case 23:\n                if (!lines[22].str.includes(\"您想刪除其他重複登入的連線嗎\")) {\n                  _context8.next = 32;\n                  break;\n                }\n\n                if (!(state === 1)) {\n                  _context8.next = 26;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 26:\n                _context8.next = 28;\n                return this.send(\"\".concat(kick ? \"y\" : \"n\").concat(_utils.keymap.Enter));\n\n              case 28:\n                state = 1;\n                return _context8.abrupt(\"continue\", 16);\n\n              case 32:\n                if (!lines[23].str.includes(\"請勿頻繁登入以免造成系統過度負荷\")) {\n                  _context8.next = 40;\n                  break;\n                }\n\n                if (!(state === 2)) {\n                  _context8.next = 35;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 35:\n                _context8.next = 37;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 37:\n                state = 2;\n                _context8.next = 64;\n                break;\n\n              case 40:\n                if (!lines[23].str.includes(\"您要刪除以上錯誤嘗試的記錄嗎\")) {\n                  _context8.next = 48;\n                  break;\n                }\n\n                if (!(state === 3)) {\n                  _context8.next = 43;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 43:\n                _context8.next = 45;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 45:\n                state = 3;\n                _context8.next = 64;\n                break;\n\n              case 48:\n                if (!lines[23].str.includes(\"按任意鍵繼續\")) {\n                  _context8.next = 53;\n                  break;\n                }\n\n                _context8.next = 51;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 51:\n                _context8.next = 64;\n                break;\n\n              case 53:\n                if (!(lines[22].str + lines[23].str).toLowerCase().includes(\"y/n\")) {\n                  _context8.next = 59;\n                  break;\n                }\n\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n                _context8.next = 57;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 57:\n                _context8.next = 64;\n                break;\n\n              case 59:\n                if (!lines[23].str.includes(\"我是\")) {\n                  _context8.next = 63;\n                  break;\n                }\n\n                return _context8.abrupt(\"break\", 66);\n\n              case 63:\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n\n              case 64:\n                _context8.next = 16;\n                break;\n\n              case 66:\n                this.emit(\"login.success\");\n                return _context8.abrupt(\"return\", true);\n\n              case 68:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function checkLogin(_x3) {\n        return _checkLogin.apply(this, arguments);\n      }\n\n      return checkLogin;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"checkArticleWithHeader\",\n    value: function checkArticleWithHeader() {\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.line[0].str, 0, 6).trim();\n      return authorArea === \"作者\";\n    }\n  }, {\n    key: \"select\",\n    value: function select(model) {\n      return model.select(this);\n    }\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMails\",\n    value: function () {\n      var _getMails = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9() {\n        var offset,\n            getLine,\n            mails,\n            i,\n            line,\n            mail,\n            _args9 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                offset = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : 0;\n                _context9.next = 3;\n                return this.enterMail();\n\n              case 3:\n                if (!(offset > 0)) {\n                  _context9.next = 7;\n                  break;\n                }\n\n                offset = Math.max(offset - 9, 1);\n                _context9.next = 7;\n                return this.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(offset).concat(_utils.keymap.Enter));\n\n              case 7:\n                getLine = this.getLine;\n                mails = [];\n\n                for (i = 3; i <= 22; i++) {\n                  line = getLine(i).str;\n                  mail = {\n                    sn: +(0, _char.substrWidth)(\"dbcs\", line, 1, 5).trim(),\n                    date: (0, _char.substrWidth)(\"dbcs\", line, 9, 5).trim(),\n                    author: (0, _char.substrWidth)(\"dbcs\", line, 15, 12).trim(),\n                    status: (0, _char.substrWidth)(\"dbcs\", line, 30, 2).trim(),\n                    title: (0, _char.substrWidth)(\"dbcs\", line, 33).trim()\n                  };\n                  mails.push(mail);\n                }\n\n                _context9.next = 12;\n                return this.enterIndex();\n\n              case 12:\n                return _context9.abrupt(\"return\", mails.reverse());\n\n              case 13:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function getMails() {\n        return _getMails.apply(this, arguments);\n      }\n\n      return getMails;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMail\",\n    value: function () {\n      var _getMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(sn) {\n        var getLine, hasHeader, mail;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this.enterMail();\n\n              case 2:\n                getLine = this.getLine;\n                _context10.next = 5;\n                return this.send(\"\".concat(sn).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 5:\n                hasHeader = this.checkArticleWithHeader();\n                mail = {\n                  sn: sn,\n                  author: \"\",\n                  title: \"\",\n                  timestamp: \"\",\n                  lines: []\n                };\n\n                if (this.checkArticleWithHeader()) {\n                  mail.author = (0, _char.substrWidth)(\"dbcs\", getLine(0).str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)(\"dbcs\", getLine(1).str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)(\"dbcs\", getLine(2).str, 7).trim();\n                }\n\n                _context10.next = 10;\n                return this.getLines();\n\n              case 10:\n                mail.lines = _context10.sent;\n                _context10.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context10.abrupt(\"return\", mail);\n\n              case 14:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function getMail(_x4) {\n        return _getMail.apply(this, arguments);\n      }\n\n      return getMail;\n    }()\n  }, {\n    key: \"enterIndex\",\n    value: function () {\n      var _enterIndex = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee11() {\n        return _regenerator[\"default\"].wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.send(\"\".concat(_utils.keymap.ArrowLeft.repeat(5)));\n\n              case 2:\n                return _context11.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function enterIndex() {\n        return _enterIndex.apply(this, arguments);\n      }\n\n      return enterIndex;\n    }()\n  }, {\n    key: \"goToTop\",\n    value: function () {\n      var _goToTop = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee12() {\n        return _regenerator[\"default\"].wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.send(\"\".concat(_utils.keymap.Home));\n\n              case 2:\n                return _context12.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function goToTop() {\n        return _goToTop.apply(this, arguments);\n      }\n\n      return goToTop;\n    }()\n  }, {\n    key: \"enterArticleByAIDFromBoard\",\n    // From board enter article with AID\n    value: function () {\n      var _enterArticleByAIDFromBoard = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee13(AID) {\n        var query, res;\n        return _regenerator[\"default\"].wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (this.state.login) {\n                  _context13.next = 2;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                query = \"#\".concat(AID).concat(_utils.keymap.Enter);\n                _context13.next = 5;\n                return this.send(query);\n\n              case 5:\n                res = _context13.sent;\n\n                if (res) {\n                  _context13.next = 10;\n                  break;\n                }\n\n                _context13.next = 9;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 9:\n                return _context13.abrupt(\"return\", Promise.reject(\"enterArticleByAIDFromBoard failed\"));\n\n              case 10:\n                _context13.next = 12;\n                return this.send(\"\".concat(_utils.keymap.ArrowRight));\n\n              case 12:\n                return _context13.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 13:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function enterArticleByAIDFromBoard(_x5) {\n        return _enterArticleByAIDFromBoard.apply(this, arguments);\n      }\n\n      return enterArticleByAIDFromBoard;\n    }() // Enter board and enter article with AID\n\n  }, {\n    key: \"enterArticleByAID\",\n    value: function () {\n      var _enterArticleByAID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee14(boardname, AID) {\n        return _regenerator[\"default\"].wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (this.state.login) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                _context14.prev = 2;\n                _context14.next = 5;\n                return this.enterBoardByName(boardname);\n\n              case 5:\n                _context14.next = 7;\n                return this.enterArticleByAIDFromBoard(AID);\n\n              case 7:\n                return _context14.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 10:\n                _context14.prev = 10;\n                _context14.t0 = _context14[\"catch\"](2);\n                return _context14.abrupt(\"return\", Promise.reject(_context14.t0));\n\n              case 13:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this, [[2, 10]]);\n      }));\n\n      function enterArticleByAID(_x6, _x7) {\n        return _enterArticleByAID.apply(this, arguments);\n      }\n\n      return enterArticleByAID;\n    }() // This API is STATEFUL!\n    // send comment in article, in search mode.\n    //  res = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendCommentSearchMode\",\n    value: function () {\n      var _sendCommentSearchMode = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee15(res) {\n        var text, lenPerLine, seperateText, _iterator, _step, t;\n\n        return _regenerator[\"default\"].wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                text = res.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context15.next = 4;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 4:\n                lenPerLine = 52; // 中文字的長度是二\n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context15.prev = 7;\n                // We assume bot is in the correct article.\n                _iterator = _createForOfIteratorHelper(text);\n                _context15.prev = 9;\n\n                _iterator.s();\n\n              case 11:\n                if ((_step = _iterator.n()).done) {\n                  _context15.next = 29;\n                  break;\n                }\n\n                t = _step.value;\n                _context15.next = 15;\n                return this.send(\"X\");\n\n              case 15:\n                if (!this.line[23].str.includes(\"您覺得這篇文章\")) {\n                  _context15.next = 18;\n                  break;\n                }\n\n                _context15.next = 18;\n                return this.send(\"\".concat(res.type));\n\n              case 18:\n                if (!(this.line[22].str.includes(\"使用 → 加註方式\") || this.line[23].str.includes(this.state.username))) {\n                  _context15.next = 25;\n                  break;\n                }\n\n                _context15.next = 21;\n                return this.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 21:\n                _context15.next = 23;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 23:\n                _context15.next = 27;\n                break;\n\n              case 25:\n                _context15.next = 27;\n                return this.send(\"\".concat(_utils.keymap.ArrowLeft));\n\n              case 27:\n                _context15.next = 11;\n                break;\n\n              case 29:\n                _context15.next = 34;\n                break;\n\n              case 31:\n                _context15.prev = 31;\n                _context15.t0 = _context15[\"catch\"](9);\n\n                _iterator.e(_context15.t0);\n\n              case 34:\n                _context15.prev = 34;\n\n                _iterator.f();\n\n                return _context15.finish(34);\n\n              case 37:\n                return _context15.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 40:\n                _context15.prev = 40;\n                _context15.t1 = _context15[\"catch\"](7);\n                return _context15.abrupt(\"return\", Promise.reject(_context15.t1));\n\n              case 43:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this, [[7, 40], [9, 31, 34, 37]]);\n      }));\n\n      function sendCommentSearchMode(_x8) {\n        return _sendCommentSearchMode.apply(this, arguments);\n      }\n\n      return sendCommentSearchMode;\n    }()\n  }, {\n    key: \"enterArticle\",\n    value: function () {\n      var _enterArticle = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee16() {\n        return _regenerator[\"default\"].wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16);\n      }));\n\n      function enterArticle() {\n        return _enterArticle.apply(this, arguments);\n      }\n\n      return enterArticle;\n    }() // send comment in article\n    //  res = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendComment\",\n    value: function () {\n      var _sendComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee17(res) {\n        var text, lenPerLine, seperateText, _iterator2, _step2, t;\n\n        return _regenerator[\"default\"].wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                if (this.state.login) {\n                  _context17.next = 2;\n                  break;\n                }\n\n                return _context17.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                text = res.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context17.next = 6;\n                  break;\n                }\n\n                return _context17.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 6:\n                lenPerLine = 52; // 中文字的長度是二\n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context17.prev = 9;\n                _context17.next = 12;\n                return this.enterBoardByName(res.boardName);\n\n              case 12:\n                _iterator2 = _createForOfIteratorHelper(text);\n                _context17.prev = 13;\n\n                _iterator2.s();\n\n              case 15:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context17.next = 31;\n                  break;\n                }\n\n                t = _step2.value;\n                _context17.next = 19;\n                return this.enterArticle();\n\n              case 19:\n                _context17.next = 21;\n                return this.send(\"X\");\n\n              case 21:\n                if (!this.line[23].str.includes(\"您覺得這篇文章\")) {\n                  _context17.next = 24;\n                  break;\n                }\n\n                _context17.next = 24;\n                return this.send(\"\".concat(res.type));\n\n              case 24:\n                if (!(this.line[22].str.includes(\"使用 → 加註方式\") || this.line[23].str.includes(this.state.username))) {\n                  _context17.next = 29;\n                  break;\n                }\n\n                _context17.next = 27;\n                return this.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 27:\n                _context17.next = 29;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 29:\n                _context17.next = 15;\n                break;\n\n              case 31:\n                _context17.next = 36;\n                break;\n\n              case 33:\n                _context17.prev = 33;\n                _context17.t0 = _context17[\"catch\"](13);\n\n                _iterator2.e(_context17.t0);\n\n              case 36:\n                _context17.prev = 36;\n\n                _iterator2.f();\n\n                return _context17.finish(36);\n\n              case 39:\n                _context17.next = 41;\n                return this.enterIndex();\n\n              case 41:\n                return _context17.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 44:\n                _context17.prev = 44;\n                _context17.t1 = _context17[\"catch\"](9);\n                return _context17.abrupt(\"return\", Promise.reject(_context17.t1));\n\n              case 47:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this, [[9, 44], [13, 33, 36, 39]]);\n      }));\n\n      function sendComment(_x9) {\n        return _sendComment.apply(this, arguments);\n      }\n\n      return sendComment;\n    }()\n  }, {\n    key: \"enterBoardByName\",\n    value: function () {\n      var _enterBoardByName = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee18(boardname) {\n        return _regenerator[\"default\"].wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.next = 2;\n                return this.send(\"s\".concat(boardname).concat(_utils.keymap.Enter, \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                if (!(this.currentBoardname.toLowerCase() === boardname.toLowerCase())) {\n                  _context18.next = 8;\n                  break;\n                }\n\n                this.state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                return _context18.abrupt(\"return\", Promise.resolve(\"now in board : \".concat(boardname)));\n\n              case 8:\n                _context18.next = 10;\n                return this.enterIndex();\n\n              case 10:\n                return _context18.abrupt(\"return\", Promise.reject(\"enterBoardByName failed\"));\n\n              case 11:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function enterBoardByName(_x10) {\n        return _enterBoardByName.apply(this, arguments);\n      }\n\n      return enterBoardByName;\n    }()\n  }, {\n    key: \"enterByOffset\",\n    value: function () {\n      var _enterByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee20() {\n        var _this6 = this;\n\n        var offsets,\n            result,\n            _args20 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                offsets = _args20.length > 0 && _args20[0] !== undefined ? _args20[0] : [];\n                result = true;\n                offsets.forEach( /*#__PURE__*/function () {\n                  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee19(offset) {\n                    var i, lastOffset;\n                    return _regenerator[\"default\"].wrap(function _callee19$(_context19) {\n                      while (1) {\n                        switch (_context19.prev = _context19.next) {\n                          case 0:\n                            if (offset === 0) {\n                              result = false;\n                            }\n\n                            if (!(offset < 0)) {\n                              _context19.next = 15;\n                              break;\n                            }\n\n                            i = 22;\n\n                          case 3:\n                            if (!(i >= 3)) {\n                              _context19.next = 15;\n                              break;\n                            }\n\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this6.line[i].str, 3, 4).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context19.next = 8;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context19.abrupt(\"break\", 15);\n\n                          case 8:\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this6.line[i].str, 15, 2).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context19.next = 12;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context19.abrupt(\"break\", 15);\n\n                          case 12:\n                            i--;\n                            _context19.next = 3;\n                            break;\n\n                          case 15:\n                            if (offset < 0) {\n                              result = false;\n                            }\n\n                            if (result) {\n                              _context19.next = 18;\n                              break;\n                            }\n\n                            return _context19.abrupt(\"return\");\n\n                          case 18:\n                            _context19.next = 20;\n                            return _this6.send(\"\".concat(offset).concat(_utils.keymap.Enter.repeat(2), \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n                          case 20:\n                          case \"end\":\n                            return _context19.stop();\n                        }\n                      }\n                    }, _callee19);\n                  }));\n\n                  return function (_x11) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n\n                if (!result) {\n                  _context20.next = 11;\n                  break;\n                }\n\n                this.state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                _context20.next = 8;\n                return this.send(_utils.keymap.Home);\n\n              case 8:\n                return _context20.abrupt(\"return\", true);\n\n              case 11:\n                _context20.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context20.abrupt(\"return\", false);\n\n              case 14:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function enterByOffset() {\n        return _enterByOffset.apply(this, arguments);\n      }\n\n      return enterByOffset;\n    }()\n  }, {\n    key: \"enterBoardByOffset\",\n    value: function () {\n      var _enterBoardByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee21() {\n        var offsets,\n            _args21 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                offsets = _args21.length > 0 && _args21[0] !== undefined ? _args21[0] : [];\n                _context21.next = 3;\n                return this.send(\"C\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context21.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context21.abrupt(\"return\", _context21.sent);\n\n              case 6:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n\n      function enterBoardByOffset() {\n        return _enterBoardByOffset.apply(this, arguments);\n      }\n\n      return enterBoardByOffset;\n    }()\n  }, {\n    key: \"enterFavorite\",\n    value: function () {\n      var _enterFavorite = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee22() {\n        var offsets,\n            _args22 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                offsets = _args22.length > 0 && _args22[0] !== undefined ? _args22[0] : [];\n                _context22.next = 3;\n                return this.send(\"F\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context22.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context22.abrupt(\"return\", _context22.sent);\n\n              case 6:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n\n      function enterFavorite() {\n        return _enterFavorite.apply(this, arguments);\n      }\n\n      return enterFavorite;\n    }()\n  }, {\n    key: \"enterMail\",\n    value: function () {\n      var _enterMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee23() {\n        return _regenerator[\"default\"].wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _context23.next = 2;\n                return this.send(\"M\".concat(_utils.keymap.Enter, \"R\").concat(_utils.keymap.Enter).concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                return _context23.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n\n      function enterMail() {\n        return _enterMail.apply(this, arguments);\n      }\n\n      return enterMail;\n    }()\n  }, {\n    key: \"currentBoardname\",\n    get: function get() {\n      var boardRe = /*#__PURE__*/_wrapRegExp(/\\u3010(?!\\u770B\\u677F\\u5217\\u8868).*\\u3011.*\\u300A(.*)\\u300B/, {\n        boardname: 1\n      });\n\n      var match = boardRe.exec(this.line[0].str);\n\n      if (match) {\n        return match.groups.boardname;\n      } else {\n        return void 0;\n      }\n    }\n  }]);\n  return Bot;\n}(_eventemitter[\"default\"]);\n\n(0, _defineProperty2[\"default\"])(Bot, \"initialState\", {\n  connect: false,\n  login: false,\n  wsError: false\n});\n(0, _defineProperty2[\"default\"])(Bot, \"forwardEvents\", [\"message\", \"error\"]);\nvar _default = Bot;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _uaoJs = require(\"uao-js\");\n\nvar decode = function decode(data, charset) {\n  var str = '';\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      str = Buffer.from(data).toString('utf8');\n      break;\n\n    case 'big5':\n      str = (0, _uaoJs.decodeSync)(String.fromCharCode.apply(String, (0, _toConsumableArray2[\"default\"])(data)));\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return str;\n};\n\nvar _default = decode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _uaoJs = require(\"uao-js\");\n\nvar encode = function encode(str, charset) {\n  var buffer;\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      buffer = Buffer.from(str, 'utf8');\n      break;\n\n    case 'big5':\n      buffer = Buffer.from((0, _uaoJs.encodeSync)(str), 'binary');\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return buffer;\n};\n\nvar _default = encode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  Enter: '\\r',\n  ArrowLeft: '\\x1b[D',\n  ArrowRight: '\\x1b[C',\n  ArrowUp: '\\x1b[A',\n  ArrowDown: '\\x1b[B',\n  PgUp: '\\x1b[5~',\n  PgDown: '\\x1b[6~',\n  Home: '\\x1b[1~',\n  End: '\\x1b[4~',\n  Backspace: '\\b',\n  CtrlC: '\\x03',\n  CtrlP: '\\x10',\n  CtrlU: '\\x15',\n  CtrlZ: '\\x1a'\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ArticleSelectQueryBuilder = exports.WhereType = exports.Article = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Article = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Article() {\n    (0, _classCallCheck2[\"default\"])(this, Article);\n    (0, _defineProperty2[\"default\"])(this, \"boardname\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"push\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"fixed\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"iterator\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"sendComment\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.content[0].str, 0, 6).trim();\n      return authorArea === \"作者\";\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var article = new Article();\n      var str = line.str;\n      article.id = +(0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim();\n      article.push = (0, _char.substrWidth)(\"dbcs\", str, 9, 2).trim();\n      article.date = (0, _char.substrWidth)(\"dbcs\", str, 11, 5).trim();\n      article.author = (0, _char.substrWidth)(\"dbcs\", str, 17, 12).trim();\n      article.status = (0, _char.substrWidth)(\"dbcs\", str, 30, 2).trim();\n      article.title = (0, _char.substrWidth)(\"dbcs\", str, 32).trim();\n      article.fixed = (0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim().includes(\"★\");\n      return article;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new ArticleSelectQueryBuilder(bot);\n    }\n  }]);\n  return Article;\n}();\n\nexports.Article = Article;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Boardname\"] = \"boardname\";\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Push\"] = \"push\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar ArticleSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(ArticleSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(ArticleSelectQueryBuilder);\n\n  function ArticleSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ArticleSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"boardname\", \"\");\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ArticleSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Boardname:\n          if (this.boardname !== \"\") {\n            console.warn(\"Cannot call where with type \\\"\".concat(type, \"\\\" multiple times\"));\n          } else {\n            this.boardname = condition;\n          }\n\n          break;\n\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Push:\n          this.wheres.push({\n            type: \"Z\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: \"a\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: \"/\",\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    }\n    /**\n     * *** This API is STATEFUL. ***\n     \tUsed when search article.\n    \tReturns an iterator of article list.\n     */\n\n  }, {\n    key: \"getIterator\",\n    value: function getIterator() {\n      var _this2 = this;\n\n      var last_id;\n      var iterator = {\n        next: function () {\n          var _next = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n            var found, articles, i, line, article;\n            return _regenerator[\"default\"].wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n\n                    if (!(last_id === 1)) {\n                      _context.next = 3;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 3:\n                    if (last_id) {\n                      _context.next = 16;\n                      break;\n                    }\n\n                    _context.next = 6;\n                    return _this2.bot.enterBoardByName(_this2.boardname);\n\n                  case 6:\n                    _context.next = 8;\n                    return _this2.bot.send(_this2.getQuery());\n\n                  case 8:\n                    found = _context.sent;\n                    console.log(\"found\", found);\n\n                    if (found) {\n                      _context.next = 12;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 12:\n                    _context.next = 14;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.End));\n\n                  case 14:\n                    _context.next = 18;\n                    break;\n\n                  case 16:\n                    _context.next = 18;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.PgUp));\n\n                  case 18:\n                    articles = [];\n                    i = 3;\n\n                  case 20:\n                    if (!(i <= 22)) {\n                      _context.next = 30;\n                      break;\n                    }\n\n                    line = _this2.bot.line[i]; // console.log(\"line\", line);\n\n                    if (!(line.str.trim() === \"\")) {\n                      _context.next = 24;\n                      break;\n                    }\n\n                    return _context.abrupt(\"break\", 30);\n\n                  case 24:\n                    article = Article.fromLine(line);\n                    article.boardname = _this2.boardname;\n                    articles.push(article);\n\n                  case 27:\n                    i++;\n                    _context.next = 20;\n                    break;\n\n                  case 30:\n                    // console.log(\"articles\", articles);\n                    last_id = articles[0].id;\n                    return _context.abrupt(\"return\", {\n                      value: articles,\n                      done: false\n                    });\n\n                  case 34:\n                    _context.prev = 34;\n                    _context.t0 = _context[\"catch\"](0);\n                    return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n                  case 37:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 34]]);\n          }));\n\n          function next() {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      };\n      return iterator;\n    }\n    /**\n     * *** This API is STATEFUL. ***\n     *  We use this API when clicking an article item of search article list.\n    \tReturns an article.\n     */\n\n  }, {\n    key: \"getOneInSearch\",\n    value: function () {\n      var _getOneInSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var article;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 2:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context2.next = 7;\n                return this.bot.getContent();\n\n              case 7:\n                article.content = _context2.sent;\n\n                if (article.hasHeader()) {\n                  article.author = (0, _char.substrWidth)(\"dbcs\", this.bot.line[0].str, 7, 50).trim();\n                  article.title = (0, _char.substrWidth)(\"dbcs\", this.bot.line[1].str, 7).trim();\n                  article.timestamp = (0, _char.substrWidth)(\"dbcs\", this.bot.line[2].str, 7).trim();\n                } // go back to search\n\n\n                _context2.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.ArrowLeft));\n\n              case 11:\n                return _context2.abrupt(\"return\", article);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOneInSearch() {\n        return _getOneInSearch.apply(this, arguments);\n      }\n\n      return getOneInSearch;\n    }() // Used when click in boarditem, we will only specify boardname.\n\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var found, id, articles, i, line, article, _i, _i2;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context3.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context3.sent;\n\n                if (found) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context3.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                articles = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === \"\")) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                return _context3.abrupt(\"break\", 23);\n\n              case 17:\n                article = Article.fromLine(line);\n                article.boardname = this.boardname;\n                articles.push(article);\n\n              case 20:\n                i++;\n                _context3.next = 13;\n                break;\n\n              case 23:\n                if (!(articles.length >= 2 && articles[0].id === 0)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                _i = 1;\n\n              case 25:\n                if (!(_i < articles.length)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                if (!(articles[_i].id !== 0)) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                articles[0].id = articles[_i].id - _i;\n                return _context3.abrupt(\"break\", 32);\n\n              case 29:\n                _i++;\n                _context3.next = 25;\n                break;\n\n              case 32:\n                for (_i2 = 1; _i2 < articles.length; _i2++) {\n                  articles[_i2].id = articles[_i2 - 1].id + 1;\n                }\n\n                _context3.next = 35;\n                return this.bot.enterIndex();\n\n              case 35:\n                return _context3.abrupt(\"return\", articles.reverse());\n\n              case 36:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var found, article;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context4.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context4.sent;\n\n                if (found) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", void 0);\n\n              case 7:\n                _context4.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context4.next = 14;\n                return this.bot.getContent();\n\n              case 14:\n                article.content = _context4.sent;\n\n                if (article.hasHeader()) {\n                  article.author = (0, _char.substrWidth)(\"dbcs\", this.bot.line[0].str, 7, 50).trim();\n                  article.title = (0, _char.substrWidth)(\"dbcs\", this.bot.line[1].str, 7).trim();\n                  article.timestamp = (0, _char.substrWidth)(\"dbcs\", this.bot.line[2].str, 7).trim();\n                }\n\n                _context4.next = 18;\n                return this.bot.enterIndex();\n\n              case 18:\n                return _context4.abrupt(\"return\", article);\n\n              case 19:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }, {\n    key: \"getOneIterator\",\n    value: function () {\n      var _getOneIterator = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var found, article;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context5.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context5.sent;\n\n                if (found) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", void 0);\n\n              case 7:\n                _context5.prev = 7;\n                _context5.next = 10;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 10:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context5.next = 15;\n                return this.bot.getContentIterator();\n\n              case 15:\n                article.iterator = _context5.sent;\n                article.sendComment = this.sendComment;\n                return _context5.abrupt(\"return\", article);\n\n              case 20:\n                _context5.prev = 20;\n                _context5.t0 = _context5[\"catch\"](7);\n                return _context5.abrupt(\"return\", Promise.reject(_context5.t0));\n\n              case 23:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[7, 20]]);\n      }));\n\n      function getOneIterator() {\n        return _getOneIterator.apply(this, arguments);\n      }\n\n      return getOneIterator;\n    }() // assume that we are in an article now.\n    // send comment in article\n    //  arg = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendComment\",\n    value: function () {\n      var _sendComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(arg, bot) {\n        var text, lenPerLine, seperateText, _iterator, _step, t;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (bot.state.login) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                text = arg.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 6:\n                lenPerLine = 52; // 中文字的長度是二\n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context6.prev = 9;\n                _iterator = _createForOfIteratorHelper(text);\n                _context6.prev = 11;\n\n                _iterator.s();\n\n              case 13:\n                if ((_step = _iterator.n()).done) {\n                  _context6.next = 35;\n                  break;\n                }\n\n                t = _step.value;\n                _context6.next = 17;\n                return bot.send(\"X\");\n\n              case 17:\n                console.log(\"after pressing X\", bot.screen);\n\n                if (!bot.line[23].str.includes(\"您覺得這篇文章\")) {\n                  _context6.next = 21;\n                  break;\n                }\n\n                _context6.next = 21;\n                return bot.send(\"\".concat(arg.type));\n\n              case 21:\n                if (!(bot.line[22].str.includes(\"使用 → 加註方式\") || bot.line[23].str.includes(bot.state.username))) {\n                  _context6.next = 29;\n                  break;\n                }\n\n                _context6.next = 24;\n                return bot.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 24:\n                _context6.next = 26;\n                return bot.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 26:\n                console.log(\"after send \", bot.screen);\n                _context6.next = 30;\n                break;\n\n              case 29:\n                return _context6.abrupt(\"return\", Promise.reject(\"comment failed\"));\n\n              case 30:\n                _context6.next = 32;\n                return bot.send(\"\".concat(_utils.keymap.Enter));\n\n              case 32:\n                console.log(\"after enter \", bot.screen);\n\n              case 33:\n                _context6.next = 13;\n                break;\n\n              case 35:\n                _context6.next = 40;\n                break;\n\n              case 37:\n                _context6.prev = 37;\n                _context6.t0 = _context6[\"catch\"](11);\n\n                _iterator.e(_context6.t0);\n\n              case 40:\n                _context6.prev = 40;\n\n                _iterator.f();\n\n                return _context6.finish(40);\n\n              case 43:\n                return _context6.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 46:\n                _context6.prev = 46;\n                _context6.t1 = _context6[\"catch\"](9);\n                return _context6.abrupt(\"return\", Promise.reject(_context6.t1));\n\n              case 49:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[9, 46], [11, 37, 40, 43]]);\n      }));\n\n      function sendComment(_x, _x2) {\n        return _sendComment.apply(this, arguments);\n      }\n\n      return sendComment;\n    }()\n  }]);\n  return ArticleSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.ArticleSelectQueryBuilder = ArticleSelectQueryBuilder;\nvar _default = Article;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar QueryBuilder = function QueryBuilder() {\n  (0, _classCallCheck2[\"default\"])(this, QueryBuilder);\n};\n\nexports.QueryBuilder = QueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.BoardSelectQueryBuilder = exports.Entry = exports.WhereType = exports.Board = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Board = /*#__PURE__*/function () {\n  function Board() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    (0, _classCallCheck2[\"default\"])(this, Board);\n    (0, _defineProperty2[\"default\"])(this, \"name\", '');\n    (0, _defineProperty2[\"default\"])(this, \"id\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"unread\", false);\n    (0, _defineProperty2[\"default\"])(this, \"category\", '');\n    (0, _defineProperty2[\"default\"])(this, \"flag\", '');\n    (0, _defineProperty2[\"default\"])(this, \"title\", '');\n    (0, _defineProperty2[\"default\"])(this, \"users\", '');\n    (0, _defineProperty2[\"default\"])(this, \"admin\", '');\n    (0, _defineProperty2[\"default\"])(this, \"folder\", false);\n    (0, _defineProperty2[\"default\"])(this, \"divider\", false);\n    this.name = name;\n  }\n\n  (0, _createClass2[\"default\"])(Board, null, [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 3, 4).trim();\n      board.unread = (0, _char.substrWidth)('dbcs', str, 8, 2).trim() === 'ˇ';\n      board.name = (0, _char.substrWidth)('dbcs', str, 10, 12).trim();\n      board.category = (0, _char.substrWidth)('dbcs', str, 23, 4).trim();\n      board.flag = (0, _char.substrWidth)('dbcs', str, 28, 2).trim();\n\n      switch (board.flag) {\n        case '□':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30).replace(/\\s+$/, '');\n          board.folder = true;\n          break;\n\n        case '--':\n          board.divider = true;\n          break;\n\n        case 'Σ':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          board.folder = true;\n          break;\n\n        case '◎':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          break;\n\n        default:\n          console.warn(\"Unknown board flag. line.str: \\\"\".concat(str, \"\\\"\"));\n      }\n\n      return board;\n    }\n  }, {\n    key: \"fromClassLine\",\n    value: function fromClassLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 15, 2);\n      board.title = (0, _char.substrWidth)('dbcs', str, 20, 29).replace(/\\s+$/, '');\n      board.admin = (0, _char.substrWidth)('dbcs', str, 61).trim();\n      board.folder = true;\n      return board;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new BoardSelectQueryBuilder(bot);\n    }\n  }]);\n  return Board;\n}();\n\nexports.Board = Board;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Entry\"] = \"entry\";\n  WhereType[\"Prefix\"] = \"prefix\";\n  WhereType[\"Offset\"] = \"offset\";\n  WhereType[\"Offsets\"] = \"offsets\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar Entry;\nexports.Entry = Entry;\n\n(function (Entry) {\n  Entry[\"Class\"] = \"class\";\n  Entry[\"Favorite\"] = \"favorite\";\n  Entry[\"Hot\"] = \"hot\";\n})(Entry || (exports.Entry = Entry = {}));\n\nvar BoardSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(BoardSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(BoardSelectQueryBuilder);\n\n  function BoardSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, BoardSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"entry\", Entry.Class);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"prefix\", '');\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"offsets\", []);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(BoardSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type.toLowerCase()) {\n        case WhereType.Entry:\n          this.entry = condition.toLowerCase();\n          break;\n\n        case WhereType.Prefix:\n          this.prefix = condition;\n          break;\n\n        case WhereType.Offset:\n          this.offsets.push(condition);\n          break;\n\n        case WhereType.Offsets:\n          this.offsets = condition.slice();\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n          break;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, boards, i, line, board, stopLoop, _i, _line, _board;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.prefix !== '')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.getByPrefix(this.prefix);\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n                _context.t0 = this.entry;\n                _context.next = _context.t0 === Entry.Class ? 7 : _context.t0 === Entry.Favorite ? 11 : _context.t0 === Entry.Hot ? 15 : 19;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return this.bot.enterBoardByOffset(this.offsets);\n\n              case 9:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 11:\n                _context.next = 13;\n                return this.bot.enterFavorite(this.offsets);\n\n              case 13:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 15:\n                _context.next = 17;\n                return this.bot.enterBoardByOffset([-1].concat((0, _toConsumableArray2[\"default\"])(this.offsets)));\n\n              case 17:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 19:\n                boards = [];\n\n                if (!found) {\n                  _context.next = 56;\n                  break;\n                }\n\n                if (!(this.entry === Entry.Class && this.offsets.length === 0)) {\n                  _context.next = 34;\n                  break;\n                }\n\n                i = 7;\n\n              case 23:\n                if (!(i < 23)) {\n                  _context.next = 32;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 27;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 32);\n\n              case 27:\n                board = Board.fromClassLine(line);\n                boards.push(board);\n\n              case 29:\n                i++;\n                _context.next = 23;\n                break;\n\n              case 32:\n                _context.next = 56;\n                break;\n\n              case 34:\n                if (!true) {\n                  _context.next = 56;\n                  break;\n                }\n\n                stopLoop = false;\n                _i = 3;\n\n              case 37:\n                if (!(_i < 23)) {\n                  _context.next = 50;\n                  break;\n                }\n\n                _line = this.bot.line[_i];\n\n                if (!(_line.str.trim() === '')) {\n                  _context.next = 42;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 42:\n                _board = Board.fromLine(_line);\n\n                if (!(_board.id !== boards.length + 1)) {\n                  _context.next = 46;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 46:\n                boards.push(_board);\n\n              case 47:\n                _i++;\n                _context.next = 37;\n                break;\n\n              case 50:\n                if (!stopLoop) {\n                  _context.next = 52;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 56);\n\n              case 52:\n                _context.next = 54;\n                return this.bot.send(_utils.keymap.PgDown);\n\n              case 54:\n                _context.next = 34;\n                break;\n\n              case 56:\n                _context.next = 58;\n                return this.bot.enterIndex();\n\n              case 58:\n                return _context.abrupt(\"return\", boards);\n\n              case 59:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var res;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.get();\n\n              case 2:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res.length ? res[0] : void 0);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }, {\n    key: \"getByPrefix\",\n    value: function () {\n      var _getByPrefix = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(prefix) {\n        var boards, resultLine0, col, row, width, line, boardname, searchStr, searchInput;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.send(\"s\".concat(prefix, \" \"));\n\n              case 2:\n                boards = [];\n                resultLine0 = this.bot.line[3].str;\n\n                if (!(resultLine0.toLowerCase().indexOf(prefix.toLowerCase()) === 0)) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                col = 0, row = 0;\n                /* TODO: Use other way instead of the constant 15. */\n\n                width = 15;\n\n                while (width < resultLine0.length && resultLine0[width] !== ' ') {\n                  width += 1;\n                }\n\n                while (width < resultLine0.length && resultLine0[width] === ' ') {\n                  width += 1;\n                }\n\n              case 9:\n                if (!true) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                line = this.bot.line[row + 3];\n                boardname = (0, _char.substrWidth)('dbcs', line.str, col * width, width).trim();\n\n                if (!(boardname !== '')) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                boards.push(new Board(boardname));\n                _context3.next = 17;\n                break;\n\n              case 16:\n                return _context3.abrupt(\"break\", 25);\n\n              case 17:\n                row += 1;\n\n                if (!(row == 20)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                col += 1;\n                row = 0;\n                /* TODO: Use other way instead of the constant 80. */\n                // Optimization : only get 1 page.\n\n                if (!((col + 1) * width > 80)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"break\", 25);\n\n              case 23:\n                _context3.next = 9;\n                break;\n\n              case 25:\n                _context3.next = 30;\n                break;\n\n              case 27:\n                searchStr = this.bot.line[1].str;\n                searchInput = (0, _char.substrWidth)('dbcs', searchStr, 34, 15).trim();\n\n                if (searchInput.toLowerCase().indexOf(prefix.toLowerCase()) === 0) {\n                  boards.push(new Board(searchInput));\n                }\n\n              case 30:\n                _context3.next = 32;\n                return this.bot.send(_utils.keymap.CtrlC);\n\n              case 32:\n                return _context3.abrupt(\"return\", boards);\n\n              case 33:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getByPrefix(_x) {\n        return _getByPrefix.apply(this, arguments);\n      }\n\n      return getByPrefix;\n    }()\n  }]);\n  return BoardSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.BoardSelectQueryBuilder = BoardSelectQueryBuilder;\nvar _default = Board;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.MailSelectQueryBuilder = exports.WhereType = exports.Mail = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Mail = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Mail() {\n    (0, _classCallCheck2[\"default\"])(this, Mail);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)('dbcs', this.content[0].str, 0, 6).trim();\n      return authorArea === '作者';\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var mail = new Mail();\n      var str = line.str;\n      mail.id = +(0, _char.substrWidth)('dbcs', str, 1, 5).trim();\n      mail.date = (0, _char.substrWidth)('dbcs', str, 9, 5).trim();\n      mail.author = (0, _char.substrWidth)('dbcs', str, 15, 12).trim();\n      mail.status = (0, _char.substrWidth)('dbcs', str, 30, 2).trim();\n      mail.title = (0, _char.substrWidth)('dbcs', str, 33).trim();\n      return mail;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new MailSelectQueryBuilder(bot);\n    }\n  }]);\n  return Mail;\n}();\n\nexports.Mail = Mail;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar MailSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(MailSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(MailSelectQueryBuilder);\n\n  function MailSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MailSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MailSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: 'a',\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: '/',\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, id, mails, i, line, mail;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context.sent;\n\n                if (found) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                mails = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 22);\n\n              case 17:\n                mail = Mail.fromLine(line);\n                mails.push(mail);\n\n              case 19:\n                i++;\n                _context.next = 13;\n                break;\n\n              case 22:\n                _context.next = 24;\n                return this.bot.enterIndex();\n\n              case 24:\n                return _context.abrupt(\"return\", mails.reverse());\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var found, mail;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context2.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context2.sent;\n\n                if (found) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", void 0);\n\n              case 7:\n                _context2.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                mail = new Mail();\n                mail.id = this.id;\n                _context2.next = 13;\n                return this.bot.getContent();\n\n              case 13:\n                mail.content = _context2.sent;\n\n                if (mail.hasHeader()) {\n                  mail.author = (0, _char.substrWidth)('dbcs', this.bot.line[0].str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)('dbcs', this.bot.line[1].str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)('dbcs', this.bot.line[2].str, 7).trim();\n                }\n\n                _context2.next = 17;\n                return this.bot.enterIndex();\n\n              case 17:\n                return _context2.abrupt(\"return\", mail);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }]);\n  return MailSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.MailSelectQueryBuilder = MailSelectQueryBuilder;\nvar _default = Mail;\nexports[\"default\"] = _default;","import { useState } from 'react';\nimport Cookies from 'universal-cookie';\nimport constate from \"constate\";\n\nconst cookies = new Cookies();\n\nconst useUser = () => {\n    const [user,setUser] = useState(cookies.get('user')); \n\n    return {\n      user,setUser\n    };\n  };\n\nexport const [UserProvider, useUserContext] = constate(useUser);\n","import { useState } from \"react\";\nimport constate from \"constate\";\nimport Ptt from \"ptt-client\";\nimport usePrev from \"./usePrev\";\n\nconst useBot = () => {\n\t\n\tconsole.info('new useBot()')\n\tconst [bot] = useState(new Ptt());\n\t\n\tconst [botState, setBotState] = useState(bot.state);\n\tconst prevBotState = usePrev(botState);\n\n\tbot.on(\"connect\", () => {\n\t\t//console.log(\"bot connected\");\n\t\tsetBotState({...bot.state});\n\t});\n\n\tbot.on(\"disconnect\", () => {\n\t\t//console.log(\"bot disconnected\");\n\t\tsetBotState({...bot.state});\n\t});\n\n\tbot.on(\"websocket_error\", () => {\n\t\tconsole.log(\"websocket_error\");\n\t\tsetBotState({...bot.state});\n\t});\n\n\tlet busy = false;\n\n\t// login function\n\tconst login = async arg => {\n\t\tconst username = arg.username,\n\t\t\tpassword = arg.password;\n\t\tlet res = await bot.login(username, password, true);\n\t\tif (res) setBotState({ ...botState, login: true });\n\t\treturn res;\n\t};\n\n\t// bot command\n\tconst executeCommand = async command => {\n\t\tif (busy) {\n\t\t\t// setSnackbarContent({severity:'info',text:'等！'})\n\t\t\t// setIsSnackbarOpen(true)\n\t\t\treturn Promise.reject('bot is busy!');\n\t\t}\n\t\tbusy = true;\n\t\t//console.log(\"bot command : \", command);\n\t\ttry {\n\t\t\t// not connected\n\t\t\tif (!botState.connect) return Promise.reject('not login!');\n\t\t\t// go back to index\n\t\t\tif (command.type === \"index\") {\n\t\t\t\tawait bot.enterIndex();\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// go to top of article\n\t\t\tif (command.type === \"top\") {\n\t\t\t\tawait bot.goToTop();\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// login\n\t\t\tif (command.type === \"login\") {\n\t\t\t\tif (botState.login) return true;\n\t\t\t\tlet res = await login(command.arg);\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\t// articleList\n\t\t\tif (command.type === \"select\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.get();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t\n\t\t\t// content \n\t\t\tif (command.type === \"content\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.getOne();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tif(command.type === \"contentIterator\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.getOneIterator();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t\n\n\t\t} catch(err) {\n\t\t\tbusy = false;\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tbot: bot,\n\t\tbotState: botState,\n\t\tprevBotState: prevBotState,\n\t\texecuteCommand: executeCommand\n\t};\n};\n\nexport const [BotProvider, useBotContext] = constate(useBot);\n","import { useRef,useEffect} from \"react\";\nexport default function usePrev(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }","import { useState } from \"react\";\nimport constate from \"constate\";\n\nconst useProgress = () => {\n\tconst [isSnackbarOpen,setIsSnackbarOpen] = useState(false);\n\tconst [snackbarContent,setSnackbarContent] = useState({\n\t\tseverity:\"\",\n\t\ttext:\"\",\n\t});\n\t\n\n\tconst info = {\n\t\tisSnackbarOpen:isSnackbarOpen,\n\t\tsetIsSnackbarOpen:setIsSnackbarOpen,\n\t\tsnackbarContent:snackbarContent,\n\t\tsetSnackbarContent:setSnackbarContent,\n\t};\n\treturn info;\n};\n\nexport const [ProgressProvider, useProgressContext] = constate(\n\tuseProgress\n);\n","import React, { useState, useEffect, useCallback } from \"react\";\n// import Avatar from '@material-ui/core/Avatar';\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport { useUserContext } from \"./UserContext\";\nimport { useBotContext } from \"./BotContext\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport Link from \"@material-ui/core/Link\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { useForm } from \"react-hook-form\";\nimport Cookies from \"universal-cookie\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tflexDirection: \"column\"\n\t},\n\tpaperform: {\n\t\twidth: \"400px\",\n\t\tmargin: theme.spacing(8, 4),\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\"\n\t},\n\tpaperlogging: {\n\t\tminWidth: \"12vw\",\n\t\theight: \"9vh\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tposition: \"absolute\",\n\t\tmarginTop: \"25vh\",\n\t\tzIndex: theme.zIndex.drawer + 2\n\t},\n\tpaperreconnect: {\n\t\tpadding: \"12px\",\n\t\tminWidth: \"20vw\",\n\t\theight: \"15vh\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\"\n\t},\n\treconnectText: {},\n\treconnectButton: {\n\t\talignSelf: \"flex-end\"\n\t},\n\tform: {\n\t\twidth: \"80%\",\n\t\tmarginTop: theme.spacing(1)\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2)\n\t},\n\tsignin: {\n\t\tmarginTop: theme.spacing(2)\n\t},\n\tbackdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: \"#fff\"\n\t},\n\tcircle: {\n\t\tmarginRight: \"9px\"\n\t},\n\tinstallExtension: {\n\t\twidth: \"400px\"\n\t}\n}));\n\nexport default function Login() {\n\tconst classes = useStyles();\n\n\tconst { user, setUser } = useUserContext();\n\tconst BotContext = useBotContext();\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\tconst { register, handleSubmit } = useForm();\n\n\tconst onSubmit = async (data, e) => {\n\t\te.preventDefault();\n\t\tlet myUser = { username: data.username, password: data.password };\n\t\tlet loginRes = await loginCallback(myUser);\n\t\tif (loginRes) {\n\t\t\t// save it in cookie\n\t\t\tconst cookies = new Cookies();\n\t\t\tcookies.set(\"user\", myUser);\n\t\t\tsetUser(myUser);\n\t\t}\n\t};\n\n\tconst loginCallback = useCallback(\n\t\tasync myUser => {\n\t\t\t//console.log(myUser);\n\t\t\tsetOpenForm(false);\n\t\t\tsetOpenLoadingCircle(true);\n\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\ttype: \"login\",\n\t\t\t\targ: myUser\n\t\t\t});\n\t\t\tif (res) {\n\t\t\t\t//console.log(\"login success\");\n\t\t\t\tsetOpenBackDrop(false);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\t//console.log(\"login fail\");\n\t\t\t\tsetSnackbarContent({\n\t\t\t\t\tseverity: \"error\",\n\t\t\t\t\ttext: \"帳密輸入錯誤！！\"\n\t\t\t\t});\n\t\t\t\tsetIsSnackbarOpen(true);\n\t\t\t\tsetOpenForm(true);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[BotContext]\n\t);\n\tconst handleReconnect = () => {\n\t\tBotContext.bot.reconnect();\n\t};\n\tconst [openBackDrop, setOpenBackDrop] = useState(!user);\n\tconst [openLoadingCircle, setOpenLoadingCircle] = useState(false);\n\tconst [openForm, setOpenForm] = useState(true);\n\tconst [openReconnect, setOpenReconnect] = useState(false);\n\n\tuseEffect(() => {\n\t\tasync function tryLogin() {\n\t\t\tawait loginCallback(user);\n\t\t}\n\t\tconsole.log(\"botState:\", BotContext.botState);\n\t\t//console.log(\"prev botState:\", BotContext.prevBotState);\n\t\tif (user) {\n\t\t\tif (BotContext.prevBotState === undefined) return;\n\t\t\tif (\n\t\t\t\tBotContext.botState.connect &&\n\t\t\t\t!BotContext.prevBotState.connect\n\t\t\t) {\n\t\t\t\tsetOpenReconnect(false);\n\t\t\t\ttryLogin();\n\t\t\t} else if (\n\t\t\t\tBotContext.prevBotState.connect &&\n\t\t\t\t!BotContext.botState.connect\n\t\t\t) {\n\t\t\t\t// disconnected\n\t\t\t\tsetOpenBackDrop(true);\n\t\t\t\tsetOpenReconnect(true);\n\t\t\t}\n\t\t}\n\t}, [user, BotContext.botState, BotContext.prevBotState, loginCallback]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t{openLoadingCircle && (\n\t\t\t\t<Paper className={classes.paperlogging}>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\tclassName={classes.circle}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t{!BotContext.connect\n\t\t\t\t\t\t\t? \"連線中\"\n\t\t\t\t\t\t\t: !BotContext.login\n\t\t\t\t\t\t\t? \"登入中\"\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Paper>\n\t\t\t)}\n\t\t\t<Backdrop className={classes.backdrop} open={openBackDrop}>\n\t\t\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t{openReconnect && (\n\t\t\t\t\t\t<Paper className={classes.paperreconnect}>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\t\tclassName={classes.reconnectText}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t您斷線了\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tclassName={classes.reconnectButton}\n\t\t\t\t\t\t\t\tonClick={handleReconnect}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t重新連線\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{BotContext.botState.wsError && (\n\t\t\t\t\t\t<Card className={classes.installExtension}>\n\t\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h2\" gutterBottom>\n\t\t\t\t\t\t\t\t\t尚未安裝插件\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\" component=\"p\">\n\t\t\t\t\t\t\t\t\t因為技術問題，目前只能先請您安裝\n\t\t\t\t\t\t\t\t\t<Link href=\"https://github.com/ipodtouch64g/pass-thorugh-ptt-wall-wss\">\n\t\t\t\t\t\t\t\t\t\t穿牆插件\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"Person Bowing\">\n\t\t\t\t\t\t\t\t\t\t🙇\n\t\t\t\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" component=\"p\">\n\t\t\t\t\t\t\t\t\t(PTT的WebSocket只容許特定Origin，瀏覽器不支援custom\n\t\t\t\t\t\t\t\t\theader\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Loudly Crying Face\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t😭\n\t\t\t\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{!BotContext.botState.wsError && openForm && (\n\t\t\t\t\t\t<Paper className={classes.paperform}>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"h4\"\n\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\tclassName={classes.signin}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t登入PTT\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\tlabel=\"帳號\"\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"username\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tlabel=\"密碼\"\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"remember\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel=\"記住我\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t登入\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\t\t\t\t</Grid>\n\t\t\t</Backdrop>\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport { ListItem, ListItemText } from \"@material-ui/core\";\nimport Image from \"material-ui-image\";\n\nexport default function ArticleText(props) {\n\tconst text = props.text;\n\tconst maxWidth = props.maxWidth;\n\tlet t = text;\n\tlet ti = (\n\t\t<ListItemText style={{ whiteSpace: \"pre-wrap\" }}>{t}</ListItemText>\n\t);\n\n\t// url\n\tlet url = text.match(\n\t\t/(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/\n\t);\n\t// change text if hyperlink exists\n\tif (url) {\n\t\tlet hyperlink = (\n\t\t\t<a\n\t\t\t\tstyle={{ color: \"#ffffff\", marginLeft: \"-4px\" }}\n\t\t\t\thref={url[0]}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t>\n\t\t\t\t{url[0]}\n\t\t\t</a>\n\t\t);\n\t\tti = (\n\t\t\t<ListItemText style={{ whiteSpace: \"pre-wrap\" }}>\n\t\t\t\t{t.substring(0, t.indexOf(url[0]))} {hyperlink}{\" \"}\n\t\t\t\t{t.substring(t.indexOf(url[0]) + url[0].length)}\n\t\t\t</ListItemText>\n\t\t);\n\t}\n\n\t// url image\n\tconst imgType = [\".jpg\", \".gif\", \".png\"];\n\tlet img;\n\tif (url && imgType.indexOf(url[0].slice(-4)) === 0) img = url[0];\n\n\t// imgur with no extension\n\tlet imgur = text.match(/imgur.com\\/[0-9a-zA-Z]{7}/);\n\t// Issue: we have no idea what the extension will be.\n\tif (imgur) img = \"https://\" + imgur[0] + \".jpg\";\n\t// console.log(\"url\", url, \"img\", img, \"t\", t);\n\t// should proper place image\n\tif (img) {\n\t\treturn (\n\t\t\t<ListItem\n\t\t\t\tdisableGutters={true}\n\t\t\t\tstyle={{\n\t\t\t\t\twhiteSpace: \"pre\",\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\tminHeight: \"100%\",\n\t\t\t\t\tminWidth: \"100%\",\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\theight: \"auto\",\n\t\t\t\t\talignItems: \"flex-start\"\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{ti}\n\t\t\t\t<Image\n\t\t\t\t\tstyle={{\n                        backgroundColor: \"none\",\n                        paddingTop:'0',\n\t\t\t\t\t}}\n\t\t\t\t\timageStyle={{\n\t\t\t\t\t\tdisplay: \"block\",\n                        height: 'auto',\n                        top:'0',\n                        left:'0',\n                        position:'relative',\n                        width: '100%',\n                       \n\t\t\t\t\t}}\n\t\t\t\t\tsrc={img}\n\t\t\t\t/>\n\t\t\t</ListItem>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<ListItem disableGutters={true} style={{ whiteSpace: \"pre\" }}>\n\t\t\t\t{ti}\n\t\t\t</ListItem>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { ListItem, ListItemText } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport ArticleText from \"./ArticleText\";\n\nconst ArticleCommentItem = props => {\n\tconst theme = useTheme();\n\tlet commentLine = props.commentLine;\n\treturn (\n\t\t<ListItem disableGutters={true} divider={true} key={commentLine.key}>\n\t\t\t{commentLine.type ? (\n\t\t\t\t<ListItemText\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tflexBasis: \"5%\",\n\t\t\t\t\t\tcolor:\n\t\t\t\t\t\t\tcommentLine.type === \"噓\"\n\t\t\t\t\t\t\t\t? theme.palette.error.dark\n\t\t\t\t\t\t\t\t: commentLine.type === \"推\"\n\t\t\t\t\t\t\t\t? theme.palette.primary.dark\n\t\t\t\t\t\t\t\t: theme.palette.secondary.dark\n\t\t\t\t\t}}\n\t\t\t\t\tprimary={commentLine.type}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t\t{commentLine.author ? (\n\t\t\t\t<ListItemText\n\t\t\t\t\tstyle={{ flexBasis: \"15%\" }}\n\t\t\t\t\tprimary={commentLine.author}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t\t<ListItemText style={{ flexBasis: \"70%\" }}>\n\t\t\t\t<ArticleText\n\t\t\t\t\ttext={commentLine.text}\n\t\t\t\t\tkey={commentLine.key}\n\t\t\t\t/>\n\t\t\t</ListItemText>\n\n\t\t\t{commentLine.timestamp ? (\n\t\t\t\t<ListItemText\n\t\t\t\t\tstyle={{ flexBasis: \"10%\" }}\n\t\t\t\t\tprimary={commentLine.floor + \"F\"}\n\t\t\t\t\tsecondary={commentLine.timestamp}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t</ListItem>\n\t);\n};\nexport default ArticleCommentItem;\n","import React from \"react\";\nimport ArticleText from './ArticleText'\nexport default function ArticleContentItem(props) {\n\tconst text = props.text;\n\tconst myKey = props.key;\n\treturn (<ArticleText key={myKey} maxWidth={\"50vw\"} text={text}/>)\n}\n","import { Article as ArticleModel } from \"ptt-client/dist/sites/ptt/model\";\nimport ArticleCommentItem from \"../ArticleCommentItem\";\nimport ArticleContentItem from \"../ArticleContentItem\";\nimport React from \"react\";\nconst initArticle = async (articleItem, BotContext) => {\n\ttry {\n\t\tlet article = {\n\t\t\tinfo: {\n\t\t\t\tid: \"\",\n\t\t\t\taid: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\tboardname: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\ttitle: \"\",\n\t\t\t\tip: \"\"\n\t\t\t},\n\t\t\tlines: [],\n\t\t\titerator: null,\n\t\t\tsendComment: null\n\t\t};\n\t\tarticle.info.boardname = articleItem.boardname;\n\t\tarticle.info.id = articleItem.id;\n\t\tarticle.info.title = articleItem.title;\n\t\tarticle.info.author = articleItem.author;\n\n\t\tlet res = await getArticleResponseIterator(BotContext, article);\n\n\t\t// call the iterator to get info first\n\t\tarticle.iterator = res.iterator;\n\t\tlet firstPartOfContent = await article.iterator.next();\n\t\tfirstPartOfContent = firstPartOfContent.value;\n\t\t// parse header\n\t\tif (\n\t\t\tfirstPartOfContent.length > 0 &&\n\t\t\tfirstPartOfContent[0].str.includes(\"作者\")\n\t\t) {\n\t\t\tarticle.info.author = firstPartOfContent[0].str\n\t\t\t\t.substring(4, 50)\n\t\t\t\t.trim();\n\t\t\tarticle.info.timestamp = firstPartOfContent[2].str\n\t\t\t\t.substring(3)\n\t\t\t\t.trim();\n\t\t\t// get rid of first four lines\n\t\t\tfirstPartOfContent = firstPartOfContent.slice(4);\n\t\t}\n\t\t// parse other lines\n\t\t[article.lines, article.commentStartFloor] = parseArticleLines(\n\t\t\tfirstPartOfContent,\n\t\t\t1,\n\t\t\t0\n\t\t);\n\n\t\tarticle.sendComment = res.sendComment;\n\t\treturn article;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\nconst getArticleResponseIterator = async (BotContext, article) => {\n\tlet query = BotContext.bot\n\t\t.select(ArticleModel)\n\t\t.where(\"boardname\", article.info.boardname)\n\t\t.where(\"author\", article.info.author)\n\t\t.where(\"title\", article.info.title)\n\t\t.where(\"id\", article.info.id);\n\tconsole.log(\"q\", query);\n\n\tlet res = await BotContext.executeCommand({\n\t\ttype: \"contentIterator\",\n\t\targ: query\n\t});\n\tif (!res) return Promise.reject(\"getArticleResponse err.\");\n\tconsole.log(res);\n\treturn res;\n};\n\n\n// Get articleList based on searching criteria\n// criteria = { boardname:'',\n//  \t\t\ttitle:'',\n//   \t\t\tauthor:'',\n//    \t\t\tpush:'',\n//\t\t\t\tid:'',\n// \t\t\t  }\nconst getArticleList = async (BotContext, criteria) => {\n\ttry {\n\t\t// build query based on criteria\n\t\tlet query = BotContext.bot\n\t\t\t.select(ArticleModel)\n\t\t\t.where(\"boardname\", criteria.boardname);\n\t\tif (criteria.id) query.where(\"id\", criteria.id);\n\t\tif (criteria.title) query.where(\"title\", criteria.title);\n\t\tif (criteria.author) query.where(\"author\", criteria.author);\n\t\tif (criteria.push) query.where(\"push\", criteria.push);\n\n\t\tlet res = await BotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t});\n\t\treturn res;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\n// parse article line by line, generate parsed line items.\nconst parseArticleLines = (lines, commentStartFloor, index) => {\n\tlet res = [];\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tlet s = lines[i].str;\n\t\t// comment line\n\t\tif (s.match(/[推噓→]\\s+[\\w\\d]+\\s*:.+/)) {\n\t\t\t// type : '推','噓','→'\n\t\t\tlet commentLine = {\n\t\t\t\ttype: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\ttext: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\tkey: index\n\t\t\t};\n\t\t\t// todo : check has ip\n\t\t\tcommentLine.floor = commentStartFloor++;\n\t\t\tcommentLine.type = s[0];\n\t\t\tcommentLine.timestamp = s.substring(s.length - 11);\n\t\t\tlet firstColon = s.indexOf(\":\");\n\t\t\tcommentLine.author = s.substring(2, firstColon);\n\t\t\tcommentLine.text = s.substring(firstColon + 1, s.length - 11);\n\t\t\tres.push(<ArticleCommentItem key={index} commentLine={commentLine}/>);\n\t\t} else {\n\t\t\t// not comment line\n\t\t\tres.push(ArticleContentItem({ text: s, key: index }));\n\t\t}\n\t\tindex++;\n\t}\n\treturn [res, commentStartFloor];\n};\n\nexport {\n\tgetArticleList,\n\tinitArticle,\n\tparseArticleLines\n};\n","import React from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { getArticleList } from \"./utils/article\";\nimport { useTheme } from '@material-ui/core/styles';\n\nconst BoardItem = props => {\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\tconst theme = useTheme();\n\tconst handleClick = async e => {\n\t\t//console.log(\"boardItem click\", item, info, BotContext);\n\t\ttry {\n\t\t\tlet criteria = { boardname: item.name };\n\t\t\tinfo.setArticleList([]);\n\t\t\tinfo.sethaveSelectBoard(true);\n\t\t\t// scroll to top of this article: prevent reenter bug\n\t\t\tawait BotContext.executeCommand({ type: \"top\" });\n\t\t\t// very important to get back to index\n\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\tlet res = await getArticleList(BotContext, criteria);\n\n\t\t\tinfo.setArticleList(res);\n\t\t\tinfo.setBoardName(item.name);\n\t\t\tinfo.setIndex(0);\n\t\t\tinfo.setCriteria({});\n\t\t\t// clear search\n\t\t\tinfo.setArticleSearchList([]);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tbutton\n\t\t\tonClick={handleClick}\n\t\t\tkey={item.name}\n\t\t\tstyle={{\n\t\t\t\tborderLeft: \"solid\",\n\t\t\t\tborderLeftColor:\n\t\t\t\t\titem.users === \"爆!\"\n\t\t\t\t\t\t? theme.palette.error.dark\n\t\t\t\t\t\t: item.users === \"HOT\"\n\t\t\t\t\t\t? theme.palette.secondary.dark\n\t\t\t\t\t\t: theme.palette.primary.dark,\n\t\t\t\tborderLeftWidth:'6px',\n\t\t\t\theight: '10vh'\n\t\t\t}}\n\t\t\tdivider={true}\n\t\t>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.name}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.title}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t</ListItem>\n\t);\n};\n\nexport default BoardItem;\n","import { useState } from \"react\";\nimport constate from \"constate\";\n\nconst useArticleBoardInfo = () => {\n\tconst [boardName, setBoardName] = useState(\"\");\n\tconst [article, setArticle] = new useState({\n\t\tinfo: {\n\t\t\tid: \"\",\n\t\t\taid: \"\",\n\t\t\tauthor: \"\",\n\t\t\tboardname: \"\",\n\t\t\ttimestamp: \"\",\n\t\t\ttitle: \"\",\n\t\t},\n\t\tlines:[],\n\t\titerator:null,\n\t});\n\n\tconst [articleList, setArticleList] = useState([]);\n\tconst [index, setIndex] = useState(0);\n\tconst [articleSearchList, setArticleSearchList] = useState([]);\n\tconst [criteria, setCriteria] = useState({});\n\tconst [haveSelectBoard, sethaveSelectBoard] = useState(false);\n\tconst info = {\n\t\tboardName: boardName,\n\t\tsetBoardName: setBoardName,\n\t\tarticle: article,\n\t\tsetArticle: setArticle,\n\t\tarticleList: articleList,\n\t\tsetArticleList: setArticleList,\n\t\tindex: index,\n\t\tsetIndex: setIndex,\n\t\tarticleSearchList : articleSearchList,\n\t\tsetArticleSearchList : setArticleSearchList,\n\t\tcriteria: criteria,\n\t\tsetCriteria : setCriteria,\n\t\thaveSelectBoard:haveSelectBoard,\n\t\tsethaveSelectBoard:sethaveSelectBoard\n\t};\n\n\n\treturn info;\n};\n\nexport const [ArticleBoardInfoProvider, useArticleBoardInfoContext] = constate(\n\tuseArticleBoardInfo\n);\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { useBotContext } from \"./BotContext\";\nimport List from \"@material-ui/core/List\";\nimport BoardItem from \"./BoardItem\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\n// wierd import...\nimport { Board } from \"ptt-client/dist/sites/ptt/model\";\n\nexport default function BoardDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\theight: 'calc(100% - 48px)',\n\t\t\toverflow: \"auto\",\n\t\t\tmarginTop:'48px',\n\t\t\talignItems:'center',\n\t\t\tjustifyContent:'center',\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tlist: {\n\t\t\tpadding: \"0px\",\n\t\t\twidth: \"100%\"\n\t\t}\n\t}));\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [listItems, setListItems] = useState([]);\n\tconst [boardCache, setBoardCache] = useState(null);\n\n\tconst info = useArticleBoardInfoContext();\n\n\tlet searchCache = useRef({});\n\tlet selectedBoard = props.selectedBoard;\n\tlet searchBoardText = props.searchBoardText;\n\tlet setSelectedBoard = props.setSelectedBoard;\n\n\tuseEffect(() => {\n\t\tasync function getBoardInit() {\n\t\t\tlet boards = [\"hot\", \"favorite\"];\n\t\t\tlet newBC = {};\n\t\t\ttry {\n\t\t\t\tfor (let b of boards) {\n\t\t\t\t\tlet query = BotContext.bot.select(Board).where(\"entry\", b);\n\t\t\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\t\t\ttype: \"select\",\n\t\t\t\t\t\targ: query\n\t\t\t\t\t});\n\t\t\t\t\tlet lis = res.map((item, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BoardItem\n\t\t\t\t\t\t\t\tkey={item.name}\n\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\tinfo={info}\n\t\t\t\t\t\t\t\tBotContext={BotContext}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tnewBC[b] = lis;\n\t\t\t\t}\n\t\t\t\tsetBoardCache(newBC);\n\t\t\t\tsetSelectedBoard(\"hot\");\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t\t// get board list at the beginning\n\t\tif (BotContext.botState.login) {\n\t\t\tconsole.log(\"initBoards\");\n\t\t\tgetBoardInit();\n\t\t}\n\t}, [BotContext.botState.login]);\n\n\t// set to hot init\n\tuseEffect(() => {\n\t\tconst getBoard = async () => {\n\t\t\tlet lis;\n\t\t\tconsole.log(\"boardCache\", boardCache);\n\t\t\tconsole.log(\"selectedBoard\", selectedBoard);\n\t\t\tlis = boardCache[selectedBoard];\n\t\t\tconsole.log(\"lis\", lis);\n\t\t\tsetListItems(lis);\n\t\t};\n\t\tif (\n\t\t\tBotContext.botState.login &&\n\t\t\tboardCache &&\n\t\t\tselectedBoard.length > 0\n\t\t) {\n\t\t\tconsole.log(\"sb\");\n\t\t\tgetBoard();\n\t\t}\n\t}, [selectedBoard, boardCache, BotContext.botState.login]);\n\n\tuseEffect(() => {\n\t\tconst getBoard = async () => {\n\t\t\tlet lis;\n\t\t\tlet query;\n\n\t\t\tif (searchCache.current[searchBoardText]) {\n\t\t\t\tlis = searchCache.current[searchBoardText];\n\t\t\t} else {\n\t\t\t\tquery = BotContext.bot\n\t\t\t\t\t.select(Board)\n\t\t\t\t\t.where(\"prefix\", searchBoardText);\n\t\t\t}\n\n\t\t\tif (!lis) {\n\t\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\t\ttype: \"select\",\n\t\t\t\t\targ: query\n\t\t\t\t});\n\t\t\t\tif (!res) return false;\n\t\t\t\t// generate list items\n\t\t\t\tlis = res.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<BoardItem\n\t\t\t\t\t\t\tkey={item.name}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tinfo={info}\n\t\t\t\t\t\t\tBotContext={BotContext}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tsearchCache.current[searchBoardText] = lis;\n\t\t\t}\n\t\t\tsetListItems(lis);\n\t\t};\n\t\tif (BotContext.botState.login && searchBoardText.length > 0) {\n\t\t\tconsole.log(\"sbt\");\n\t\t\tgetBoard();\n\t\t}\n\t}, [searchBoardText, BotContext.botState.login]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton />\n\t\t\t\t)}\n\t\t\t</Grid>\n\t\t\t{listItems && <List className={classes.list}> {listItems} </List>}\n\t\t\t{!listItems && \"\"}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useBotContext } from \"./BotContext\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nexport default function BoardSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\tskeleton: {\n\t\t\tfontSize: \"24px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\troot: {\n\t\t\theight:'48px',\n\t\t\ttop:0,\n\t\t\tleft:0,\n\t\t\tposition:'absolute',\n\t\t\tzIndex:'999999',\n\t\t\tborderBottom:'1px solid rgba(255, 255, 255, 0.12)',\n\t\t\talignItems:'center',\n\t\t\tjustifyContent:'center',\n\t\t},\n\t\tselect: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\twidth: \"100%\"\n\t\t},\n\t\ttabs: {\n\t\t\tflexBasis: \"85%\"\n\t\t},\n\t\ttab: {\n\t\t\tfontSize: \"0.8rem\",\n\t\t\tminWidth: \"50%\"\n\t\t},\n\t\tsearchBotton: {\n\t\t\tflexBasis: \"15%\",\n\t\t},\n\t\tbtntabs: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tinputbase: {}\n\t}));\n\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [selectedValue, setSelectedValue] = useState(0);\n\tconst [isInputShow, setIsInputShow] = useState(false);\n\tlet setSelectedBoard = props.setSelectedBoard;\n\tlet setSearchBoardText = props.setSearchBoardText;\n\n\tconst handleChange = (e, v) => {\n\t\tsetSelectedValue(v);\n\t};\n\tconst handleSearchClick = () => {\n\t\tsetIsInputShow(isInputShow => !isInputShow);\n\t};\n\tconst handleInputbaseOnChange = (e) => {\n\t\t//console.log('search board text',e.target.value);\n\t\tsetSearchBoardText(e.target.value);\n\t}\n\t\n\tuseEffect(() => {\n\t\tlet selectedBoard = \"hot\";\n\t\tswitch (selectedValue) {\n\t\t\tcase 0:\n\t\t\t\tselectedBoard = \"hot\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tselectedBoard = \"favorite\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tsetSelectedBoard(selectedBoard);\n\t}, [selectedValue, setSelectedBoard]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{!BotContext.botState.login && <Skeleton />}\n\t\t\t\t\n\t\t\t</Grid>\n\t\t\t{BotContext.botState.login && (\n\t\t\t\t<Grid item className={classes.select}>\n\t\t\t\t\t<Grid item className={classes.btntabs}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\taria-label=\"search board\"\n\t\t\t\t\t\t\tclassName={classes.searchBotton}\n\t\t\t\t\t\t\tonClick={handleSearchClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tvalue={selectedValue}\n\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tclassName={classes.tabs}\n\t\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"熱門看板\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"最愛看板\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Collapse in={isInputShow}>\n\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\tonChange={handleInputbaseOnChange}\n\t\t\t\t\t\t\tplaceholder=\"搜尋看板\"\n\t\t\t\t\t\t\tclassName={classes.inputbase}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport BoardDisplay from \"./BoardDisplay\";\nimport BoardSelect from \"./BoardSelect\";\n\nexport default function BoardArea() {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\tposition: \"relative\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRight: `1px solid ${theme.palette.divider}`,\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\theight:\"95vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t}));\n\tconst classes = useStyles();\n\tconst [selectedBoard, setSelectedBoard] = useState(\"\");\n\tconst [searchBoardText, setSearchBoardText] = useState(\"\");\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<BoardSelect setSelectedBoard = {setSelectedBoard} setSearchBoardText={setSearchBoardText}/>\n\t\t\t<BoardDisplay selectedBoard={selectedBoard} setSelectedBoard = {setSelectedBoard} searchBoardText={searchBoardText} />\n\t\t</Grid>\n\t);\n}\n","import React, { useState } from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nexport default function SendComment(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\",\n\t\t\tpaddingBottom: \"12px\",\n\t\t\tpaddingTop:'12px',\n\t\t\tminHeight: '12vh'\n\t\t},\n\t\tdivider: {\n\t\t\theight: \"100%\",\n\t\t\tmargin: 4\n\t\t},\n\t\ttype: {\n\t\t\tflexBasis: \"10%\"\n\t\t},\n\t\ttext: {\n\t\t\tflexBasis: \"75%\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tbutton: {\n\t\t\tfontSize: \"0.6rem\",\n\t\t\theight: \"fit-content\",\n\t\t\tflexBasis: \"10%\",\n\t\t\talignSelf: \"center\"\n\t\t},\n\t\tsending: {\n\t\t\tflexBasis: \"5%\",\n\t\t\talignSelf: \"center\",\n\t\t\tmarginLeft: \"4px\"\n\t\t},\n\t\tlp: {\n\t\t\twidth: \"100%\"\n\t\t}\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\tconst setHasMore = props.setHasMore;\n \tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [isSending, setIsSending] = useState(false);\n\tconst { handleSubmit, control } = useForm();\n\t// Todo : 1. 貼圖不要被切掉\n\t//        2. variable length\n\n\tconst onSubmit = async values => {\n\t\t//console.log(values);\n\t\tlet text = values.text;\n\t\t// do not send empty str\n\t\ttext = text.trim();\n\t\tif (text.length === 0) return;\n\t\tsetIsSending(true);\n\t\t\n\t\tlet arg = {\n\t\t\ttype: values.type,\n\t\t\ttext: text,\n\t\t\tboardName: article.info.boardname,\n\t\t\taid: article.info.aid\n\t\t};\n\n\t\ttry {\n\t\t\tawait article.sendComment(arg,BotContext.bot);\n\t\t\tarticle.iterator.reset();\n\t\t\tinfo.setArticle({\n\t\t\t\t...article,\n\t\t\t\tlines: [],\n\t\t\t\tcommentStartFloor: 1,\n\t\t\t});\n\t\t\tsetHasMore(true);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsSending(false);\n\t};\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<form\n\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\tclassName={classes.form}\n\t\t\t\tnoValidate\n\t\t\t\tautoComplete=\"off\"\n\t\t\t>\n\t\t\t\t<FormControl className={classes.type}>\n\t\t\t\t\t<InputLabel>類型</InputLabel>\n\n\t\t\t\t\t<Controller\n\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t<Select>\n\t\t\t\t\t\t\t\t<MenuItem value={\"1\"}>推</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"2\"}>噓</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"3\"}>→</MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\trules={{ required: \"this is required\" }}\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tdefaultValue=\"1\"\n\t\t\t\t\t/>\n\t\t\t\t</FormControl>\n\n\t\t\t\t<Divider className={classes.divider} orientation=\"vertical\" />\n\t\t\t\t<Controller\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tas={<TextField label=\"內容\" multiline />}\n\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\tname=\"text\"\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\tendIcon={<PlayArrowIcon />}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t>\n\t\t\t\t\t送出\n\t\t\t\t</Button>\n\t\t\t\t<Grid item className={classes.sending}>\n\t\t\t\t\t{isSending && <CircularProgress size={\"1rem\"} />}\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</Grid>\n\t);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n","import React, { useState, useEffect } from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport SendComment from \"./SendComment\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { parseArticleLines } from \"./utils/article\";\nimport { useBotContext } from \"./BotContext\";\nexport default function ArticleDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\theight: \"95vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\ttop: {\n\t\t\theight: \"20vh\",\n\t\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\t\tmarginTop: \"12px\",\n\t\t\tflexWrap: \"nowrap\",\n\t\t\tpaddingLeft: \"4vw\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\ttop: 0,\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: 1001\n\t\t},\n\t\tinfo: {},\n\t\ttitleText: {\n\t\t\talignSelf: \"center\",\n\t\t\tflexBasis: \"100%\",\n\t\t\tflexGrow: \"0\",\n\t\t\tflexShrink: \"0\"\n\t\t},\n\n\t\tsendComment: {\n\t\t\tposition: \"absolute\",\n\t\t\tbottom: 0,\n\t\t\tbackgroundColor: theme.palette.background.paper\n\t\t},\n\t\tauthor: {\n\t\t\talignSelf: \"center\"\n\t\t},\n\n\t\tscrollBottom: {\n\t\t\tpaddingBottom: \"12vh\"\n\t\t},\n\t\tinfScroll: {\n\t\t\toverflow: \"inherit\",\n\t\t\tpaddingTop: 0,\n\t\t\twidth: \"100%\",\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\"\n\t\t}\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\n\tconst ref = React.createRef();\n\tconst [hasMore, setHasMore] = useState(true);\n\t// go back to top when load new article\n\tuseEffect(() => {\n\t\tif (info.index === 2) {\n\t\t\tref.current.scrollTop = 0;\n\t\t} else {\n\t\t\t// when exist article display always set hasmore = true\n\t\t\t// fix next article not load more bug\n\t\t\tconsole.log(\"exit display\");\n\t\t\tsetHasMore(true);\n\t\t}\n\t}, [info.index]);\n\n\tconst handleLoadMore = async () => {\n\t\t// prevent default action\n\t\t// if (article.lines.length === 0) return;\n\t\t// call the iterator\n\t\tconsole.log(\"loadmore\");\n\n\t\ttry {\n\t\t\tperformance.mark(\"iterator.next()\");\n\t\t\tlet res = await article.iterator.next();\n\t\t\tperformance.mark(\"iterator.next() finished\");\n\t\t\tconsole.log(\"res\", res);\n\t\t\t// all loaded\n\t\t\tif (res.done) {\n\t\t\t\tsetHasMore(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// parse lines\n\t\t\tres = res.value;\n\t\t\t// parse other lines\n\t\t\tperformance.mark(\"parseLines\");\n\t\t\tlet parsed = parseArticleLines(\n\t\t\t\tres,\n\t\t\t\tarticle.commentStartFloor,\n\t\t\t\tarticle.lines.length\n\t\t\t);\n\t\t\tperformance.mark(\"parseLines finished\");\n\t\t\tlet newLines = [...article.lines, ...parsed[0]];\n\t\t\tlet newCommentStartFloor = parsed[1];\n\t\t\tconsole.log(\"article\", article);\n\t\t\tconsole.log(\"newLines\", newLines);\n\t\t\tconsole.log(\"newCommentStartFloor\", newCommentStartFloor);\n\t\t\tperformance.mark(\"setArticle\");\n\t\t\tinfo.setArticle({\n\t\t\t\t...article,\n\t\t\t\tlines: newLines,\n\t\t\t\tcommentStartFloor: newCommentStartFloor\n\t\t\t});\n\t\t\tperformance.mark(\"setArticle finished\");\n\t\t\tperformance.measure(\n\t\t\t\t\"iterator\",\n\t\t\t\t\"iterator.next()\",\n\t\t\t\t\"iterator.next() finished\"\n\t\t\t);\n\t\t\tperformance.measure(\n\t\t\t\t\"parselines\",\n\t\t\t\t\"parseLines\",\n\t\t\t\t\"parseLines finished\"\n\t\t\t);\n\t\t\tperformance.measure(\n\t\t\t\t\"setarticle\",\n\t\t\t\t\"setArticle\",\n\t\t\t\t\"setArticle finished\"\n\t\t\t);\n\t\t\tperformance.getEntriesByType(\"measure\").forEach(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\n\t\t\tperformance.clearMarks();\n\t\t\tperformance.clearMeasures();\n\t\t\tsetHasMore(true);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tref={ref}\n\t\t\tcomponent=\"main\"\n\t\t\tid=\"scrollableDiv2\"\n\t\t\tclassName={classes.root}\n\t\t>\n\t\t\t<CssBaseline />\n\t\t\t{info.index ? (\n\t\t\t\t<IconButton\n\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t// scroll to top of this article: prevent reenter bug\n\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"top\" });\n\t\t\t\t\t\t// very important to get back to index\n\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\tinfo.setIndex(\n\t\t\t\t\t\t\tinfo.articleSearchList.length > 0 ? 1 : 0\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t>\n\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t</IconButton>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t\t<Grid container className={classes.top}>\n\t\t\t\t<Grid container className={classes.info}>\n\t\t\t\t\t<Typography className={classes.author} variant={\"body1\"}>\n\t\t\t\t\t\t{article.info.author}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant={\"h5\"} className={classes.titleText}>\n\t\t\t\t\t\t{article.info.title}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography className={classes.boardName} variant={\"body2\"}>\n\t\t\t\t\t\t{article.info.boardname}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography className={classes.timestamp} variant={\"body2\"}>\n\t\t\t\t\t\t・{article.info.timestamp}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<InfiniteScroll\n\t\t\t\tclassName={classes.infScroll}\n\t\t\t\tscrollableTarget=\"scrollableDiv2\"\n\t\t\t\tdataLength={article.lines.length} //This is important field to render the next data\n\t\t\t\tnext={handleLoadMore}\n\t\t\t\thasMore={hasMore}\n\t\t\t\tloader={\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{article.lines}\n\t\t\t</InfiniteScroll>\n\t\t\t<Grid container className={classes.scrollBottom} />\n\n\t\t\t<Grid container className={classes.sendComment}>\n\t\t\t\t<SendComment setHasMore={setHasMore} />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n","import { getArticleList } from \"./article\";\nconst submitSearch = async (criteria,info,BotContext) => {\n    //console.log(values);\n    // search for matching articles\n    info.setCriteria(criteria);\n    try {\n        let res = await getArticleList(BotContext, criteria);\n        console.log(res);\n        if (res.length > 0) {\n            info.setArticleSearchList(res);\n            info.setIndex(1);\n        } else {\n            info.setCriteria({});\n            return false;\n        }\n    } catch (err) {\n        return Promise.reject(err);\n    }\n};\n\nexport {submitSearch};","import React, { useState } from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { initArticle } from \"./utils/article\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { submitSearch } from \"./utils/search\";\n\nexport default function ArticleItem(props) {\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\tconst [mouseState, setMouseState] = useState({\n\t\tmouseX: null,\n\t\tmouseY: null\n\t});\n\tconst [preventLeftClick, setPreventLeftClick] = useState(false);\n\tconst handleRightClick = e => {\n\t\te.preventDefault();\n\t\tsetMouseState({ mouseX: e.clientX - 2, mouseY: e.clientY - 4 });\n\t\tsetPreventLeftClick(true);\n\t};\n\tconst handleLeftClick = async e => {\n\t\te.preventDefault();\n\t\tif (preventLeftClick) {\n\t\t\tsetPreventLeftClick(false);\n\t\t\treturn;\n\t\t}\n\t\tif (e.button === 0) {\n\t\t\t// handle deleted article\n\t\t\tif (item.title.startsWith(\"(本文已被刪除)\")) return;\n\t\t\tif (item.author.startsWith(\"-\")) return;\n\t\t\tconsole.log(\"article item click:\", info, item, BotContext);\n\n\t\t\ttry {\n\t\t\t\tlet article;\n\t\t\t\t// block load version\n\t\t\t\t// article = await parseArticle(item,BotContext);\n\t\t\t\t// iterator version\n\t\t\t\tperformance.mark(\"handleClick\");\n\t\t\t\tarticle = await initArticle(item, BotContext);\n\t\t\t\tconsole.log(\"article\", article);\n\t\t\t\tperformance.mark(\"setArticle\");\n\t\t\t\tinfo.setIndex(2);\n\t\t\t\tinfo.setArticle(article);\n\t\t\t\tperformance.measure(\"handleclick\", \"handleClick\");\n\t\t\t\tperformance.measure(\"setArticle\", \"setArticle\");\n\t\t\t\tperformance.getEntriesByType(\"measure\").forEach(e => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t});\n\t\t\t\tperformance.clearMarks();\n\t\t\t\tperformance.clearMeasures();\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t};\n\tconst handleCloseMenu = () => {\n\t\tsetMouseState({\n\t\t\tmouseX: null,\n\t\t\tmouseY: null\n\t\t});\n\t};\n\tconst handleClickSearch = async partialCriteria => {\n\t\tconst criteria = { title: \"\", author: \"\", push: \"\", ...partialCriteria };\n\t\ttry {\n\t\t\tawait submitSearch(criteria, info, BotContext);\n\t\t\thandleCloseMenu();\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\treturn (\n\t\t<ListItem\n\t\t\tonClick={handleLeftClick}\n\t\t\tonContextMenu={handleRightClick}\n\t\t\tbutton\n\t\t\tkey={item.id}\n\t\t\tdivider={true}\n\t\t\tstyle={{ height: \"10vh\" }}\n\t\t>\n\t\t\t<Menu\n\t\t\t\tid=\"simple-menu\"\n\t\t\t\tkeepMounted\n\t\t\t\tonClose={handleCloseMenu}\n\t\t\t\tanchorReference=\"anchorPosition\"\n\t\t\t\tanchorPosition={\n\t\t\t\t\tmouseState.mouseY !== null && mouseState.mouseX !== null\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttop: mouseState.mouseY,\n\t\t\t\t\t\t\t\tleft: mouseState.mouseX\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\topen={mouseState.mouseY !== null}\n\t\t\t>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={e =>\n\t\t\t\t\t\thandleClickSearch({\n\t\t\t\t\t\t\tboardname: item.boardname,\n\t\t\t\t\t\t\ttitle: item.title\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t搜尋同標題文章\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={e =>\n\t\t\t\t\t\thandleClickSearch({\n\t\t\t\t\t\t\tboardname: item.boardname,\n\t\t\t\t\t\t\tauthor: item.author\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t搜尋作者\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\n\t\t\t<ListItem\n\t\t\t\tstyle={{ flexBasis: \"15%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\tNumber(item.push) > 50\n\t\t\t\t\t\t\t\t\t? \"error\"\n\t\t\t\t\t\t\t\t\t: Number(item.push) > 10\n\t\t\t\t\t\t\t\t\t? \"secondary\"\n\t\t\t\t\t\t\t\t\t: Number(item.push) > 0\n\t\t\t\t\t\t\t\t\t? \"primary\"\n\t\t\t\t\t\t\t\t\t: \"error\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{item.push}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{item.status === \"R:\" && (\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={\n\t\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\">\n\t\t\t\t\t\t\t\tRE:\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={{ textAlign: \"right\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ListItem>\n\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.title}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.author}</Typography>\n\t\t\t\t}\n\t\t\t\tstyle={{ flexBasis: \"60%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t/>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body2\">{item.date}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">id:{item.id}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t</ListItem>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport { Article } from \"ptt-client/dist/sites/ptt/model\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Fab from \"@material-ui/core/Fab\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { submitSearch } from \"./utils/search\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport Slide from \"@material-ui/core/Slide\";\n\nexport default function ArticleSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\toverflow: \"auto\",\n\t\t\theight: \"95vh\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\"\n\t\t},\n\t\tinfo: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"0\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tsearchFab: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"1vw\",\n\t\t\tbottom: \"1vh\",\n\t\t\tzIndex: \"1001\"\n\t\t},\n\t\tbackdrop: {\n\t\t\tzIndex: theme.zIndex.drawer + 1\n\t\t},\n\t\tpaper: {\n\t\t\tflexDirection: \"column\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"40vw\",\n\t\t\tmargin: \"12px\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\"\n\t\t},\n\t\tbutton: {\n\t\t\talignSelf: \"flex-end\",\n\t\t\tmarginTop: \"12px\"\n\t\t},\n\t\ttitle: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tauthor: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tpush: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tcloseIcon: {\n\t\t\tposition: \"absolute\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tsaTitle: {\n\t\t\ttextAlign: \"center\",\n\t\t\tmargin: \"24px\"\n\t\t},\n\t\tlist: {\n\t\t\twidth: \"100%\"\n\t\t}\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\tconst [isArticleSearchFormOpen, setIsArticleSearchFormOpen] = useState(\n\t\tfalse\n\t);\n\n\tconst [articleItems, setArticleItems] = useState([]);\n\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\n\tuseEffect(() => {\n\t\tif (info.articleList.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = info.articleList.map(item => {\n\t\t\t\treturn (\n\t\t\t\t\t<ArticleItem\n\t\t\t\t\t\titem={item}\n\t\t\t\t\t\tinfo={info}\n\t\t\t\t\t\tBotContext={BotContext}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetArticleItems(res);\n\t\t}\n\t}, [info]);\n\n\tconst toggleSearchForm = () => {\n\t\tsetIsArticleSearchFormOpen(\n\t\t\tisArticleSearchFormOpen => !isArticleSearchFormOpen\n\t\t);\n\t};\n\tconst { handleSubmit, control, errors } = useForm();\n\n\tconst onSubmitSearch = async values => {\n\t\ttry {\n\t\t\tif (\n\t\t\t\tawait !submitSearch(\n\t\t\t\t\t{ ...values, boardname: info.boardName },\n\t\t\t\t\tinfo,\n\t\t\t\t\tBotContext\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tsetIsSnackbarOpen(true);\n\t\t\t\tsetSnackbarContent({\n\t\t\t\t\tseverity: \"error\",\n\t\t\t\t\ttext: \"搜尋不到東西！\"\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoggleSearchForm();\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\tconst handleLoadMore = () => {\n\t\t// prevent default action\n\t\tif (info.articleList.length === 0) return;\n\n\t\t//console.log(\"handleLoadMore\", info);\n\t\tlet offset = info.articleList[info.articleList.length - 1].id;\n\t\tlet query = BotContext.bot\n\t\t\t.select(Article)\n\t\t\t.where(\"boardname\", info.boardName)\n\t\t\t.where(\"id\", offset);\n\t\tBotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t}).then(res => {\n\t\t\t//console.log(\"res\", res);\n\t\t\tif (!res) return false;\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < offset) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\tinfo.setArticleList([...info.articleList, ...res_reduced]);\n\t\t});\n\t};\n\treturn (\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tcomponent=\"main\"\n\t\t\tclassName={classes.root}\n\t\t\tid=\"scrollableDiv\"\n\t\t>\n\t\t\t<Slide direction=\"down\" in={info.articleList.length === 0}>\n\t\t\t\t{info.articleList.length === 0 ? (\n\t\t\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t</Grid>\n\t\t\t\t) : (\n\t\t\t\t\t<div></div>\n\t\t\t\t)}\n\t\t\t</Slide>\n\n\t\t\t<Slide\n\t\t\t\tdirection=\"up\"\n\t\t\t\tin={info.articleList.length > 0}\n\t\t\t\tclassName={classes.list}\n\t\t\t>\n\t\t\t\t{info.articleList.length > 0 ? (\n\t\t\t\t\t<Grid container className={classes.list}>\n\t\t\t\t\t\t<Backdrop\n\t\t\t\t\t\t\tclassName={classes.backdrop}\n\t\t\t\t\t\t\topen={isArticleSearchFormOpen}\n\t\t\t\t\t\t\tinvisible={true}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClickAwayListener\n\t\t\t\t\t\t\t\tmouseEvent={\n\t\t\t\t\t\t\t\t\tisArticleSearchFormOpen ? \"onClick\" : false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClickAway={toggleSearchForm}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Paper elevation={4} className={classes.paper}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tclassName={classes.closeIcon}\n\t\t\t\t\t\t\t\t\t\tonClick={toggleSearchForm}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t\t<Typography className={classes.saTitle}>\n\t\t\t\t\t\t\t\t\t\t搜尋文章\n\t\t\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t\t\t<Divider\n\t\t\t\t\t\t\t\t\t\tclassName={classes.divider}\n\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmitSearch)}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"標題\" />}\n\t\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.author}\n\t\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"作者\" />}\n\t\t\t\t\t\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.push}\n\t\t\t\t\t\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"推數(大於多少)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"必須是數字\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\terror={errors.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: /\\b\\d{0,6}\\b/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tname=\"push\"\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t送出\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t\t</Backdrop>\n\n\t\t\t\t\t\t<Grid item className={classes.info}>\n\t\t\t\t\t\t\t看板：{info.boardName}\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Fab color=\"secondary\" className={classes.searchFab}>\n\t\t\t\t\t\t\t<SearchIcon onClick={toggleSearchForm} />\n\t\t\t\t\t\t</Fab>\n\n\t\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\t\t\tscrollableTarget=\"scrollableDiv\"\n\t\t\t\t\t\t\tdataLength={articleItems.length} //This is important field to render the next data\n\t\t\t\t\t\t\tnext={handleLoadMore}\n\t\t\t\t\t\t\thasMore={true}\n\t\t\t\t\t\t\tloader={\n\t\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{articleItems}\n\t\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t\t</Grid>\n\t\t\t\t) : (\n\t\t\t\t\t<div></div>\n\t\t\t\t)}\n\t\t\t</Slide>\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport { getArticleList } from \"./utils/article\";\n\nexport default function ArticleSearch(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\t\n\t\t\toverflow: \"auto\",\n\t\t\theight: \"95vh\",\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tinfo: {\n\t\t\theight: \"fit-content\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\tzIndex: 1001\n\t\t},\n\t\tbuttoninfo: {\n\t\t\ttop: \"0\",\n\t\t\tdisplay: \"flex\",\n\t\t\twidth: \"100%\",\n\t\t\tposition: \"absolute\",\n\t\t\tjustifyContent: \"space-between\"\n\t\t}\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\n\tconst [articleItems, setArticleItems] = useState([]);\n\n\tconst hasMore = () => {\n\t\treturn (\n\t\t\tinfo.articleSearchList.length > 0 &&\n\t\t\tinfo.articleSearchList[info.articleSearchList.length - 1].id > 1\n\t\t);\n\t};\n\n\t// generate items\n\tuseEffect(() => {\n\t\t////console.log(\"articleListSearch\", articleListSearch);\n\t\tif (info.articleSearchList.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = info.articleSearchList.map(item => {\n\t\t\t\treturn <ArticleItem\n\t\t\t\t\titem={item}\n\t\t\t\t\tinfo={info}\n\t\t\t\t\tBotContext={BotContext}\n\t\t\t\t/>\n\t\t\t});\n\n\t\t\tsetArticleItems(res);\n\t\t\t////console.log(\"hi res\", res);\n\t\t}\n\t}, [info.articleSearchList]);\n\n\tconst handleLoadMore = async () => {\n\t\t////console.log(\"hlm\");\n\t\t// last id from current list\n\t\tlet l_id = info.articleSearchList[info.articleSearchList.length - 1].id;\n\t\t////console.log(\"l_id\", l_id);\n\t\t//console.log(values);\n\t\t// search for matching articles\n\t\tlet criteria = info.criteria;\n\t\tcriteria.id = l_id;\n\t\ttry {\n\t\t\tlet res = await getArticleList(BotContext, criteria);\n\t\t\t\n\t\t\t//console.log(\"res value\", res);\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < l_id) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\tinfo.setArticleSearchList([\n\t\t\t\t...info.articleSearchList,\n\t\t\t\t...res_reduced\n\t\t\t]);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\tif (info.index !== 1) return null;\n\telse {\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tcomponent=\"main\"\n\t\t\t\tclassName={classes.root}\n\t\t\t\tid=\"scrollableDiv1\"\n\t\t\t>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Grid className={classes.buttoninfo} item>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t// force bot to get back to index page\n\t\t\t\t\t\t\tlet t1 = performance.now();\n\t\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\t\t\t\t\tlet t2 = performance.now();\n\t\t\t\t\t\t\tconsole.log('go to index',t2-t1)\n\t\t\t\t\t\t\tinfo.setIndex(0);\n                            info.setArticleSearchList([]);\n\t\t\t\t\t\t\tinfo.setCriteria({});\n\t\t\t\t\t\t\tlet t3 = performance.now();\n\t\t\t\t\t\t\tconsole.log('search to select',t3-t2)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t<Grid item className={classes.info}>\n\t\t\t\t\t\t{info.criteria.boardname\n\t\t\t\t\t\t\t? `看板：${info.criteria.boardname}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.title\n\t\t\t\t\t\t\t? `．標題：${info.criteria.title}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.author\n\t\t\t\t\t\t\t? `．作者：${info.criteria.author}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.push\n\t\t\t\t\t\t\t? `．讚數：${info.criteria.push}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\tscrollableTarget=\"scrollableDiv1\"\n\t\t\t\t\tdataLength={articleItems.length} //This is important field to render the next data\n                    next={handleLoadMore}\n                    scrollThreshold={0.5}\n\t\t\t\t\thasMore={hasMore()}\n\t\t\t\t\tloader={\n\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{articleItems}\n\t\t\t\t</InfiniteScroll>\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport SwipeableViews from 'react-swipeable-views';\nimport ArticleDisplay from './ArticleDisplay';\nimport ArticleSelect from './ArticleSelect';\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport ArticleSearch from \"./ArticleSearch\";\n\n\nexport default function ArticleArea() {\n  const useStyles = makeStyles(theme => ({\n\t\troot: {\n      width:'100%',\n      height:\"95vh\",\n\t\t},\n\n\n  }));\n  const info = useArticleBoardInfoContext(); \n  const classes = useStyles();\n\n  const handleChangeIndex = (i) =>{\n    info.setIndex(i);\n  }\n  return(\n    <SwipeableViews index={info.index} onChangeIndex={handleChangeIndex} className={classes.root}>\n      <ArticleSelect/>\n      <ArticleSearch/>\n      <ArticleDisplay/>\n    </SwipeableViews>\n    \n  );\n    \n}","import React from \"react\";\nimport {makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n\ttoolbar: {\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tposition: \"sticky\",\n\t\tdisplay: \"flex\"\n\t},\n\n\ttitle: {\n\t\tfontFamily: \"Crimson Text\",\n\t\tfontSize: \"24px\",\n\t\tpaddingLeft: \"12px\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t}\n}));\n\nexport default function Bar(props) {\n\tconst classes = useStyles();\n\n\treturn <div className={classes.title}>ModernPTT</div>;\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\n\nexport default function MySnackbar() {\n\tconst {\n\t\tisSnackbarOpen,\n\t\tsetIsSnackbarOpen,\n\t\tsnackbarContent\n\t} = useProgressContext();\n\tfunction Alert(props) {\n\t\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n\t}\n\n\tconst handleErrorBarClose = (event, reason) => {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\t\tsetIsSnackbarOpen(false);\n\t};\n\treturn (\n\t\t<Snackbar\n\t\t\topen={isSnackbarOpen}\n\t\t\tautoHideDuration={1000}\n\t\t\tonClose={handleErrorBarClose}\n\t\t>\n\t\t\t<Alert severity={snackbarContent.severity}>\n\t\t\t\t{snackbarContent.text}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport Login from \"./Login\";\n\nimport BoardArea from \"./BoardArea\";\nimport ArticleArea from \"./ArticleArea\";\nimport Bar from \"./Bar\";\nimport Container from \"@material-ui/core/Container\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { UserProvider } from \"./UserContext\";\nimport { BotProvider } from \"./BotContext\";\nimport { ArticleBoardInfoProvider } from \"./ArticleBoardInfoContext\";\nimport MySnackbar from \"./MySnackbar\";\nimport { ProgressProvider } from \"./ProgressContext\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\nimport { Resizable } from \"re-resizable\";\n\nimport { colors } from \"@material-ui/core\";\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\ttype: \"dark\",\n\t\tprimary: {\n\t\t\tmain: colors.lightGreen[500],\n\t\t\tdark: colors.lightGreen[500]\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: colors.yellow[500],\n\t\t\tdark: colors.yellow[500]\n\t\t},\n\t\terror: {\n\t\t\tmain: colors.red[500],\n\t\t\tdark: colors.red[500]\n\t\t}\n\t}\n});\n\nconst useStyles = makeStyles(theme => ({\n\tresizable: {\n\t\tdisplay: \"flex\",\n\t\twidth: \"100%\",\n\t\theight:\"95vh\"\n\t},\n\tmainContainer: {\n\t\theight : \"100vh\",\n\t},\n\tbar: {\n\t\theight : \"5vh\"\n\t}\n}));\n\nexport default function Main() {\n\tconst classes = useStyles();\n\treturn (\n\t\t<UserProvider>\n\t\t\t<ProgressProvider>\n\t\t\t\t<BotProvider>\n\t\t\t\t\t<ArticleBoardInfoProvider>\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\tcomponent=\"main\"\n\t\t\t\t\t\t\t\tmaxWidth=\"lg\"\n\t\t\t\t\t\t\t\tdisableGutters=\"true\"\n\t\t\t\t\t\t\t\tclassName={classes.mainContainer}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t\t\t\t<Login />\n\n\t\t\t\t\t\t\t\t<Grid item className={classes.bar}>\n\t\t\t\t\t\t\t\t\t<Bar />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item className={classes.resizable}>\n\t\t\t\t\t\t\t\t\t<Resizable\n\t\t\t\t\t\t\t\t\t\tdefaultSize={{\n\t\t\t\t\t\t\t\t\t\t\twidth: \"20vw\",\n\t\t\t\t\t\t\t\t\t\t\theight: \"95vh\"\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenable={{\n\t\t\t\t\t\t\t\t\t\t\ttop: false,\n\t\t\t\t\t\t\t\t\t\t\tright: true,\n\t\t\t\t\t\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\t\t\t\t\t\tleft: false,\n\t\t\t\t\t\t\t\t\t\t\ttopRight: false,\n\t\t\t\t\t\t\t\t\t\t\tbottomRight: false,\n\t\t\t\t\t\t\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\t\t\t\t\t\t\ttopLeft: false\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BoardArea />\n\t\t\t\t\t\t\t\t\t</Resizable>\n\t\t\t\t\t\t\t\t\t<ArticleArea />\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<MySnackbar />\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</ArticleBoardInfoProvider>\n\t\t\t\t</BotProvider>\n\t\t\t</ProgressProvider>\n\t\t</UserProvider>\n\t);\n}\n","import React, { useEffect, useState } from \"react\";\nimport Main from \"./components/Main\";\nimport Bowser from \"bowser\";\n\nexport default function App(props) {\n\tconst notChrome = (\n\t\t<span>\n\t\t\tDue to technical issue(cannot set custom Websocket Origin header).\n\t\t\tAt this time, we only support Chrome.{\" \"}\n\t\t\t<span role=\"img\" aria-label=\"Person Bowing\">\n\t\t\t\t🙇🙇🙇🙇🙇\n\t\t\t</span>{\" \"}\n\t\t</span>\n\t);\n\n\tconst isChrome = () => {\n\t\t// check is chrome\n\t\tconst browser = Bowser.getParser(window.navigator.userAgent);\n\t\treturn browser.satisfies({\n\t\t\tdesktop: {\n\t\t\t\tchrome: \">=80\"\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (isChrome() ? <Main /> : notChrome);\n\t\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Article\", {\n  enumerable: true,\n  get: function get() {\n    return _article.Article;\n  }\n});\nObject.defineProperty(exports, \"Board\", {\n  enumerable: true,\n  get: function get() {\n    return _board.Board;\n  }\n});\nObject.defineProperty(exports, \"Mail\", {\n  enumerable: true,\n  get: function get() {\n    return _mail.Mail;\n  }\n});\n\nvar _article = require(\"./article\");\n\nvar _board = require(\"./board\");\n\nvar _mail = require(\"./mail\");"],"sourceRoot":""}