{"version":3,"sources":["../../ptt-client/dist/utils/query-builder/SelectQueryBuilder.js","../../ptt-client/dist/socket.js","../../ptt-client/dist/sites/ptt/config.js","../../ptt-client/dist/index.js","../../ptt-client/dist/sites/ptt/index.js","../../ptt-client/dist/sites/ptt/bot.js","../../ptt-client/dist/utils/decode.js","../../ptt-client/dist/utils/encode.js","../../ptt-client/dist/utils/keymap.js","../../ptt-client/dist/sites/ptt/model/article.js","../../ptt-client/dist/utils/query-builder/QueryBuilder.js","../../ptt-client/dist/sites/ptt/model/board.js","../../ptt-client/dist/sites/ptt/model/mail.js","components/UserContext.js","components/ProgressContext.js","components/BotContext.js","components/usePrev.js","components/Login.js","components/ArticleCommentItem.js","components/ArticleContentItem.js","components/utils/article.js","components/BoardItem.js","components/ArticleBoardInfoContext.js","components/BoardDisplay.js","components/BoardSelect.js","components/BoardArea.js","components/SendComment.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/throttle-debounce/dist/index.esm.js","components/ArticleDisplay.js","components/ArticleItem.js","components/ArticleSelect.js","components/ArticleSearch.js","components/ArticleArea.js","components/Bar.js","components/MySnackbar.js","components/Main.js","App.js","serviceWorker.js","index.js","../../ptt-client/dist/sites/ptt/model/index.js","../../ptt-client/dist/utils/index.js","../../ptt-client/dist/utils/char.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","SelectQueryBuilder","_classCallCheck2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_QueryBuilder","_super","_len","length","args","Array","_key","concat","QueryBuilder","_toConsumableArray2","_createClass2","_assertThisInitialized2","_defineProperty2","_default","_EventEmitter","Socket","config","_this","_config","key","socket","_this2","WebSocket","Error","url","console","log","options","origin","addEventListener","emit","bind","timeoutHandler","data","binaryType","_ref","_data","currData","clearTimeout","push","Uint8Array","setTimeout","timeout","byteLength","blobSize","_socket","close","str","readyState","send","name","charset","protocol","preventIdleTimeout","terminal","columns","rows","numOfPagesPerIteration","enumerable","get","_ptt","_bot","_typeof2","_wrapNativeSuper2","_regenerator","_asyncToGenerator2","_eventemitter","_sleepPromise","_terminal","_utils","_char","_wrapRegExp","re","groups","BabelRegExp","undefined","_RegExp","RegExp","_groups","WeakMap","flags","set","buildGroups","g","keys","reduce","create","exec","Symbol","replace","substitution","_","_createForOfIteratorHelper","o","iterator","isArray","minLen","_arrayLikeToArray","n","slice","from","test","_unsupportedIterableToArray","i","F","s","done","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","Bot","term","state","getLine","init","lines","_this$term$state$getL","attr","assign","line","map","join","connect","_init","mark","_callee","wrap","_context","prev","_state","initialState","setMode","currentCharset","t0","toLowerCase","abrupt","forwardEvents","on","closeEvent","login","_len2","_key2","decode","includes","msg","write","error","stop","_this3","infoLine","pgTotal","Number","substring","indexOf","split","allRead","firstPage","index","reset","_next","_callee2","ni","pgNow","l","j","r","_context2","lastIndexOf","keymap","PgDown","pop","Promise","reject","_getContent","_callee3","sentPgDown","lastLine","_i","_context3","Home","_getLines","_callee4","_context4","getContent","sent","_this4","preventIdle","resolve","autoResolveHandler","cb","message","encode","once","removeListener","info","_this5","preventIdleHandler","_callee5","_context5","CtrlU","ArrowLeft","_login","_callee6","username","password","kick","ret","_args6","_context6","Enter","checkLogin","position","boardname","_x","_x2","_logout","_callee7","_context7","_checkLogin","_callee8","_context8","screen","_x3","substrWidth","trim","model","select","_getMails","_callee9","offset","mails","mail","_args9","_context9","enterMail","Math","max","End","sn","date","author","status","title","enterIndex","reverse","_getMail","_callee10","_context10","checkArticleWithHeader","timestamp","getLines","_x4","_enterIndex","_callee11","_context11","repeat","_goToTop","_callee12","_context12","_enterArticleByAIDFromBoard","_callee13","AID","query","_context13","ArrowRight","_x5","_enterArticleByAID","_callee14","_context14","enterBoardByName","enterArticleByAIDFromBoard","_x6","_x7","_sendCommentSearchMode","_callee15","res","text","_iterator","_step","t","_context15","textParts","strPart","lenPerLine","seperateText","type","finish","t1","_x8","_enterArticle","_callee16","_context16","_sendComment","_callee17","_iterator2","_step2","_context17","boardName","enterArticle","_x9","_enterBoardByName","_callee18","_context18","currentBoardname","_x10","_enterByOffset","_callee20","offsets","_this6","_args20","_context20","_ref2","_callee19","lastOffset","_context19","_x11","_enterBoardByOffset","_callee21","_args21","_context21","enterByOffset","_enterFavorite","_callee22","_args22","_context22","_enterMail","_callee23","_context23","match","_uaoJs","Buffer","decodeSync","String","fromCharCode","buffer","encodeSync","ArrowUp","ArrowDown","PgUp","Backspace","CtrlC","CtrlP","CtrlZ","ArticleSelectQueryBuilder","WhereType","Article","_SelectQueryBuilder2","_content","content","warn","article","id","fixed","bot","_SelectQueryBuilder","condition","Boardname","Id","Push","wheres","Author","Title","last_id","found","articles","getQuery","fromLine","_getOneInSearch","hasHeader","_get","_i2","_getOne","_getOneIterator","getContentIterator","sendComment","arg","BoardSelectQueryBuilder","Entry","Board","board","unread","category","flag","folder","divider","users","admin","Class","entry","Prefix","prefix","Offset","Offsets","boards","stopLoop","_line","_board","getByPrefix","Favorite","Hot","enterBoardByOffset","enterFavorite","fromClassLine","_getByPrefix","resultLine0","col","row","width","searchStr","searchInput","MailSelectQueryBuilder","Mail","cookies","Cookies","constate","useState","user","setUser","UserProvider","useUserContext","isSnackbarOpen","setIsSnackbarOpen","severity","snackbarContent","setSnackbarContent","ProgressProvider","useProgressContext","Ptt","botState","setBotState","prevBotState","ref","useRef","useEffect","current","usePrev","busy","a","executeCommand","command","goToTop","getOne","getOneIterator","BotProvider","useBotContext","useStyles","makeStyles","theme","root","justifyContent","alignItems","flexDirection","paperform","margin","spacing","display","paperlogging","minWidth","height","marginTop","zIndex","drawer","paperreconnect","padding","reconnectText","reconnectButton","alignSelf","form","submit","signin","backdrop","color","circle","marginRight","Login","classes","BotContext","useForm","register","handleSubmit","onSubmit","preventDefault","myUser","loginCallback","useCallback","setOpenForm","setOpenLoadingCircle","setOpenBackDrop","openBackDrop","openLoadingCircle","openForm","openReconnect","setOpenReconnect","tryLogin","Grid","container","component","className","Paper","CircularProgress","Typography","variant","Backdrop","open","CssBaseline","Button","onClick","reconnect","TextField","required","fullWidth","label","autoComplete","autoFocus","inputRef","FormControlLabel","control","Checkbox","ArticleCommentItem","commentLine","ListItem","disableGutters","ListItemText","style","flexBasis","primary","floor","secondary","ArticleContentItem","props","whiteSpace","initArticle","articleItem","aid","ip","getArticleResponseIterator","firstPartOfContent","parseArticleLines","commentStartFloor","ArticleModel","where","getArticleList","criteria","firstColon","BoardItem","item","handleClick","setArticleList","sethaveSelectBoard","setBoardName","setIndex","setCriteria","setArticleSearchList","button","ListItemIcon","setArticle","articleList","articleSearchList","haveSelectBoard","ArticleBoardInfoProvider","useArticleBoardInfoContext","BoardDisplay","maxHeight","overflow","alignContent","skeleton","fontSize","list","listItems","setListItems","hotItems","favoriteItems","searchCache","selectedBoard","searchBoardText","getBoardCallback","lis","performance","now","getBoard","count","List","BoardSelect","tabs","tab","searchBotton","btntabs","inputbase","selectedValue","setSelectedValue","isInputShow","setIsInputShow","setSelectedBoard","setSearchBoardText","IconButton","aria-label","Tabs","indicatorColor","textColor","onChange","v","Tab","wrapped","Collapse","in","InputBase","placeholder","BoardArea","borderRight","palette","SendComment","paddingLeft","paddingRight","paddingBottom","paddingTop","minHeight","sending","marginLeft","lp","setHasMore","isSending","setIsSending","values","noValidate","FormControl","InputLabel","as","Select","MenuItem","rules","defaultValue","Divider","orientation","multiline","endIcon","size","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","wrapper","self","elapsed","clear","cancel","__","ArticleDisplay","top","borderBottom","flexWrap","goback","titleText","flexGrow","flexShrink","bottom","backgroundColor","background","paper","scrollBottom","infScroll","React","createRef","hasMore","scrollTop","handleLoadMore","parsed","newLines","newCommentStartFloor","measure","getEntriesByType","clearMarks","clearMeasures","scrollableTarget","dataLength","loader","loading","ArticleItem","startsWith","textAlign","ArticleSelect","right","searchFab","closeIcon","saTitle","isArticleSearchFormOpen","setIsArticleSearchFormOpen","articleItems","setArticleItems","toggleSearchForm","errors","onSubmitSearch","justify","invisible","ClickAwayListener","mouseEvent","onClickAway","elevation","helperText","pattern","Fab","then","res_reduced","rtn","ArticleSearch","buttoninfo","l_id","scrollThreshold","ArticleArea","onChangeIndex","toolbar","boxShadow","transition","toolbarTitle","flex","toolbarSecondary","overflowX","toolbarLink","fontFamily","Bar","Fragment","Toolbar","MySnackbar","Alert","Snackbar","autoHideDuration","onClose","event","reason","createMuiTheme","typography","body1","body2","h5","fontWeight","dark","main","resizable","Main","ThemeProvider","Container","maxWidth","xs","defaultSize","enable","left","topRight","bottomRight","bottomLeft","topLeft","App","Component","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","_article","_mail","_decode","_encode","_keymap","dbcswidth","getWidth","indexOfWidth","widthType","startWidth","ignoreWidth","start","prefixSpace","suffixSpace","substr","min","_wcwidth","sum","c","charCodeAt"],"mappings":"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","file":"static/js/main.bfef48f1.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectQueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _QueryBuilder2 = require(\"./QueryBuilder\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SelectQueryBuilder = /*#__PURE__*/function (_QueryBuilder) {\n  (0, _inherits2[\"default\"])(SelectQueryBuilder, _QueryBuilder);\n\n  var _super = _createSuper(SelectQueryBuilder);\n\n  function SelectQueryBuilder() {\n    (0, _classCallCheck2[\"default\"])(this, SelectQueryBuilder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _super.call.apply(_super, [this].concat(args));\n  }\n\n  return SelectQueryBuilder;\n}(_QueryBuilder2.QueryBuilder);\n\nexports.SelectQueryBuilder = SelectQueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Socket = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Socket, _EventEmitter);\n\n  var _super = _createSuper(Socket);\n\n  function Socket(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Socket);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_socket\", void 0);\n    _this._config = config;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Socket, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this2 = this;\n\n      var socket;\n\n      if (typeof WebSocket === 'undefined') {\n        throw new Error(\"'WebSocket' is undefined. Do you include any websocket polyfill?\");\n      } else if (WebSocket.length === 1) {\n        socket = new WebSocket(this._config.url);\n        console.log('WebSocket 1', socket, this._config);\n      } else {\n        var options = {};\n\n        if (this._config.origin) {\n          options.origin = this._config.origin;\n        }\n\n        socket = new WebSocket(this._config.url, options);\n      }\n\n      socket.addEventListener('open', this.emit.bind(this, 'connect'));\n      socket.addEventListener('close', this.emit.bind(this, 'disconnect'));\n      socket.addEventListener('error', this.emit.bind(this, 'error'));\n      var data = [];\n      var timeoutHandler;\n      socket.binaryType = 'arraybuffer';\n      socket.addEventListener('message', function (_ref) {\n        var _data;\n\n        var currData = _ref.data;\n        clearTimeout(timeoutHandler);\n\n        (_data = data).push.apply(_data, (0, _toConsumableArray2[\"default\"])(new Uint8Array(currData)));\n\n        timeoutHandler = setTimeout(function () {\n          _this2.emit('message', data);\n\n          data = [];\n        }, _this2._config.timeout);\n\n        if (currData.byteLength > _this2._config.blobSize) {\n          throw new Error(\"Receive message length(\".concat(currData.byteLength, \") greater than buffer size(\").concat(_this2._config.blobSize, \")\"));\n        }\n      });\n      this._socket = socket;\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var socket = this._socket;\n      socket.close();\n    }\n  }, {\n    key: \"send\",\n    value: function send(str) {\n      var socket = this._socket;\n\n      if (socket.readyState === 1\n      /* OPEN */\n      ) {\n          socket.send(str);\n        }\n    }\n  }]);\n  return Socket;\n}(_eventemitter[\"default\"]);\n\nvar _default = Socket;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar config = {\n  name: 'PTT',\n  url: 'wss://ws.ptt.cc/bbs',\n  charset: 'utf8',\n  origin: 'app://pcman',\n  protocol: 'websocket',\n  timeout: 200,\n  blobSize: 1024,\n  preventIdleTimeout: 30,\n  terminal: {\n    columns: 80,\n    rows: 24\n  },\n  numOfPagesPerIteration: 1\n};\nvar _default = config;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"ptt\", {\n  enumerable: true,\n  get: function get() {\n    return _ptt[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Socket\", {\n  enumerable: true,\n  get: function get() {\n    return _socket[\"default\"];\n  }\n});\n\nvar _ptt = _interopRequireDefault(require(\"./sites/ptt\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nvar _socket = _interopRequireDefault(require(\"./socket\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"bot\", {\n  enumerable: true,\n  get: function get() {\n    return _bot[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"config\", {\n  enumerable: true,\n  get: function get() {\n    return _config[\"default\"];\n  }\n});\n\nvar _bot = _interopRequireDefault(require(\"./bot\"));\n\nvar _config = _interopRequireDefault(require(\"./config\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nvar _sleepPromise = _interopRequireDefault(require(\"sleep-promise\"));\n\nvar _terminal = _interopRequireDefault(require(\"terminal.js\"));\n\nvar _socket = _interopRequireDefault(require(\"../../socket\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _char = require(\"../../utils/char\");\n\nvar _config = _interopRequireDefault(require(\"./config\"));\n\nfunction _wrapRegExp(re, groups) { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _RegExp = (0, _wrapNativeSuper2[\"default\"])(RegExp); var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = _RegExp.call(this, re, flags); _groups.set(_this, groups || _groups.get(re)); return _this; } (0, _inherits2[\"default\"])(BabelRegExp, _RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = []; args.push.apply(args, arguments); if ((0, _typeof2[\"default\"])(args[args.length - 1]) !== \"object\") { args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Bot = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2[\"default\"])(Bot, _EventEmitter);\n\n  var _super = _createSuper(Bot);\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"line\",\n    get: function get() {\n      var lines = [];\n\n      for (var i = 0; i < this.term.state.rows; i++) {\n        var _this$term$state$getL = this.term.state.getLine(i),\n            str = _this$term$state$getL.str,\n            attr = _this$term$state$getL.attr;\n\n        lines.push({\n          str: str,\n          attr: Object.assign({}, attr)\n        });\n      }\n\n      return lines;\n    }\n  }, {\n    key: \"screen\",\n    get: function get() {\n      return this.line.map(function (line) {\n        return line.str;\n      }).join(\"\\n\");\n    }\n  }]);\n\n  function Bot(config) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Bot);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"config\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"term\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_state\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"currentCharset\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"socket\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"preventIdleHandler\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"getLine\", function (n) {\n      return _this.term.state.getLine(n);\n    });\n    _this.config = _objectSpread(_objectSpread({}, _config[\"default\"]), config);\n\n    _this.init();\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Bot, [{\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.socket.connect();\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var _this2 = this;\n\n        var config, socket;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                config = this.config;\n                this.term = new _terminal[\"default\"](config.terminal);\n                this._state = _objectSpread({}, Bot.initialState);\n                this.term.state.setMode(\"stringWidth\", \"dbcs\");\n                this.currentCharset = \"big5\";\n                _context.t0 = config.protocol.toLowerCase();\n                _context.next = _context.t0 === \"websocket\" ? 8 : _context.t0 === \"ws\" ? 8 : _context.t0 === \"wss\" ? 8 : _context.t0 === \"telnet\" ? 9 : _context.t0 === \"ssh\" ? 9 : 9;\n                break;\n\n              case 8:\n                return _context.abrupt(\"break\", 11);\n\n              case 9:\n                throw new Error(\"Invalid protocol: \".concat(config.protocol));\n\n              case 11:\n                socket = new _socket[\"default\"](config);\n                socket.connect();\n                Bot.forwardEvents.forEach(function (e) {\n                  socket.on(e, _this2.emit.bind(_this2, e));\n                });\n                socket.on(\"connect\", function () {\n                  _this2._state.connect = true;\n\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n\n                  _this2.emit.apply(_this2, [\"connect\"].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state);\n                }).on(\"disconnect\", function (closeEvent) {\n                  _this2._state.connect = false;\n                  _this2._state.login = false;\n\n                  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                    args[_key2 - 1] = arguments[_key2];\n                  }\n\n                  _this2.emit.apply(_this2, [\"disconnect\", closeEvent].concat(args));\n\n                  _this2.emit(\"stateChange\", _this2.state); // // try to reconnect\n                  // sleep(1000).then(() => {\n                  // \tthis.socket.connect();\n                  // });\n\n                }).on(\"message\", function (data) {\n                  if (_this2.currentCharset !== _this2.config.charset && !_this2.state.login && (0, _utils.decode)(data, \"utf8\").includes(\"...\")) {\n                    _this2.currentCharset = _this2.config.charset;\n                  }\n\n                  var msg = (0, _utils.decode)(data, _this2.currentCharset);\n\n                  _this2.term.write(msg);\n\n                  _this2.emit(\"redraw\", _this2.term.toString());\n                }).on(\"error\", function (err) {\n                  console.error(err);\n                });\n                this.socket = socket;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getContentIterator\",\n    // This will return iterator of content.\n    value: function getContentIterator() {\n      var _this3 = this;\n\n      var infoLine = this.line[23].str;\n      var pgTotal = Number(infoLine.substring(infoLine.indexOf(\"\") + 2, infoLine.indexOf(\"\") - 1).split(\"/\")[1]);\n      console.log(\"pgtotal\", pgTotal);\n      var allRead = false;\n      var firstPage = true;\n      var index = 0;\n      var lines = [];\n      lines.push(this.line[0]);\n      var iterator = {\n        reset: function reset() {\n          index = 0;\n          allRead = false;\n          firstPage = true;\n        },\n        next: function () {\n          var _next = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n            var ni, pgNow, l, i, j, line, r;\n            return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n\n                    if (!(allRead || infoLine.includes(\"\"))) {\n                      _context2.next = 3;\n                      break;\n                    }\n\n                    return _context2.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 3:\n                    ni = 0;\n\n                  case 4:\n                    if (!(ni < _this3.config.numOfPagesPerIteration && !allRead)) {\n                      _context2.next = 24;\n                      break;\n                    }\n\n                    infoLine = _this3.line[23].str;\n                    pgNow = Number(infoLine.substring(infoLine.indexOf(\"\") + 2, infoLine.indexOf(\"\") - 1).split(\"/\")[0]);\n                    console.log(\"pgNow\", pgNow);\n                    l = void 0;\n                    console.log(\"infoline\", infoLine);\n                    l = infoLine.substring(infoLine.lastIndexOf(\"\") + 2, infoLine.indexOf(\"\") - 1).split(\"~\").map(Number);\n                    console.log(\"l\", l);\n                    i = firstPage ? l[0] : l[0] + 1;\n\n                    for (j = 1; j <= 22; i++, j++) {\n                      line = _this3.line[j];\n\n                      if (i > index) {\n                        lines.push(line);\n                        index++;\n                        console.log(\"line \", i, \", index \", index, \" \", line);\n                      }\n                    }\n\n                    firstPage = false; // last page\n\n                    if (!(pgNow === pgTotal)) {\n                      _context2.next = 19;\n                      break;\n                    }\n\n                    allRead = true;\n                    _context2.next = 21;\n                    break;\n\n                  case 19:\n                    _context2.next = 21;\n                    return _this3.send(\"\".concat(_utils.keymap.PgDown));\n\n                  case 21:\n                    ni++;\n                    _context2.next = 4;\n                    break;\n\n                  case 24:\n                    // remove all empty lines at the end\n                    if (allRead) {\n                      while (lines.length > 0 && lines[lines.length - 1].str === \"\") {\n                        index--;\n                        lines.pop();\n                      }\n                    }\n\n                    r = {\n                      value: lines,\n                      done: false\n                    };\n                    lines = [];\n                    return _context2.abrupt(\"return\", r);\n\n                  case 30:\n                    _context2.prev = 30;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    return _context2.abrupt(\"return\", Promise.reject(_context2.t0));\n\n                  case 33:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, null, [[0, 30]]);\n          }));\n\n          function next() {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      };\n      return iterator;\n    } // This will return whole object.\n\n  }, {\n    key: \"getContent\",\n    value: function () {\n      var _getContent = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var lines, sentPgDown, i, lastLine, _i, j;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                lines = [];\n                lines.push(this.line[0]);\n                sentPgDown = false;\n\n              case 3:\n                if (!(!this.line[23].str.includes(\"100%\") && !this.line[23].str.includes(\"\"))) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                for (i = 1; i < 23; i++) {\n                  lines.push(this.line[i]);\n                }\n\n                _context3.next = 7;\n                return this.send(_utils.keymap.PgDown);\n\n              case 7:\n                sentPgDown = true;\n                _context3.next = 3;\n                break;\n\n              case 10:\n                lastLine = lines[lines.length - 1];\n                _i = 0;\n\n              case 12:\n                if (!(_i < 23)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                if (!(this.line[_i].str === lastLine.str)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                for (j = _i + 1; j < 23; j++) {\n                  lines.push(this.line[j]);\n                }\n\n                return _context3.abrupt(\"break\", 19);\n\n              case 16:\n                _i++;\n                _context3.next = 12;\n                break;\n\n              case 19:\n                while (lines.length > 0 && lines[lines.length - 1].str === \"\") {\n                  lines.pop();\n                }\n\n                if (!sentPgDown) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                _context3.next = 23;\n                return this.send(_utils.keymap.Home);\n\n              case 23:\n                return _context3.abrupt(\"return\", lines);\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getContent() {\n        return _getContent.apply(this, arguments);\n      }\n\n      return getContent;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getLines\",\n    value: function () {\n      var _getLines = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var lines;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.getContent();\n\n              case 2:\n                lines = _context4.sent;\n                return _context4.abrupt(\"return\", lines.map(function (line) {\n                  return line.str;\n                }));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getLines() {\n        return _getLines.apply(this, arguments);\n      }\n\n      return getLines;\n    }()\n  }, {\n    key: \"send\",\n    value: function send(msg) {\n      var _this4 = this;\n\n      if (this.config.preventIdleTimeout) {\n        this.preventIdle(this.config.preventIdleTimeout);\n      }\n\n      return new Promise(function (resolve, reject) {\n        var autoResolveHandler;\n\n        var cb = function cb(message) {\n          clearTimeout(autoResolveHandler);\n          resolve(true);\n        };\n\n        if (_this4.state.connect) {\n          if (msg.length > 0) {\n            _this4.socket.send((0, _utils.encode)(msg, _this4.currentCharset));\n\n            _this4.once(\"message\", cb);\n\n            autoResolveHandler = setTimeout(function () {\n              _this4.removeListener(\"message\", cb);\n\n              resolve(false);\n            }, _this4.config.timeout * 10);\n          } else {\n            console.info(\"Sending message with 0-length. Skipped.\");\n            resolve(true);\n          }\n        } else {\n          reject();\n        }\n      });\n    }\n  }, {\n    key: \"preventIdle\",\n    value: function preventIdle(timeout) {\n      var _this5 = this;\n\n      clearTimeout(this.preventIdleHandler);\n\n      if (this.state.login) {\n        this.preventIdleHandler = setTimeout( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n          return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.next = 2;\n                  return _this5.send(_utils.keymap.CtrlU);\n\n                case 2:\n                  _context5.next = 4;\n                  return _this5.send(_utils.keymap.ArrowLeft);\n\n                case 4:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5);\n        })), timeout * 1000);\n      }\n    }\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(username, password) {\n        var kick,\n            ret,\n            state,\n            _args6 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                kick = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : true;\n\n                if (!this.state.login) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                username = username.replace(/,/g, \"\");\n\n                if (this.config.charset === \"utf8\") {\n                  username += \",\";\n                }\n\n                _context6.next = 7;\n                return this.send(\"\".concat(username).concat(_utils.keymap.Enter).concat(password).concat(_utils.keymap.Enter));\n\n              case 7:\n                _context6.next = 9;\n                return this.checkLogin(kick);\n\n              case 9:\n                ret = _context6.sent;\n\n                if (ret) {\n                  state = this._state;\n                  state.login = true;\n                  state.position = {\n                    boardname: \"\"\n                  };\n                  this._state.username = username.substring(0, username.length - 1);\n                  this.emit(\"stateChange\", this.state);\n                }\n\n                return _context6.abrupt(\"return\", ret);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7() {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (this.state.login) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\");\n\n              case 2:\n                _context7.next = 4;\n                return this.send(\"G\".concat(_utils.keymap.Enter, \"Y\").concat(_utils.keymap.Enter));\n\n              case 4:\n                this._state.login = false;\n                this.emit(\"stateChange\", this.state);\n                this.send(_utils.keymap.Enter);\n                return _context7.abrupt(\"return\", true);\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"checkLogin\",\n    value: function () {\n      var _checkLogin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(kick) {\n        var state, lines;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(this.line[21].str.includes(\"\") || this.line[21].str.includes(\"\"))) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 5:\n                if (!this.line[23].str.includes(\"\")) {\n                  _context8.next = 10;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 10:\n                if (!this.line[13].str.includes(\"\")) {\n                  _context8.next = 15;\n                  break;\n                }\n\n                this.emit(\"login.failed\");\n                return _context8.abrupt(\"return\", false);\n\n              case 15:\n                state = 0;\n\n              case 16:\n                if (!true) {\n                  _context8.next = 66;\n                  break;\n                }\n\n                _context8.next = 19;\n                return (0, _sleepPromise[\"default\"])(400);\n\n              case 19:\n                lines = this.line;\n\n                if (!lines[22].str.includes(\"...\")) {\n                  _context8.next = 23;\n                  break;\n                }\n\n                _context8.next = 64;\n                break;\n\n              case 23:\n                if (!lines[22].str.includes(\"\")) {\n                  _context8.next = 32;\n                  break;\n                }\n\n                if (!(state === 1)) {\n                  _context8.next = 26;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 26:\n                _context8.next = 28;\n                return this.send(\"\".concat(kick ? \"y\" : \"n\").concat(_utils.keymap.Enter));\n\n              case 28:\n                state = 1;\n                return _context8.abrupt(\"continue\", 16);\n\n              case 32:\n                if (!lines[23].str.includes(\"\")) {\n                  _context8.next = 40;\n                  break;\n                }\n\n                if (!(state === 2)) {\n                  _context8.next = 35;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 35:\n                _context8.next = 37;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 37:\n                state = 2;\n                _context8.next = 64;\n                break;\n\n              case 40:\n                if (!lines[23].str.includes(\"\")) {\n                  _context8.next = 48;\n                  break;\n                }\n\n                if (!(state === 3)) {\n                  _context8.next = 43;\n                  break;\n                }\n\n                return _context8.abrupt(\"continue\", 16);\n\n              case 43:\n                _context8.next = 45;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 45:\n                state = 3;\n                _context8.next = 64;\n                break;\n\n              case 48:\n                if (!lines[23].str.includes(\"\")) {\n                  _context8.next = 53;\n                  break;\n                }\n\n                _context8.next = 51;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 51:\n                _context8.next = 64;\n                break;\n\n              case 53:\n                if (!(lines[22].str + lines[23].str).toLowerCase().includes(\"y/n\")) {\n                  _context8.next = 59;\n                  break;\n                }\n\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n                _context8.next = 57;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 57:\n                _context8.next = 64;\n                break;\n\n              case 59:\n                if (!lines[23].str.includes(\"\")) {\n                  _context8.next = 63;\n                  break;\n                }\n\n                return _context8.abrupt(\"break\", 66);\n\n              case 63:\n                console.info(\"Unknown login state: \\n\".concat(this.screen));\n\n              case 64:\n                _context8.next = 16;\n                break;\n\n              case 66:\n                this.emit(\"login.success\");\n                return _context8.abrupt(\"return\", true);\n\n              case 68:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function checkLogin(_x3) {\n        return _checkLogin.apply(this, arguments);\n      }\n\n      return checkLogin;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"checkArticleWithHeader\",\n    value: function checkArticleWithHeader() {\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.line[0].str, 0, 6).trim();\n      return authorArea === \"\";\n    }\n  }, {\n    key: \"select\",\n    value: function select(model) {\n      return model.select(this);\n    }\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMails\",\n    value: function () {\n      var _getMails = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9() {\n        var offset,\n            getLine,\n            mails,\n            i,\n            line,\n            mail,\n            _args9 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                offset = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : 0;\n                _context9.next = 3;\n                return this.enterMail();\n\n              case 3:\n                if (!(offset > 0)) {\n                  _context9.next = 7;\n                  break;\n                }\n\n                offset = Math.max(offset - 9, 1);\n                _context9.next = 7;\n                return this.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(offset).concat(_utils.keymap.Enter));\n\n              case 7:\n                getLine = this.getLine;\n                mails = [];\n\n                for (i = 3; i <= 22; i++) {\n                  line = getLine(i).str;\n                  mail = {\n                    sn: +(0, _char.substrWidth)(\"dbcs\", line, 1, 5).trim(),\n                    date: (0, _char.substrWidth)(\"dbcs\", line, 9, 5).trim(),\n                    author: (0, _char.substrWidth)(\"dbcs\", line, 15, 12).trim(),\n                    status: (0, _char.substrWidth)(\"dbcs\", line, 30, 2).trim(),\n                    title: (0, _char.substrWidth)(\"dbcs\", line, 33).trim()\n                  };\n                  mails.push(mail);\n                }\n\n                _context9.next = 12;\n                return this.enterIndex();\n\n              case 12:\n                return _context9.abrupt(\"return\", mails.reverse());\n\n              case 13:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function getMails() {\n        return _getMails.apply(this, arguments);\n      }\n\n      return getMails;\n    }()\n    /**\n     * @deprecated\n     */\n\n  }, {\n    key: \"getMail\",\n    value: function () {\n      var _getMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(sn) {\n        var getLine, hasHeader, mail;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this.enterMail();\n\n              case 2:\n                getLine = this.getLine;\n                _context10.next = 5;\n                return this.send(\"\".concat(sn).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 5:\n                hasHeader = this.checkArticleWithHeader();\n                mail = {\n                  sn: sn,\n                  author: \"\",\n                  title: \"\",\n                  timestamp: \"\",\n                  lines: []\n                };\n\n                if (this.checkArticleWithHeader()) {\n                  mail.author = (0, _char.substrWidth)(\"dbcs\", getLine(0).str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)(\"dbcs\", getLine(1).str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)(\"dbcs\", getLine(2).str, 7).trim();\n                }\n\n                _context10.next = 10;\n                return this.getLines();\n\n              case 10:\n                mail.lines = _context10.sent;\n                _context10.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context10.abrupt(\"return\", mail);\n\n              case 14:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function getMail(_x4) {\n        return _getMail.apply(this, arguments);\n      }\n\n      return getMail;\n    }()\n  }, {\n    key: \"enterIndex\",\n    value: function () {\n      var _enterIndex = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee11() {\n        return _regenerator[\"default\"].wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.send(\"\".concat(_utils.keymap.ArrowLeft.repeat(10)));\n\n              case 2:\n                return _context11.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function enterIndex() {\n        return _enterIndex.apply(this, arguments);\n      }\n\n      return enterIndex;\n    }()\n  }, {\n    key: \"goToTop\",\n    value: function () {\n      var _goToTop = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee12() {\n        return _regenerator[\"default\"].wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.send(\"\".concat(_utils.keymap.Home));\n\n              case 2:\n                return _context12.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function goToTop() {\n        return _goToTop.apply(this, arguments);\n      }\n\n      return goToTop;\n    }()\n  }, {\n    key: \"enterArticleByAIDFromBoard\",\n    // From board enter article with AID\n    value: function () {\n      var _enterArticleByAIDFromBoard = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee13(AID) {\n        var query, res;\n        return _regenerator[\"default\"].wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (this.state.login) {\n                  _context13.next = 2;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                query = \"#\".concat(AID).concat(_utils.keymap.Enter);\n                _context13.next = 5;\n                return this.send(query);\n\n              case 5:\n                res = _context13.sent;\n\n                if (res) {\n                  _context13.next = 10;\n                  break;\n                }\n\n                _context13.next = 9;\n                return this.send(\"\".concat(_utils.keymap.Enter));\n\n              case 9:\n                return _context13.abrupt(\"return\", Promise.reject(\"enterArticleByAIDFromBoard failed\"));\n\n              case 10:\n                _context13.next = 12;\n                return this.send(\"\".concat(_utils.keymap.ArrowRight));\n\n              case 12:\n                return _context13.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 13:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function enterArticleByAIDFromBoard(_x5) {\n        return _enterArticleByAIDFromBoard.apply(this, arguments);\n      }\n\n      return enterArticleByAIDFromBoard;\n    }() // Enter board and enter article with AID\n\n  }, {\n    key: \"enterArticleByAID\",\n    value: function () {\n      var _enterArticleByAID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee14(boardname, AID) {\n        return _regenerator[\"default\"].wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (this.state.login) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                _context14.prev = 2;\n                _context14.next = 5;\n                return this.enterBoardByName(boardname);\n\n              case 5:\n                _context14.next = 7;\n                return this.enterArticleByAIDFromBoard(AID);\n\n              case 7:\n                return _context14.abrupt(\"return\", Promise.resolve(\"now in article : \".concat(AID)));\n\n              case 10:\n                _context14.prev = 10;\n                _context14.t0 = _context14[\"catch\"](2);\n                return _context14.abrupt(\"return\", Promise.reject(_context14.t0));\n\n              case 13:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this, [[2, 10]]);\n      }));\n\n      function enterArticleByAID(_x6, _x7) {\n        return _enterArticleByAID.apply(this, arguments);\n      }\n\n      return enterArticleByAID;\n    }() // This API is STATEFUL!\n    // send comment in article, in search mode.\n    //  res = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendCommentSearchMode\",\n    value: function () {\n      var _sendCommentSearchMode = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee15(res) {\n        var text, lenPerLine, seperateText, _iterator, _step, t;\n\n        return _regenerator[\"default\"].wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                text = res.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context15.next = 4;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 4:\n                lenPerLine = 52; // \n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context15.prev = 7;\n                // We assume bot is in the correct article.\n                _iterator = _createForOfIteratorHelper(text);\n                _context15.prev = 9;\n\n                _iterator.s();\n\n              case 11:\n                if ((_step = _iterator.n()).done) {\n                  _context15.next = 29;\n                  break;\n                }\n\n                t = _step.value;\n                _context15.next = 15;\n                return this.send(\"X\");\n\n              case 15:\n                if (!this.line[23].str.includes(\"\")) {\n                  _context15.next = 18;\n                  break;\n                }\n\n                _context15.next = 18;\n                return this.send(\"\".concat(res.type));\n\n              case 18:\n                if (!(this.line[22].str.includes(\"  \") || this.line[23].str.includes(this.state.username))) {\n                  _context15.next = 25;\n                  break;\n                }\n\n                _context15.next = 21;\n                return this.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 21:\n                _context15.next = 23;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 23:\n                _context15.next = 27;\n                break;\n\n              case 25:\n                _context15.next = 27;\n                return this.send(\"\".concat(_utils.keymap.ArrowLeft));\n\n              case 27:\n                _context15.next = 11;\n                break;\n\n              case 29:\n                _context15.next = 34;\n                break;\n\n              case 31:\n                _context15.prev = 31;\n                _context15.t0 = _context15[\"catch\"](9);\n\n                _iterator.e(_context15.t0);\n\n              case 34:\n                _context15.prev = 34;\n\n                _iterator.f();\n\n                return _context15.finish(34);\n\n              case 37:\n                return _context15.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 40:\n                _context15.prev = 40;\n                _context15.t1 = _context15[\"catch\"](7);\n                return _context15.abrupt(\"return\", Promise.reject(_context15.t1));\n\n              case 43:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this, [[7, 40], [9, 31, 34, 37]]);\n      }));\n\n      function sendCommentSearchMode(_x8) {\n        return _sendCommentSearchMode.apply(this, arguments);\n      }\n\n      return sendCommentSearchMode;\n    }()\n  }, {\n    key: \"enterArticle\",\n    value: function () {\n      var _enterArticle = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee16() {\n        return _regenerator[\"default\"].wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16);\n      }));\n\n      function enterArticle() {\n        return _enterArticle.apply(this, arguments);\n      }\n\n      return enterArticle;\n    }() // send comment in article\n    //  res = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendComment\",\n    value: function () {\n      var _sendComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee17(res) {\n        var text, lenPerLine, seperateText, _iterator2, _step2, t;\n\n        return _regenerator[\"default\"].wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                if (this.state.login) {\n                  _context17.next = 2;\n                  break;\n                }\n\n                return _context17.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                text = res.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context17.next = 6;\n                  break;\n                }\n\n                return _context17.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 6:\n                lenPerLine = 52; // \n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context17.prev = 9;\n                _context17.next = 12;\n                return this.enterBoardByName(res.boardName);\n\n              case 12:\n                _iterator2 = _createForOfIteratorHelper(text);\n                _context17.prev = 13;\n\n                _iterator2.s();\n\n              case 15:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context17.next = 31;\n                  break;\n                }\n\n                t = _step2.value;\n                _context17.next = 19;\n                return this.enterArticle();\n\n              case 19:\n                _context17.next = 21;\n                return this.send(\"X\");\n\n              case 21:\n                if (!this.line[23].str.includes(\"\")) {\n                  _context17.next = 24;\n                  break;\n                }\n\n                _context17.next = 24;\n                return this.send(\"\".concat(res.type));\n\n              case 24:\n                if (!(this.line[22].str.includes(\"  \") || this.line[23].str.includes(this.state.username))) {\n                  _context17.next = 29;\n                  break;\n                }\n\n                _context17.next = 27;\n                return this.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 27:\n                _context17.next = 29;\n                return this.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 29:\n                _context17.next = 15;\n                break;\n\n              case 31:\n                _context17.next = 36;\n                break;\n\n              case 33:\n                _context17.prev = 33;\n                _context17.t0 = _context17[\"catch\"](13);\n\n                _iterator2.e(_context17.t0);\n\n              case 36:\n                _context17.prev = 36;\n\n                _iterator2.f();\n\n                return _context17.finish(36);\n\n              case 39:\n                _context17.next = 41;\n                return this.enterIndex();\n\n              case 41:\n                return _context17.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 44:\n                _context17.prev = 44;\n                _context17.t1 = _context17[\"catch\"](9);\n                return _context17.abrupt(\"return\", Promise.reject(_context17.t1));\n\n              case 47:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this, [[9, 44], [13, 33, 36, 39]]);\n      }));\n\n      function sendComment(_x9) {\n        return _sendComment.apply(this, arguments);\n      }\n\n      return sendComment;\n    }()\n  }, {\n    key: \"enterBoardByName\",\n    value: function () {\n      var _enterBoardByName = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee18(boardname) {\n        return _regenerator[\"default\"].wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.next = 2;\n                return this.send(\"s\".concat(boardname).concat(_utils.keymap.Enter, \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                if (!(this.currentBoardname.toLowerCase() === boardname.toLowerCase())) {\n                  _context18.next = 8;\n                  break;\n                }\n\n                this._state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                return _context18.abrupt(\"return\", Promise.resolve(\"now in board : \".concat(boardname)));\n\n              case 8:\n                _context18.next = 10;\n                return this.enterIndex();\n\n              case 10:\n                return _context18.abrupt(\"return\", Promise.reject(\"enterBoardByName failed\"));\n\n              case 11:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function enterBoardByName(_x10) {\n        return _enterBoardByName.apply(this, arguments);\n      }\n\n      return enterBoardByName;\n    }()\n  }, {\n    key: \"enterByOffset\",\n    value: function () {\n      var _enterByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee20() {\n        var _this6 = this;\n\n        var offsets,\n            result,\n            _args20 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                offsets = _args20.length > 0 && _args20[0] !== undefined ? _args20[0] : [];\n                result = true;\n                offsets.forEach( /*#__PURE__*/function () {\n                  var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee19(offset) {\n                    var i, lastOffset;\n                    return _regenerator[\"default\"].wrap(function _callee19$(_context19) {\n                      while (1) {\n                        switch (_context19.prev = _context19.next) {\n                          case 0:\n                            if (offset === 0) {\n                              result = false;\n                            }\n\n                            if (!(offset < 0)) {\n                              _context19.next = 15;\n                              break;\n                            }\n\n                            i = 22;\n\n                          case 3:\n                            if (!(i >= 3)) {\n                              _context19.next = 15;\n                              break;\n                            }\n\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this6.line[i].str, 3, 4).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context19.next = 8;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context19.abrupt(\"break\", 15);\n\n                          case 8:\n                            lastOffset = (0, _char.substrWidth)(\"dbcs\", _this6.line[i].str, 15, 2).trim();\n\n                            if (!(lastOffset.length > 0)) {\n                              _context19.next = 12;\n                              break;\n                            }\n\n                            offset += +lastOffset + 1;\n                            return _context19.abrupt(\"break\", 15);\n\n                          case 12:\n                            i--;\n                            _context19.next = 3;\n                            break;\n\n                          case 15:\n                            if (offset < 0) {\n                              result = false;\n                            }\n\n                            if (result) {\n                              _context19.next = 18;\n                              break;\n                            }\n\n                            return _context19.abrupt(\"return\");\n\n                          case 18:\n                            _context19.next = 20;\n                            return _this6.send(\"\".concat(offset).concat(_utils.keymap.Enter.repeat(2), \" \").concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n                          case 20:\n                          case \"end\":\n                            return _context19.stop();\n                        }\n                      }\n                    }, _callee19);\n                  }));\n\n                  return function (_x11) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n\n                if (!result) {\n                  _context20.next = 11;\n                  break;\n                }\n\n                this._state.position.boardname = this.currentBoardname;\n                this.emit(\"stateChange\", this.state);\n                _context20.next = 8;\n                return this.send(_utils.keymap.Home);\n\n              case 8:\n                return _context20.abrupt(\"return\", true);\n\n              case 11:\n                _context20.next = 13;\n                return this.enterIndex();\n\n              case 13:\n                return _context20.abrupt(\"return\", false);\n\n              case 14:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function enterByOffset() {\n        return _enterByOffset.apply(this, arguments);\n      }\n\n      return enterByOffset;\n    }()\n  }, {\n    key: \"enterBoardByOffset\",\n    value: function () {\n      var _enterBoardByOffset = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee21() {\n        var offsets,\n            _args21 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                offsets = _args21.length > 0 && _args21[0] !== undefined ? _args21[0] : [];\n                _context21.next = 3;\n                return this.send(\"C\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context21.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context21.abrupt(\"return\", _context21.sent);\n\n              case 6:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n\n      function enterBoardByOffset() {\n        return _enterBoardByOffset.apply(this, arguments);\n      }\n\n      return enterBoardByOffset;\n    }()\n  }, {\n    key: \"enterFavorite\",\n    value: function () {\n      var _enterFavorite = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee22() {\n        var offsets,\n            _args22 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                offsets = _args22.length > 0 && _args22[0] !== undefined ? _args22[0] : [];\n                _context22.next = 3;\n                return this.send(\"F\".concat(_utils.keymap.Enter));\n\n              case 3:\n                _context22.next = 5;\n                return this.enterByOffset(offsets);\n\n              case 5:\n                return _context22.abrupt(\"return\", _context22.sent);\n\n              case 6:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n\n      function enterFavorite() {\n        return _enterFavorite.apply(this, arguments);\n      }\n\n      return enterFavorite;\n    }()\n  }, {\n    key: \"enterMail\",\n    value: function () {\n      var _enterMail = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee23() {\n        return _regenerator[\"default\"].wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _context23.next = 2;\n                return this.send(\"M\".concat(_utils.keymap.Enter, \"R\").concat(_utils.keymap.Enter).concat(_utils.keymap.Home).concat(_utils.keymap.End));\n\n              case 2:\n                return _context23.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n\n      function enterMail() {\n        return _enterMail.apply(this, arguments);\n      }\n\n      return enterMail;\n    }()\n  }, {\n    key: \"state\",\n    get: function get() {\n      return _objectSpread({}, this._state);\n    }\n  }, {\n    key: \"currentBoardname\",\n    get: function get() {\n      var boardRe = /*#__PURE__*/_wrapRegExp(/\\u3010(?!\\u770B\\u677F\\u5217\\u8868).*\\u3011.*\\u300A(.*)\\u300B/, {\n        boardname: 1\n      });\n\n      var match = boardRe.exec(this.line[0].str);\n\n      if (match) {\n        return match.groups.boardname;\n      } else {\n        return void 0;\n      }\n    }\n  }]);\n  return Bot;\n}(_eventemitter[\"default\"]);\n\n(0, _defineProperty2[\"default\"])(Bot, \"initialState\", {\n  connect: false,\n  login: false\n});\n(0, _defineProperty2[\"default\"])(Bot, \"forwardEvents\", [\"message\", \"error\"]);\nvar _default = Bot;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _uaoJs = require(\"uao-js\");\n\nvar decode = function decode(data, charset) {\n  var str = '';\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      str = Buffer.from(data).toString('utf8');\n      break;\n\n    case 'big5':\n      str = (0, _uaoJs.decodeSync)(String.fromCharCode.apply(String, (0, _toConsumableArray2[\"default\"])(data)));\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return str;\n};\n\nvar _default = decode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _uaoJs = require(\"uao-js\");\n\nvar encode = function encode(str, charset) {\n  var buffer;\n\n  switch (charset) {\n    case 'utf8':\n    case 'utf-8':\n      buffer = Buffer.from(str, 'utf8');\n      break;\n\n    case 'big5':\n      buffer = Buffer.from((0, _uaoJs.encodeSync)(str), 'binary');\n      break;\n\n    default:\n      throw new TypeError(\"Unknown charset: \".concat(charset));\n  }\n\n  return buffer;\n};\n\nvar _default = encode;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  Enter: '\\r',\n  ArrowLeft: '\\x1b[D',\n  ArrowRight: '\\x1b[C',\n  ArrowUp: '\\x1b[A',\n  ArrowDown: '\\x1b[B',\n  PgUp: '\\x1b[5~',\n  PgDown: '\\x1b[6~',\n  Home: '\\x1b[1~',\n  End: '\\x1b[4~',\n  Backspace: '\\b',\n  CtrlC: '\\x03',\n  CtrlP: '\\x10',\n  CtrlU: '\\x15',\n  CtrlZ: '\\x1a'\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ArticleSelectQueryBuilder = exports.WhereType = exports.Article = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Article = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Article() {\n    (0, _classCallCheck2[\"default\"])(this, Article);\n    (0, _defineProperty2[\"default\"])(this, \"boardname\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"push\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"fixed\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"iterator\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"sendComment\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Article, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)(\"dbcs\", this.content[0].str, 0, 6).trim();\n      return authorArea === \"\";\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var article = new Article();\n      var str = line.str;\n      article.id = +(0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim();\n      article.push = (0, _char.substrWidth)(\"dbcs\", str, 9, 2).trim();\n      article.date = (0, _char.substrWidth)(\"dbcs\", str, 11, 5).trim();\n      article.author = (0, _char.substrWidth)(\"dbcs\", str, 17, 12).trim();\n      article.status = (0, _char.substrWidth)(\"dbcs\", str, 30, 2).trim();\n      article.title = (0, _char.substrWidth)(\"dbcs\", str, 32).trim();\n      article.fixed = (0, _char.substrWidth)(\"dbcs\", str, 1, 7).trim().includes(\"\");\n      return article;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new ArticleSelectQueryBuilder(bot);\n    }\n  }]);\n  return Article;\n}();\n\nexports.Article = Article;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Boardname\"] = \"boardname\";\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Push\"] = \"push\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar ArticleSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(ArticleSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(ArticleSelectQueryBuilder);\n\n  function ArticleSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ArticleSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"boardname\", \"\");\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ArticleSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Boardname:\n          if (this.boardname !== \"\") {\n            console.warn(\"Cannot call where with type \\\"\".concat(type, \"\\\" multiple times\"));\n          } else {\n            this.boardname = condition;\n          }\n\n          break;\n\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Push:\n          this.wheres.push({\n            type: \"Z\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: \"a\",\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: \"/\",\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    }\n    /**\n     * *** This API is STATEFUL. ***\n     \tUsed when search article.\n    \tReturns an iterator of article list.\n     */\n\n  }, {\n    key: \"getIterator\",\n    value: function getIterator() {\n      var _this2 = this;\n\n      var last_id;\n      var iterator = {\n        next: function () {\n          var _next = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n            var found, articles, i, line, article;\n            return _regenerator[\"default\"].wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n\n                    if (!(last_id === 1)) {\n                      _context.next = 3;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 3:\n                    if (last_id) {\n                      _context.next = 16;\n                      break;\n                    }\n\n                    _context.next = 6;\n                    return _this2.bot.enterBoardByName(_this2.boardname);\n\n                  case 6:\n                    _context.next = 8;\n                    return _this2.bot.send(_this2.getQuery());\n\n                  case 8:\n                    found = _context.sent;\n                    console.log(\"found\", found);\n\n                    if (found) {\n                      _context.next = 12;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", {\n                      value: null,\n                      done: true\n                    });\n\n                  case 12:\n                    _context.next = 14;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.End));\n\n                  case 14:\n                    _context.next = 18;\n                    break;\n\n                  case 16:\n                    _context.next = 18;\n                    return _this2.bot.send(\"\".concat(_utils.keymap.PgUp));\n\n                  case 18:\n                    articles = [];\n                    i = 3;\n\n                  case 20:\n                    if (!(i <= 22)) {\n                      _context.next = 30;\n                      break;\n                    }\n\n                    line = _this2.bot.line[i]; // console.log(\"line\", line);\n\n                    if (!(line.str.trim() === \"\")) {\n                      _context.next = 24;\n                      break;\n                    }\n\n                    return _context.abrupt(\"break\", 30);\n\n                  case 24:\n                    article = Article.fromLine(line);\n                    article.boardname = _this2.boardname;\n                    articles.push(article);\n\n                  case 27:\n                    i++;\n                    _context.next = 20;\n                    break;\n\n                  case 30:\n                    // console.log(\"articles\", articles);\n                    last_id = articles[0].id;\n                    return _context.abrupt(\"return\", {\n                      value: articles,\n                      done: false\n                    });\n\n                  case 34:\n                    _context.prev = 34;\n                    _context.t0 = _context[\"catch\"](0);\n                    return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n                  case 37:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 34]]);\n          }));\n\n          function next() {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      };\n      return iterator;\n    }\n    /**\n     * *** This API is STATEFUL. ***\n     *  We use this API when clicking an article item of search article list.\n    \tReturns an article.\n     */\n\n  }, {\n    key: \"getOneInSearch\",\n    value: function () {\n      var _getOneInSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var article;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 2:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context2.next = 7;\n                return this.bot.getContent();\n\n              case 7:\n                article.content = _context2.sent;\n\n                if (article.hasHeader()) {\n                  article.author = (0, _char.substrWidth)(\"dbcs\", this.bot.line[0].str, 7, 50).trim();\n                  article.title = (0, _char.substrWidth)(\"dbcs\", this.bot.line[1].str, 7).trim();\n                  article.timestamp = (0, _char.substrWidth)(\"dbcs\", this.bot.line[2].str, 7).trim();\n                } // go back to search\n\n\n                _context2.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.ArrowLeft));\n\n              case 11:\n                return _context2.abrupt(\"return\", article);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOneInSearch() {\n        return _getOneInSearch.apply(this, arguments);\n      }\n\n      return getOneInSearch;\n    }() // Used when click in boarditem, we will only specify boardname.\n\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3() {\n        var found, id, articles, i, line, article, _i, _i2;\n\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context3.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context3.sent;\n\n                if (found) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context3.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                articles = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === \"\")) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                return _context3.abrupt(\"break\", 23);\n\n              case 17:\n                article = Article.fromLine(line);\n                article.boardname = this.boardname;\n                articles.push(article);\n\n              case 20:\n                i++;\n                _context3.next = 13;\n                break;\n\n              case 23:\n                if (!(articles.length >= 2 && articles[0].id === 0)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                _i = 1;\n\n              case 25:\n                if (!(_i < articles.length)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                if (!(articles[_i].id !== 0)) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                articles[0].id = articles[_i].id - _i;\n                return _context3.abrupt(\"break\", 32);\n\n              case 29:\n                _i++;\n                _context3.next = 25;\n                break;\n\n              case 32:\n                for (_i2 = 1; _i2 < articles.length; _i2++) {\n                  articles[_i2].id = articles[_i2 - 1].id + 1;\n                }\n\n                _context3.next = 35;\n                return this.bot.enterIndex();\n\n              case 35:\n                return _context3.abrupt(\"return\", articles.reverse());\n\n              case 36:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var found, article;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context4.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context4.sent;\n\n                if (found) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", void 0);\n\n              case 7:\n                _context4.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context4.next = 14;\n                return this.bot.getContent();\n\n              case 14:\n                article.content = _context4.sent;\n\n                if (article.hasHeader()) {\n                  article.author = (0, _char.substrWidth)(\"dbcs\", this.bot.line[0].str, 7, 50).trim();\n                  article.title = (0, _char.substrWidth)(\"dbcs\", this.bot.line[1].str, 7).trim();\n                  article.timestamp = (0, _char.substrWidth)(\"dbcs\", this.bot.line[2].str, 7).trim();\n                }\n\n                _context4.next = 18;\n                return this.bot.enterIndex();\n\n              case 18:\n                return _context4.abrupt(\"return\", article);\n\n              case 19:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }, {\n    key: \"getOneIterator\",\n    value: function () {\n      var _getOneIterator = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var found, article;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.bot.enterBoardByName(this.boardname);\n\n              case 2:\n                _context5.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context5.sent;\n\n                if (found) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", void 0);\n\n              case 7:\n                _context5.prev = 7;\n                _context5.next = 10;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 10:\n                article = new Article();\n                article.id = this.id;\n                article.boardname = this.boardname;\n                _context5.next = 15;\n                return this.bot.getContentIterator();\n\n              case 15:\n                article.iterator = _context5.sent;\n                article.sendComment = this.sendComment;\n                return _context5.abrupt(\"return\", article);\n\n              case 20:\n                _context5.prev = 20;\n                _context5.t0 = _context5[\"catch\"](7);\n                return _context5.abrupt(\"return\", Promise.reject(_context5.t0));\n\n              case 23:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[7, 20]]);\n      }));\n\n      function getOneIterator() {\n        return _getOneIterator.apply(this, arguments);\n      }\n\n      return getOneIterator;\n    }() // assume that we are in an article now.\n    // send comment in article\n    //  arg = {\n    // \t\t\"type\" : \"1\" or \"2\" or \"3\"\n    //  \t\"text\" : \"hello!\"\n    //    \"boardName\" : \"test\",\n    //    \"aid\" : \"aid\"\n    // }\n\n  }, {\n    key: \"sendComment\",\n    value: function () {\n      var _sendComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(arg, bot) {\n        var text, lenPerLine, seperateText, _iterator, _step, t;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (bot.state.login) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", Promise.reject(\"not login\"));\n\n              case 2:\n                text = arg.text;\n                text = text.trim();\n\n                if (!(text.length === 0)) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", Promise.reject(\"empty string\"));\n\n              case 6:\n                lenPerLine = 52; // \n\n                seperateText = function seperateText(str) {\n                  var textParts = [];\n                  var strPart = \"\";\n\n                  for (var i = 0, len = 0; i < str.length;) {\n                    if (str[i] >= \"\\xFF\") {\n                      // cannot put it in\n                      if (len >= lenPerLine - 1) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 2;\n                        i++;\n                      }\n                    } else {\n                      if (len == lenPerLine) {\n                        textParts.push(strPart);\n                        strPart = \"\";\n                        len = 0;\n                      } else {\n                        strPart += str[i];\n                        len += 1;\n                        i++;\n                      }\n                    }\n                  }\n\n                  textParts.push(strPart);\n                  return textParts;\n                };\n\n                text = seperateText(text);\n                _context6.prev = 9;\n                _iterator = _createForOfIteratorHelper(text);\n                _context6.prev = 11;\n\n                _iterator.s();\n\n              case 13:\n                if ((_step = _iterator.n()).done) {\n                  _context6.next = 35;\n                  break;\n                }\n\n                t = _step.value;\n                _context6.next = 17;\n                return bot.send(\"X\");\n\n              case 17:\n                console.log(\"after pressing X\", bot.screen);\n\n                if (!bot.line[23].str.includes(\"\")) {\n                  _context6.next = 21;\n                  break;\n                }\n\n                _context6.next = 21;\n                return bot.send(\"\".concat(arg.type));\n\n              case 21:\n                if (!(bot.line[22].str.includes(\"  \") || bot.line[23].str.includes(bot.state.username))) {\n                  _context6.next = 29;\n                  break;\n                }\n\n                _context6.next = 24;\n                return bot.send(\"\".concat(t).concat(_utils.keymap.Enter));\n\n              case 24:\n                _context6.next = 26;\n                return bot.send(\"y\".concat(_utils.keymap.Enter));\n\n              case 26:\n                console.log(\"after send \", bot.screen);\n                _context6.next = 30;\n                break;\n\n              case 29:\n                return _context6.abrupt(\"return\", Promise.reject(\"comment failed\"));\n\n              case 30:\n                _context6.next = 32;\n                return bot.send(\"\".concat(_utils.keymap.Enter));\n\n              case 32:\n                console.log(\"after enter \", bot.screen);\n\n              case 33:\n                _context6.next = 13;\n                break;\n\n              case 35:\n                _context6.next = 40;\n                break;\n\n              case 37:\n                _context6.prev = 37;\n                _context6.t0 = _context6[\"catch\"](11);\n\n                _iterator.e(_context6.t0);\n\n              case 40:\n                _context6.prev = 40;\n\n                _iterator.f();\n\n                return _context6.finish(40);\n\n              case 43:\n                return _context6.abrupt(\"return\", Promise.resolve(\"comment success\"));\n\n              case 46:\n                _context6.prev = 46;\n                _context6.t1 = _context6[\"catch\"](9);\n                return _context6.abrupt(\"return\", Promise.reject(_context6.t1));\n\n              case 49:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[9, 46], [11, 37, 40, 43]]);\n      }));\n\n      function sendComment(_x, _x2) {\n        return _sendComment.apply(this, arguments);\n      }\n\n      return sendComment;\n    }()\n  }]);\n  return ArticleSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.ArticleSelectQueryBuilder = ArticleSelectQueryBuilder;\nvar _default = Article;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryBuilder = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar QueryBuilder = function QueryBuilder() {\n  (0, _classCallCheck2[\"default\"])(this, QueryBuilder);\n};\n\nexports.QueryBuilder = QueryBuilder;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.BoardSelectQueryBuilder = exports.Entry = exports.WhereType = exports.Board = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Board = /*#__PURE__*/function () {\n  function Board() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    (0, _classCallCheck2[\"default\"])(this, Board);\n    (0, _defineProperty2[\"default\"])(this, \"name\", '');\n    (0, _defineProperty2[\"default\"])(this, \"id\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"unread\", false);\n    (0, _defineProperty2[\"default\"])(this, \"category\", '');\n    (0, _defineProperty2[\"default\"])(this, \"flag\", '');\n    (0, _defineProperty2[\"default\"])(this, \"title\", '');\n    (0, _defineProperty2[\"default\"])(this, \"users\", '');\n    (0, _defineProperty2[\"default\"])(this, \"admin\", '');\n    (0, _defineProperty2[\"default\"])(this, \"folder\", false);\n    (0, _defineProperty2[\"default\"])(this, \"divider\", false);\n    this.name = name;\n  }\n\n  (0, _createClass2[\"default\"])(Board, null, [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 3, 4).trim();\n      board.unread = (0, _char.substrWidth)('dbcs', str, 8, 2).trim() === '';\n      board.name = (0, _char.substrWidth)('dbcs', str, 10, 12).trim();\n      board.category = (0, _char.substrWidth)('dbcs', str, 23, 4).trim();\n      board.flag = (0, _char.substrWidth)('dbcs', str, 28, 2).trim();\n\n      switch (board.flag) {\n        case '':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30).replace(/\\s+$/, '');\n          board.folder = true;\n          break;\n\n        case '--':\n          board.divider = true;\n          break;\n\n        case '':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          board.folder = true;\n          break;\n\n        case '':\n          board.title = (0, _char.substrWidth)('dbcs', str, 30, 31).replace(/\\s+$/, '');\n          board.users = (0, _char.substrWidth)('dbcs', str, 62, 5).trim();\n          board.admin = (0, _char.substrWidth)('dbcs', str, 67).trim();\n          break;\n\n        default:\n          console.warn(\"Unknown board flag. line.str: \\\"\".concat(str, \"\\\"\"));\n      }\n\n      return board;\n    }\n  }, {\n    key: \"fromClassLine\",\n    value: function fromClassLine(line) {\n      var board = new Board();\n      var str = line.str;\n      board.id = +(0, _char.substrWidth)('dbcs', str, 15, 2);\n      board.title = (0, _char.substrWidth)('dbcs', str, 20, 29).replace(/\\s+$/, '');\n      board.admin = (0, _char.substrWidth)('dbcs', str, 61).trim();\n      board.folder = true;\n      return board;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new BoardSelectQueryBuilder(bot);\n    }\n  }]);\n  return Board;\n}();\n\nexports.Board = Board;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Entry\"] = \"entry\";\n  WhereType[\"Prefix\"] = \"prefix\";\n  WhereType[\"Offset\"] = \"offset\";\n  WhereType[\"Offsets\"] = \"offsets\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar Entry;\nexports.Entry = Entry;\n\n(function (Entry) {\n  Entry[\"Class\"] = \"class\";\n  Entry[\"Favorite\"] = \"favorite\";\n  Entry[\"Hot\"] = \"hot\";\n})(Entry || (exports.Entry = Entry = {}));\n\nvar BoardSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(BoardSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(BoardSelectQueryBuilder);\n\n  function BoardSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, BoardSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"entry\", Entry.Class);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"prefix\", '');\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"offsets\", []);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(BoardSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type.toLowerCase()) {\n        case WhereType.Entry:\n          this.entry = condition.toLowerCase();\n          break;\n\n        case WhereType.Prefix:\n          this.prefix = condition;\n          break;\n\n        case WhereType.Offset:\n          this.offsets.push(condition);\n          break;\n\n        case WhereType.Offsets:\n          this.offsets = condition.slice();\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n          break;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, boards, i, line, board, stopLoop, _i, _line, _board;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.prefix !== '')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.getByPrefix(this.prefix);\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n                _context.t0 = this.entry;\n                _context.next = _context.t0 === Entry.Class ? 7 : _context.t0 === Entry.Favorite ? 11 : _context.t0 === Entry.Hot ? 15 : 19;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return this.bot.enterBoardByOffset(this.offsets);\n\n              case 9:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 11:\n                _context.next = 13;\n                return this.bot.enterFavorite(this.offsets);\n\n              case 13:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 15:\n                _context.next = 17;\n                return this.bot.enterBoardByOffset([-1].concat((0, _toConsumableArray2[\"default\"])(this.offsets)));\n\n              case 17:\n                found = _context.sent;\n                return _context.abrupt(\"break\", 19);\n\n              case 19:\n                boards = [];\n\n                if (!found) {\n                  _context.next = 56;\n                  break;\n                }\n\n                if (!(this.entry === Entry.Class && this.offsets.length === 0)) {\n                  _context.next = 34;\n                  break;\n                }\n\n                i = 7;\n\n              case 23:\n                if (!(i < 23)) {\n                  _context.next = 32;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 27;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 32);\n\n              case 27:\n                board = Board.fromClassLine(line);\n                boards.push(board);\n\n              case 29:\n                i++;\n                _context.next = 23;\n                break;\n\n              case 32:\n                _context.next = 56;\n                break;\n\n              case 34:\n                if (!true) {\n                  _context.next = 56;\n                  break;\n                }\n\n                stopLoop = false;\n                _i = 3;\n\n              case 37:\n                if (!(_i < 23)) {\n                  _context.next = 50;\n                  break;\n                }\n\n                _line = this.bot.line[_i];\n\n                if (!(_line.str.trim() === '')) {\n                  _context.next = 42;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 42:\n                _board = Board.fromLine(_line);\n\n                if (!(_board.id !== boards.length + 1)) {\n                  _context.next = 46;\n                  break;\n                }\n\n                stopLoop = true;\n                return _context.abrupt(\"break\", 50);\n\n              case 46:\n                boards.push(_board);\n\n              case 47:\n                _i++;\n                _context.next = 37;\n                break;\n\n              case 50:\n                if (!stopLoop) {\n                  _context.next = 52;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 56);\n\n              case 52:\n                _context.next = 54;\n                return this.bot.send(_utils.keymap.PgDown);\n\n              case 54:\n                _context.next = 34;\n                break;\n\n              case 56:\n                _context.next = 58;\n                return this.bot.enterIndex();\n\n              case 58:\n                return _context.abrupt(\"return\", boards);\n\n              case 59:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var res;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.get();\n\n              case 2:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res.length ? res[0] : void 0);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }, {\n    key: \"getByPrefix\",\n    value: function () {\n      var _getByPrefix = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(prefix) {\n        var boards, resultLine0, col, row, width, line, boardname, searchStr, searchInput;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.bot.send(\"s\".concat(prefix, \" \"));\n\n              case 2:\n                boards = [];\n                resultLine0 = this.bot.line[3].str;\n\n                if (!(resultLine0.toLowerCase().indexOf(prefix.toLowerCase()) === 0)) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                col = 0, row = 0;\n                /* TODO: Use other way instead of the constant 15. */\n\n                width = 15;\n\n                while (width < resultLine0.length && resultLine0[width] !== ' ') {\n                  width += 1;\n                }\n\n                while (width < resultLine0.length && resultLine0[width] === ' ') {\n                  width += 1;\n                }\n\n              case 9:\n                if (!true) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                line = this.bot.line[row + 3];\n                boardname = (0, _char.substrWidth)('dbcs', line.str, col * width, width).trim();\n\n                if (!(boardname !== '')) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                boards.push(new Board(boardname));\n                _context3.next = 17;\n                break;\n\n              case 16:\n                return _context3.abrupt(\"break\", 25);\n\n              case 17:\n                row += 1;\n\n                if (!(row == 20)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                col += 1;\n                row = 0;\n                /* TODO: Use other way instead of the constant 80. */\n                // Optimization : only get 1 page.\n\n                if (!((col + 1) * width > 80)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"break\", 25);\n\n              case 23:\n                _context3.next = 9;\n                break;\n\n              case 25:\n                _context3.next = 30;\n                break;\n\n              case 27:\n                searchStr = this.bot.line[1].str;\n                searchInput = (0, _char.substrWidth)('dbcs', searchStr, 34, 15).trim();\n\n                if (searchInput.toLowerCase().indexOf(prefix.toLowerCase()) === 0) {\n                  boards.push(new Board(searchInput));\n                }\n\n              case 30:\n                _context3.next = 32;\n                return this.bot.send(_utils.keymap.CtrlC);\n\n              case 32:\n                return _context3.abrupt(\"return\", boards);\n\n              case 33:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getByPrefix(_x) {\n        return _getByPrefix.apply(this, arguments);\n      }\n\n      return getByPrefix;\n    }()\n  }]);\n  return BoardSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.BoardSelectQueryBuilder = BoardSelectQueryBuilder;\nvar _default = Board;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.MailSelectQueryBuilder = exports.WhereType = exports.Mail = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _SelectQueryBuilder2 = require(\"../../../utils/query-builder/SelectQueryBuilder\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _char = require(\"../../../utils/char\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Mail = /*#__PURE__*/function () {\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"content\",\n    get: function get() {\n      return this._content;\n    },\n    set: function set(content) {\n      this._content = content.slice();\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return this._content.map(function (content) {\n        return content.str;\n      });\n    }\n    /**\n     * @deprecated\n     */\n    ,\n    set: function set(data) {\n      console.warn(\"Should not set Mail.data/Mail.lines directly. \" + \"Use Mail.content instead\");\n    }\n  }]);\n\n  function Mail() {\n    (0, _classCallCheck2[\"default\"])(this, Mail);\n    (0, _defineProperty2[\"default\"])(this, \"id\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"date\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"timestamp\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"author\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"status\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"title\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"_content\", []);\n  }\n\n  (0, _createClass2[\"default\"])(Mail, [{\n    key: \"hasHeader\",\n    value: function hasHeader() {\n      if (this.content.length === 0) {\n        return false;\n      }\n\n      var authorArea = (0, _char.substrWidth)('dbcs', this.content[0].str, 0, 6).trim();\n      return authorArea === '';\n    }\n  }], [{\n    key: \"fromLine\",\n    value: function fromLine(line) {\n      var mail = new Mail();\n      var str = line.str;\n      mail.id = +(0, _char.substrWidth)('dbcs', str, 1, 5).trim();\n      mail.date = (0, _char.substrWidth)('dbcs', str, 9, 5).trim();\n      mail.author = (0, _char.substrWidth)('dbcs', str, 15, 12).trim();\n      mail.status = (0, _char.substrWidth)('dbcs', str, 30, 2).trim();\n      mail.title = (0, _char.substrWidth)('dbcs', str, 33).trim();\n      return mail;\n    }\n  }, {\n    key: \"select\",\n    value: function select(bot) {\n      return new MailSelectQueryBuilder(bot);\n    }\n  }]);\n  return Mail;\n}();\n\nexports.Mail = Mail;\nvar WhereType;\nexports.WhereType = WhereType;\n\n(function (WhereType) {\n  WhereType[\"Id\"] = \"id\";\n  WhereType[\"Author\"] = \"author\";\n  WhereType[\"Title\"] = \"title\";\n})(WhereType || (exports.WhereType = WhereType = {}));\n\nvar MailSelectQueryBuilder = /*#__PURE__*/function (_SelectQueryBuilder) {\n  (0, _inherits2[\"default\"])(MailSelectQueryBuilder, _SelectQueryBuilder);\n\n  var _super = _createSuper(MailSelectQueryBuilder);\n\n  function MailSelectQueryBuilder(bot) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MailSelectQueryBuilder);\n    _this = _super.call(this);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"bot\", void 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"wheres\", []);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"id\", 0);\n    _this.bot = bot;\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MailSelectQueryBuilder, [{\n    key: \"where\",\n    value: function where(type, condition) {\n      switch (type) {\n        case WhereType.Id:\n          this.id = +condition;\n          break;\n\n        case WhereType.Author:\n          this.wheres.push({\n            type: 'a',\n            condition: condition\n          });\n          break;\n\n        case WhereType.Title:\n          this.wheres.push({\n            type: '/',\n            condition: condition\n          });\n          break;\n\n        default:\n          throw new Error(\"Invalid type: \".concat(type));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.wheres.map(function (_ref) {\n        var type = _ref.type,\n            condition = _ref.condition;\n        return \"\".concat(type).concat(condition).concat(_utils.keymap.Enter);\n      }).join();\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var found, id, mails, i, line, mail;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context.sent;\n\n                if (found) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", []);\n\n              case 7:\n                if (!(this.id > 0)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                id = Math.max(this.id - 9, 1);\n                _context.next = 11;\n                return this.bot.send(\"\".concat(_utils.keymap.End).concat(_utils.keymap.End).concat(id).concat(_utils.keymap.Enter));\n\n              case 11:\n                mails = [];\n                i = 3;\n\n              case 13:\n                if (!(i <= 22)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                line = this.bot.line[i];\n\n                if (!(line.str.trim() === '')) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 22);\n\n              case 17:\n                mail = Mail.fromLine(line);\n                mails.push(mail);\n\n              case 19:\n                i++;\n                _context.next = 13;\n                break;\n\n              case 22:\n                _context.next = 24;\n                return this.bot.enterIndex();\n\n              case 24:\n                return _context.abrupt(\"return\", mails.reverse());\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getOne\",\n    value: function () {\n      var _getOne = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var found, mail;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.bot.enterMail();\n\n              case 2:\n                _context2.next = 4;\n                return this.bot.send(this.getQuery());\n\n              case 4:\n                found = _context2.sent;\n\n                if (found) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", void 0);\n\n              case 7:\n                _context2.next = 9;\n                return this.bot.send(\"\".concat(this.id).concat(_utils.keymap.Enter).concat(_utils.keymap.Enter));\n\n              case 9:\n                mail = new Mail();\n                mail.id = this.id;\n                _context2.next = 13;\n                return this.bot.getContent();\n\n              case 13:\n                mail.content = _context2.sent;\n\n                if (mail.hasHeader()) {\n                  mail.author = (0, _char.substrWidth)('dbcs', this.bot.line[0].str, 7, 50).trim();\n                  mail.title = (0, _char.substrWidth)('dbcs', this.bot.line[1].str, 7).trim();\n                  mail.timestamp = (0, _char.substrWidth)('dbcs', this.bot.line[2].str, 7).trim();\n                }\n\n                _context2.next = 17;\n                return this.bot.enterIndex();\n\n              case 17:\n                return _context2.abrupt(\"return\", mail);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getOne() {\n        return _getOne.apply(this, arguments);\n      }\n\n      return getOne;\n    }()\n  }]);\n  return MailSelectQueryBuilder;\n}(_SelectQueryBuilder2.SelectQueryBuilder);\n\nexports.MailSelectQueryBuilder = MailSelectQueryBuilder;\nvar _default = Mail;\nexports[\"default\"] = _default;","import { useState } from 'react';\nimport Cookies from 'universal-cookie';\nimport constate from \"constate\";\n\nconst cookies = new Cookies();\n\nconst useUser = () => {\n    const [user,setUser] = useState(cookies.get('user')); \n\n    return {\n      user,setUser\n    };\n  };\n\nexport const [UserProvider, useUserContext] = constate(useUser);\n","import { useState } from \"react\";\nimport constate from \"constate\";\n\nconst useProgress = () => {\n\tconst [isSnackbarOpen,setIsSnackbarOpen] = useState(false);\n\tconst [snackbarContent,setSnackbarContent] = useState({\n\t\tseverity:\"\",\n\t\ttext:\"\",\n\t});\n\t\n\n\tconst info = {\n\t\tisSnackbarOpen:isSnackbarOpen,\n\t\tsetIsSnackbarOpen:setIsSnackbarOpen,\n\t\tsnackbarContent:snackbarContent,\n\t\tsetSnackbarContent:setSnackbarContent,\n\t};\n\treturn info;\n};\n\nexport const [ProgressProvider, useProgressContext] = constate(\n\tuseProgress\n);\n","import { useState } from \"react\";\nimport constate from \"constate\";\nimport Ptt from \"ptt-client\";\nimport usePrev from \"./usePrev\";\nimport { useProgressContext } from \"./ProgressContext\";\n\n/*  new   */\nconst useBot = () => {\n\t\n\tconsole.info('new useBot()')\n\tconst [bot] = useState(new Ptt());\n\t\n\tconst [botState, setBotState] = useState(bot.state);\n\tconst prevBotState = usePrev(botState);\n\n\t// const { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\n\tbot.on(\"connect\", () => {\n\t\t//console.log(\"bot connected\");\n\t\tsetBotState(bot.state);\n\t});\n\n\tbot.on(\"disconnect\", () => {\n\t\t//console.log(\"bot disconnected\");\n\t\tsetBotState(bot.state);\n\t});\n\n\tlet busy = false;\n\n\t// login function\n\tconst login = async arg => {\n\t\tconst username = arg.username,\n\t\t\tpassword = arg.password;\n\t\tlet res = await bot.login(username, password, true);\n\t\tif (res) setBotState({ ...botState, login: true });\n\t\treturn res;\n\t};\n\n\t// bot command\n\tconst executeCommand = async command => {\n\t\tif (busy) {\n\t\t\t// setSnackbarContent({severity:'info',text:''})\n\t\t\t// setIsSnackbarOpen(true)\n\t\t\treturn Promise.reject('bot is busy!');\n\t\t}\n\t\tbusy = true;\n\t\t//console.log(\"bot command : \", command);\n\t\ttry {\n\t\t\t// not connected\n\t\t\tif (!botState.connect) return Promise.reject('not login!');\n\t\t\t// go back to index\n\t\t\tif (command.type === \"index\") {\n\t\t\t\tawait bot.enterIndex();\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// go to top of article\n\t\t\tif (command.type === \"top\") {\n\t\t\t\tawait bot.goToTop();\n\t\t\t\tbusy = false;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// login\n\t\t\tif (command.type === \"login\") {\n\t\t\t\tif (botState.login) return true;\n\t\t\t\tlet res = await login(command.arg);\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t// articleList\n\t\t\tif (command.type === \"select\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.get();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t\n\t\t\t// content \n\t\t\tif (command.type === \"content\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.getOne();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tif(command.type === \"contentIterator\") {\n\t\t\t\tif (!botState.login) return false;\n\t\t\t\tlet query = command.arg;\n\t\t\t\tlet res = await query.getOneIterator();\n\t\t\t\tbusy = false;\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t\n\t\t\t// // comment in normal mode\n\t\t\t// if (command.type === \"comment\") {\n\t\t\t// \tif (!botState.login) return false;\n\t\t\t// \tawait bot.sendComment(command.arg);\n\t\t\t// \tbusy = false;\n\t\t\t// \treturn true;\n\t\t\t// }\n\n\t\t} catch(err) {\n\t\t\tbusy = false;\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t};\n\t\n\treturn {\n\t\tbot: bot,\n\t\tbotState: botState,\n\t\tprevBotState: prevBotState,\n\t\tsetBotState: setBotState,\n\t\texecuteCommand: executeCommand\n\t};\n};\n\nexport const [BotProvider, useBotContext] = constate(useBot);\n","import {React, useRef,useEffect} from \"react\";\nexport default function usePrev(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }","import React, { useState, useEffect, useCallback } from \"react\";\n// import Avatar from '@material-ui/core/Avatar';\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport { useUserContext } from \"./UserContext\";\nimport { useBotContext } from \"./BotContext\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport { useForm } from \"react-hook-form\";\nimport Cookies from \"universal-cookie\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tflexDirection: \"column\"\n\t},\n\tpaperform: {\n\t\twidth: \"400px\",\n\t\tmargin: theme.spacing(8, 4),\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\"\n\t},\n\tpaperlogging: {\n\t\tminWidth: \"12vw\",\n\t\theight: \"9vh\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tposition: \"absolute\",\n\t\tmarginTop: \"25vh\",\n\t\tzIndex: theme.zIndex.drawer + 2\n\t},\n\tpaperreconnect: {\n\t\tpadding:\"12px\",\n\t\tminWidth: \"20vw\",\n\t\theight: \"15vh\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\treconnectText:{},\n\treconnectButton:{\n\t\talignSelf:\"flex-end\"\n\t},\n\tform: {\n\t\twidth: \"80%\",\n\t\tmarginTop: theme.spacing(1)\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2)\n\t},\n\tsignin: {\n\t\tmarginTop: theme.spacing(2)\n\t},\n\tbackdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: \"#fff\"\n\t},\n\tcircle: {\n\t\tmarginRight: \"9px\"\n\t}\n}));\n\nexport default function Login() {\n\tconst classes = useStyles();\n\n\tconst { user, setUser } = useUserContext();\n\tconst BotContext = useBotContext();\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\tconst { register, handleSubmit } = useForm();\n\n\tconst onSubmit = async (data, e) => {\n\t\te.preventDefault();\n\t\tlet myUser = { username: data.username, password: data.password };\n\t\tlet loginRes = await loginCallback(myUser);\n\t\tif (loginRes) {\n\t\t\t// save it in cookie\n\t\t\tconst cookies = new Cookies();\n\t\t\tcookies.set(\"user\", myUser);\n\t\t\tsetUser(myUser);\n\t\t}\n\t};\n\n\tconst loginCallback = useCallback(\n\t\tasync myUser => {\n\t\t\t//console.log(myUser);\n\t\t\tsetOpenForm(false);\n\t\t\tsetOpenLoadingCircle(true);\n\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\ttype: \"login\",\n\t\t\t\targ: myUser\n\t\t\t});\n\t\t\tif (res) {\n\t\t\t\t//console.log(\"login success\");\n\t\t\t\tsetOpenBackDrop(false);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\t//console.log(\"login fail\");\n\t\t\t\tsetSnackbarContent({\n\t\t\t\t\tseverity: \"error\",\n\t\t\t\t\ttext: \"\"\n\t\t\t\t});\n\t\t\t\tsetIsSnackbarOpen(true);\n\t\t\t\tsetOpenForm(true);\n\t\t\t\tsetOpenLoadingCircle(false);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[BotContext]\n\t);\n\tconst handleReconnect = () => {\n\t\tBotContext.bot.reconnect();\n\t}\n\tconst [openBackDrop, setOpenBackDrop] = useState(!user);\n\tconst [openLoadingCircle, setOpenLoadingCircle] = useState(false);\n\tconst [openForm, setOpenForm] = useState(true);\n\tconst [openReconnect, setOpenReconnect] = useState(false);\n\n\tuseEffect(() => {\n\t\tasync function tryLogin() {\n\t\t\tawait loginCallback(user);\n\t\t}\n\t\t//console.log(\"botState:\", BotContext.botState);\n\t\t//console.log(\"prev botState:\", BotContext.prevBotState);\n\t\tif (user) {\n\t\t\tif (BotContext.prevBotState === undefined) return;\n\t\t\tif (\n\t\t\t\tBotContext.botState.connect &&\n\t\t\t\t!BotContext.prevBotState.connect\n\t\t\t) {\n\t\t\t\tsetOpenReconnect(false);\n\t\t\t\ttryLogin();\n\t\t\t} else if (\n\t\t\t\tBotContext.prevBotState.connect &&\n\t\t\t\t!BotContext.botState.connect\n\t\t\t) {\n\t\t\t\t// disconnected\n\t\t\t\tsetOpenBackDrop(true);\n\t\t\t\tsetOpenReconnect(true);\n\t\t\t}\n\t\t}\n\t}, [user, BotContext.botState, BotContext.prevBotState, loginCallback]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t{openLoadingCircle && (\n\t\t\t\t<Paper className={classes.paperlogging}>\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\tclassName={classes.circle}\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t{!BotContext.connect\n\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t: !BotContext.login\n\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Paper>\n\t\t\t)}\n\t\t\t<Backdrop className={classes.backdrop} open={openBackDrop}>\n\t\t\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t{openReconnect && (\n\t\t\t\t\t\t<Paper className={classes.paperreconnect}>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" className={classes.reconnectText}></Typography>\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" className={classes.reconnectButton} onClick={handleReconnect}>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\t\t\t\t\t{openForm && (\n\t\t\t\t\t\t<Paper className={classes.paperform}>\n\t\t\t\t\t\t\t{/* <Avatar variant=\"square\" className={classes.large} src=\"logo.png\"/> */}\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"h4\"\n\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\tclassName={classes.signin}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tPTT\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"username\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\tinputRef={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"remember\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t)}\n\t\t\t\t</Grid>\n\t\t\t</Backdrop>\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport {ListItem, ListItemText } from \"@material-ui/core\";\n\n\nexport default function ArticleCommentItem(commentLine) {\n\treturn (\n            <ListItem\n                disableGutters={true}\n                divider={true}\n                key={commentLine.key}\n            >\n                {commentLine.type ? (\n                    <ListItemText\n                        style={{flexBasis: \"5%\"}}\n                        primary={commentLine.type}\n                    />\n                ) : (\n                    \"\"\n                )}\n                {commentLine.author ? (\n                    <ListItemText\n                        style={{flexBasis: \"20%\"}}\n                        primary={commentLine.author}\n                    />\n                ) : (\n                    \"\"\n                )}\n\n                <ListItemText\n                    style={{flexBasis: \"65%\"}}\n                    primary={commentLine.text}\n                />\n                {commentLine.timestamp ? (\n                    <ListItemText\n                        style={{flexBasis: \"10%\"}}\n                        primary={commentLine.floor + \"F\"}\n                        secondary={commentLine.timestamp}\n                    />\n                ) : (\n                    \"\"\n                )}\n            </ListItem>\n\t);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {ListItem, ListItemText } from \"@material-ui/core\";\n\n\nexport default function ArticleContentItem(props) {\n    const key = props.key;\n    const text = props.text;\n\t\n  \n\t\n\treturn (\n\t\t<ListItem key={key} disableGutters={true} style={{whiteSpace: \"pre\"}}>\n\t\t\t\t\t\t<ListItemText primary={text} />\n        </ListItem>\n\t);\n}\n","import { Article as ArticleModel } from \"ptt-client/dist/sites/ptt/model\";\nimport { URL2AID } from \"./decode\";\nimport ArticleCommentItem from \"../ArticleCommentItem\";\nimport ArticleContentItem from \"../ArticleContentItem\";\nconst initArticle = async (articleItem, BotContext) => {\n\ttry {\n\t\tlet article = {\n\t\t\tinfo: {\n\t\t\t\tid: \"\",\n\t\t\t\taid: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\tboardname: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\ttitle: \"\",\n\t\t\t\tip: \"\"\n\t\t\t},\n\t\t\tlines: [],\n\t\t\titerator: null,\n\t\t\tsendComment: null\n\t\t};\n\t\tarticle.info.boardname = articleItem.boardname;\n\t\tarticle.info.id = articleItem.id;\n\t\tarticle.info.title = articleItem.title;\n\t\tarticle.info.author = articleItem.author;\n\n\t\tlet res = await getArticleResponseIterator(BotContext, article);\n\n\t\t// call the iterator to get info first\n\t\tarticle.iterator = res.iterator;\n\t\tlet firstPartOfContent = await article.iterator.next();\n\t\tfirstPartOfContent = firstPartOfContent.value;\n\t\t// parse header\n\t\tif (\n\t\t\tfirstPartOfContent.length > 0 &&\n\t\t\tfirstPartOfContent[0].str.includes(\"\")\n\t\t) {\n\t\t\tarticle.info.author = firstPartOfContent[0].str\n\t\t\t\t.substring(4, 50)\n\t\t\t\t.trim();\n\t\t\tarticle.info.timestamp = firstPartOfContent[2].str\n\t\t\t\t.substring(3)\n\t\t\t\t.trim();\n\t\t\t// get rid of first four lines\n\t\t\tfirstPartOfContent = firstPartOfContent.slice(4);\n\t\t}\n\t\t// parse other lines\n\t\t[article.lines, article.commentStartFloor] = parseArticleLines(\n\t\t\tfirstPartOfContent,\n\t\t\t1,\n\t\t\t0\n\t\t);\n\n\t\tarticle.sendComment = res.sendComment;\n\t\treturn article;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\nconst getArticleResponseIterator = async (BotContext, article) => {\n\tlet query = BotContext.bot\n\t\t.select(ArticleModel)\n\t\t.where(\"boardname\", article.info.boardname)\n\t\t.where(\"author\", article.info.author)\n\t\t.where(\"title\", article.info.title)\n\t\t.where(\"id\", article.info.id);\n\tconsole.log(\"q\", query);\n\n\tlet res = await BotContext.executeCommand({\n\t\ttype: \"contentIterator\",\n\t\targ: query\n\t});\n\tif (!res) return Promise.reject(\"getArticleResponse err.\");\n\tconsole.log(res);\n\treturn res;\n};\n\n\n\nconst parseArticle = async (articleItem, BotContext) => {\n\ttry {\n\t\tlet article = {\n\t\t\tinfo: {\n\t\t\t\tid: \"\",\n\t\t\t\taid: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\tboardname: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\tcommentStartIndex: -1,\n\t\t\t\ttitle: \"\",\n\t\t\t\tip: \"\"\n\t\t\t},\n\t\t\tcontent: [],\n\t\t\tcomment: []\n\t\t};\n\t\tarticle.info.boardname = articleItem.boardname;\n\t\tarticle.info.id = articleItem.id;\n\t\tarticle.info.title = articleItem.title;\n\t\tarticle.info.author = articleItem.author;\n\t\tlet res = await getArticleResponse(BotContext, article);\n\n\t\tarticle.info.aid = \"\";\n\n\t\tarticle.info.timestamp = res.timestamp;\n\t\tarticle.info.commentStartIndex = -1;\n\t\tarticle.info.title = res.title;\n\t\tarticle.info.ip = \"\";\n\t\tarticle.content = [];\n\t\tarticle.comment = [];\n\t\tparseArticleInfoAndContent(res, article);\n\t\tparseArticleComment(res, article);\n\t\t// //console.log(article);\n\t\treturn article;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\nconst getArticleResponse = async (BotContext, article) => {\n\tlet query = BotContext.bot\n\t\t.select(ArticleModel)\n\t\t.where(\"boardname\", article.info.boardname)\n\t\t.where(\"author\", article.info.author)\n\t\t.where(\"title\", article.info.title);\n\tconsole.log(\"q\", query);\n\n\tlet res = await BotContext.executeCommand({\n\t\ttype: \"content\",\n\t\targ: query\n\t});\n\tif (!res) return Promise.reject(\"getArticleResponse err.\");\n\tconsole.log(res);\n\treturn res;\n};\n\n// Start from top.\nconst parseArticleInfoAndContent = (res, article) => {\n\tlet content = res.content;\n\t// content starts from index 4\n\tfor (let i = 4; i < content.length; i++) {\n\t\tlet s = content[i].str;\n\t\tif (s.startsWith(\" : (ptt.cc)\")) {\n\t\t\tarticle.info.ip = s.substring(27);\n\t\t\t// next line should be \" : https://www.ptt.cc/bbs/Test/M.1588897271.A.57F.html\"\n\t\t\tif (\n\t\t\t\ti + 1 < content.length &&\n\t\t\t\tcontent[i + 1].str.startsWith(\" : \")\n\t\t\t) {\n\t\t\t\t// parse as AID\n\t\t\t\tlet aidLine = content[++i].str;\n\t\t\t\tlet url = aidLine.substring(aidLine.indexOf(\":\") + 2);\n\t\t\t\tconst [board, AID] = URL2AID(url);\n\t\t\t\tarticle.info.aid = AID;\n\t\t\t\tarticle.info.commentStartIndex = i + 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tarticle.content.push(s);\n\t\t}\n\t}\n};\n// Starts from top.\n// Todo : check commentStartIndex is correct.\nconst parseArticleComment = (res, article) => {\n\tif (article.info.commentStartIndex === -1) return;\n\n\tlet content = res.content;\n\t// clear all comment\n\tarticle.comment = [];\n\n\tfor (\n\t\tvar i = article.info.commentStartIndex, floor = 1;\n\t\ti < content.length;\n\t\ti++\n\t) {\n\t\tlet s = content[i].str;\n\t\t// type : '','',''\n\t\tlet commentLine = { type: \"\", author: \"\", text: \"\", timestamp: \"\" };\n\t\t// find out whether it is a normal comment\n\t\tif (s.match(/[]\\s+[\\w\\d]+\\s*:.+/)) {\n\t\t\t// todo : check has ip\n\n\t\t\tcommentLine.floor = floor++;\n\t\t\tcommentLine.type = s[0];\n\t\t\tcommentLine.timestamp = s.substring(s.length - 11);\n\t\t\tlet firstColon = s.indexOf(\":\");\n\t\t\tcommentLine.author = s.substring(2, firstColon);\n\t\t\tcommentLine.text = s.substring(firstColon + 1, s.length - 11);\n\t\t} else {\n\t\t\tcommentLine.text = s;\n\t\t}\n\t\tarticle.comment.push(commentLine);\n\t}\n};\n\n// This is used when you already have article.\n// Used in sendComment because we only need to refresh comment.\nconst refreshArticleComment = async (BotContext, article, criteria) => {\n\tlet res = await getArticleResponse(BotContext, article, criteria);\n\tif (!res) return Promise.reject(\"refreshArticleComment err\");\n\tparseArticleComment(res, article);\n\t//console.log(\"refresh\", article.comment);\n\treturn article;\n};\n\n// Get articleList based on searching criteria\n// criteria = { boardname:'',\n//  \t\t\ttitle:'',\n//   \t\t\tauthor:'',\n//    \t\t\tpush:'',\n//\t\t\t\tid:'',\n// \t\t\t  }\n\nconst getArticleList = async (BotContext, criteria) => {\n\ttry {\n\t\t// build query based on criteria\n\t\tlet query = BotContext.bot\n\t\t\t.select(ArticleModel)\n\t\t\t.where(\"boardname\", criteria.boardname);\n\t\tif (criteria.id) query.where(\"id\", criteria.id);\n\t\tif (criteria.title) query.where(\"title\", criteria.title);\n\t\tif (criteria.author) query.where(\"author\", criteria.author);\n\t\tif (criteria.push) query.where(\"push\", criteria.push);\n\n\t\tlet res = await BotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t});\n\t\treturn res;\n\t} catch (err) {\n\t\treturn Promise.reject(err);\n\t}\n};\n\n// parse article line by line, generate parsed line items.\nconst parseArticleLines = (lines, commentStartFloor, index) => {\n\tlet res = [];\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tlet s = lines[i].str;\n\t\t// comment line\n\t\tif (s.match(/[]\\s+[\\w\\d]+\\s*:.+/)) {\n\t\t\t// type : '','',''\n\t\t\tlet commentLine = {\n\t\t\t\ttype: \"\",\n\t\t\t\tauthor: \"\",\n\t\t\t\ttext: \"\",\n\t\t\t\ttimestamp: \"\",\n\t\t\t\tkey: index\n\t\t\t};\n\t\t\t// todo : check has ip\n\t\t\tcommentLine.floor = commentStartFloor++;\n\t\t\tcommentLine.type = s[0];\n\t\t\tcommentLine.timestamp = s.substring(s.length - 11);\n\t\t\tlet firstColon = s.indexOf(\":\");\n\t\t\tcommentLine.author = s.substring(2, firstColon);\n\t\t\tcommentLine.text = s.substring(firstColon + 1, s.length - 11);\n\t\t\tres.push(ArticleCommentItem(commentLine));\n\t\t} else {\n\t\t\t// not comment line\n\t\t\tres.push(ArticleContentItem({ text: s, key: index }));\n\t\t}\n\t\tindex++;\n\t}\n\treturn [res, commentStartFloor];\n};\n\nexport {\n\tparseArticle,\n\trefreshArticleComment,\n\tgetArticleList,\n\tinitArticle,\n\tparseArticleLines\n};\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { getArticleList } from \"./utils/article\";\n\nexport default function BoardItem(props) {\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\n\tconst handleClick = async () => {\n\t\t//console.log(\"boardItem click\", item, info, BotContext);\n\t\ttry {\n\t\t\tlet criteria = { boardname: item.name };\n\t\t\tinfo.setArticleList([]);\n\t\t\tinfo.sethaveSelectBoard(true);\n\t\t\t// scroll to top of this article: prevent reenter bug\n\t\t\tawait BotContext.executeCommand({ type: \"top\" });\n\t\t\t// very important to get back to index\n\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\tlet res = await getArticleList(BotContext, criteria);\n\n\t\t\tinfo.setArticleList(res);\n\t\t\tinfo.setBoardName(item.name);\n\t\t\tinfo.setIndex(0);\n\t\t\tinfo.setCriteria({});\n\t\t\t// clear search\n\t\t\tinfo.setArticleSearchList([]);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tbutton\n\t\t\tonClick={handleClick}\n\t\t\tkey={item.name}\n\t\t\tstyle={{ height: \"10vh\" }}\n\t\t>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.name}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.title}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<ListItemIcon style={{ justifyContent: \"center\" }}>\n\t\t\t\t<ChevronRightIcon />\n\t\t\t</ListItemIcon>\n\t\t</ListItem>\n\t);\n}\n","import { useState } from \"react\";\nimport constate from \"constate\";\nimport { Article } from \"./utils/article\";\nimport { useBotContext } from \"./BotContext\";\n\nconst useArticleBoardInfo = () => {\n\tconst BotContext = useBotContext();\n\tconst [boardName, setBoardName] = useState(\"\");\n\tconst [article, setArticle] = new useState({\n\t\tinfo: {\n\t\t\tid: \"\",\n\t\t\taid: \"\",\n\t\t\tauthor: \"\",\n\t\t\tboardname: \"\",\n\t\t\ttimestamp: \"\",\n\t\t\ttitle: \"\",\n\t\t},\n\t\tlines:[],\n\t\titerator:null,\n\t});\n\n\tconst [articleList, setArticleList] = useState([]);\n\tconst [index, setIndex] = useState(0);\n\tconst [articleSearchList, setArticleSearchList] = useState([]);\n\tconst [criteria, setCriteria] = useState({});\n\tconst [haveSelectBoard, sethaveSelectBoard] = useState(false);\n\tconst info = {\n\t\tboardName: boardName,\n\t\tsetBoardName: setBoardName,\n\t\tarticle: article,\n\t\tsetArticle: setArticle,\n\t\tarticleList: articleList,\n\t\tsetArticleList: setArticleList,\n\t\tindex: index,\n\t\tsetIndex: setIndex,\n\t\tarticleSearchList : articleSearchList,\n\t\tsetArticleSearchList : setArticleSearchList,\n\t\tcriteria: criteria,\n\t\tsetCriteria : setCriteria,\n\t\thaveSelectBoard:haveSelectBoard,\n\t\tsethaveSelectBoard:sethaveSelectBoard\n\t};\n\n\n\treturn info;\n};\n\nexport const [ArticleBoardInfoProvider, useArticleBoardInfoContext] = constate(\n\tuseArticleBoardInfo\n);\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { useUserContext } from \"./UserContext\";\nimport { useBotContext } from \"./BotContext\";\nimport List from \"@material-ui/core/List\";\nimport BoardItem from \"./BoardItem\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\n\n// wierd import...\nimport { Board } from \"ptt-client/dist/sites/ptt/model\";\n\nexport default function BoardDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"80vh\",\n\t\t\theight: \"80vh\",\n\t\t\toverflow: \"auto\",\n\t\t\talignContent: \"flex-start\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tlist: {\n\t\t\tpadding: \"0px\",\n\t\t\twidth:\"100%\"\n\t\t}\n\t}));\n\tconst classes = useStyles();\n\tconst { user } = useUserContext();\n\tconst BotContext = useBotContext();\n\tconst [listItems, setListItems] = useState([]);\n\n\tconst info = useArticleBoardInfoContext();\n\n\tlet hotItems = useRef(null);\n\tlet favoriteItems = useRef(null);\n\tlet searchCache = useRef({});\n\tlet selectedBoard = props.selectedBoard;\n\tlet searchBoardText = props.searchBoardText;\n\n\t// Optimization : 1. Cache all search response.\n\tconst getBoardCallback = useCallback(async () => {\n\t\t// if searchBoardText is not empty -> search board with this text\n\t\t// else search based on selectedBoard\n\t\t//console.log(\"searchCache\", searchCache);\n\t\tlet lis;\n\t\tlet query;\n\t\tif (searchBoardText.length > 0) {\n\t\t\tif (searchCache.current[searchBoardText]) {\n\t\t\t\tlis = searchCache.current[searchBoardText];\n\t\t\t} else {\n\t\t\t\tquery = BotContext.bot\n\t\t\t\t\t.select(Board)\n\t\t\t\t\t.where(\"prefix\", searchBoardText);\n\t\t\t}\n\t\t} else {\n\t\t\t// already cached\n\t\t\tif (selectedBoard === \"hot\" && hotItems.current) {\n\t\t\t\tlis = hotItems.current;\n\t\t\t\t//console.log(\"hot cache\", hotItems);\n\t\t\t} else if (selectedBoard === \"favorite\" && favoriteItems.current) {\n\t\t\t\tlis = favoriteItems.current;\n\t\t\t} else {\n\t\t\t\tquery =\n\t\t\t\t\tselectedBoard === \"hot\"\n\t\t\t\t\t\t? BotContext.bot.select(Board).where(\"entry\", \"hot\")\n\t\t\t\t\t\t: BotContext.bot\n\t\t\t\t\t\t\t\t.select(Board)\n\t\t\t\t\t\t\t\t.where(\"entry\", \"favorite\");\n\t\t\t}\n\t\t}\n\t\tif (!lis) {\n\t\t\tlet t1 = performance.now();\n\t\t\tlet res = await BotContext.executeCommand({\n\t\t\t\ttype: \"select\",\n\t\t\t\targ: query\n\t\t\t});\n\t\t\tlet t2 = performance.now();\n\t\t\t//console.log(\"bot select board\", t2 - t1);\n\t\t\tif (!res) return false;\n\t\t\t//console.log(res);\n\t\t\t// generate list items\n\t\t\tlis = res.map(item => {\n\t\t\t\treturn BoardItem({ item, info, BotContext });\n\t\t\t});\n\t\t\tlet t3 = performance.now();\n\t\t\t//console.log(\"map boardItem\", t3 - t2);\n\n\t\t\t// we cache for speed\n\t\t\tif (searchBoardText.length === 0) {\n\t\t\t\tif (selectedBoard === \"hot\") {\n\t\t\t\t\thotItems.current = lis;\n\t\t\t\t} else if (selectedBoard === \"favorite\") {\n\t\t\t\t\tfavoriteItems.current = lis;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsearchCache.current[searchBoardText] = lis;\n\t\t\t}\n\t\t}\n\t\tsetListItems(lis);\n\t}, [BotContext, setListItems, selectedBoard, info, searchBoardText]);\n\n\tuseEffect(() => {\n\t\tasync function getBoard() {\n\t\t\treturn await getBoardCallback(user);\n\t\t}\n\t\t// get board list at the beginning\n\t\tif (BotContext.botState.login) {\n\t\t\t//console.log(selectedBoard);\n\t\t\tgetBoard();\n\t\t}\n\t}, [BotContext.botState.login, selectedBoard, searchBoardText]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{searchBoardText.length === 0 && listItems.length === 0 && (\n\t\t\t\t\t<Skeleton count={6} />\n\t\t\t\t)}\n\t\t\t</Grid>\n\t\t\t{listItems && <List className={classes.list}> {listItems} </List>}\n\t\t\t{!listItems && \"\"}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Skeleton from \"react-loading-skeleton\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { useBotContext } from \"./BotContext\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nexport default function BoardSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\tskeleton: {\n\t\t\tfontSize: \"24px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\troot: {\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\t\n\t\t},\n\t\tselect: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\twidth: \"100%\"\n\t\t},\n\t\ttabs: {\n\t\t\tflexBasis: \"85%\"\n\t\t},\n\t\ttab: {\n\t\t\tfontSize: \"0.8rem\",\n\t\t\tminWidth: \"50%\"\n\t\t},\n\t\tsearchBotton: {\n\t\t\tflexBasis: \"15%\",\n\t\t},\n\t\tbtntabs: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tinputbase: {}\n\t}));\n\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [selectedValue, setSelectedValue] = useState(0);\n\tconst [isInputShow, setIsInputShow] = useState(false);\n\tlet setSelectedBoard = props.setSelectedBoard;\n\tlet setSearchBoardText = props.setSearchBoardText;\n\n\tconst handleChange = (e, v) => {\n\t\tsetSelectedValue(v);\n\t};\n\tconst handleSearchClick = () => {\n\t\tsetIsInputShow(isInputShow => !isInputShow);\n\t};\n\tconst handleInputbaseOnChange = (e) => {\n\t\t//console.log('search board text',e.target.value);\n\t\tsetSearchBoardText(e.target.value);\n\t}\n\t\n\tuseEffect(() => {\n\t\tlet selectedBoard = \"hot\";\n\t\tswitch (selectedValue) {\n\t\t\tcase 0:\n\t\t\t\tselectedBoard = \"hot\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tselectedBoard = \"favorite\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tsetSelectedBoard(selectedBoard);\n\t}, [selectedValue, setSelectedBoard]);\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<Grid item className={classes.skeleton}>\n\t\t\t\t{!BotContext.botState.login && <Skeleton count={1} />}\n\t\t\t</Grid>\n\t\t\t{BotContext.botState.login && (\n\t\t\t\t<Grid item className={classes.select}>\n\t\t\t\t\t<Grid item className={classes.btntabs}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\taria-label=\"search board\"\n\t\t\t\t\t\t\tclassName={classes.searchBotton}\n\t\t\t\t\t\t\tonClick={handleSearchClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tvalue={selectedValue}\n\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tclassName={classes.tabs}\n\t\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\twrapped\n\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\tclassName={classes.tab}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Collapse in={isInputShow}>\n\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\tonChange={handleInputbaseOnChange}\n\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\tclassName={classes.inputbase}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport BoardDisplay from \"./BoardDisplay\";\nimport BoardSelect from \"./BoardSelect\";\n\nexport default function BoardArea() {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\tposition: \"relative\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRight: `1px solid ${theme.palette.divider}`,\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t}\n\t}));\n\tconst classes = useStyles();\n\tconst [selectedBoard, setSelectedBoard] = useState(\"hot\");\n\tconst [searchBoardText, setSearchBoardText] = useState(\"\");\n\treturn (\n\t\t\n\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<BoardSelect setSelectedBoard = {setSelectedBoard} setSearchBoardText={setSearchBoardText}/>\n\t\t\t<BoardDisplay selectedBoard={selectedBoard} searchBoardText={searchBoardText} />\n\t\t</Grid>\n\t);\n}\n","import React, { useState } from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nimport { refreshArticleComment } from \"./utils/article\";\nexport default function SendComment(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\",\n\t\t\tpaddingBottom: \"12px\",\n\t\t\tpaddingTop:'12px',\n\t\t\tminHeight: '12vh'\n\t\t},\n\t\tdivider: {\n\t\t\theight: \"100%\",\n\t\t\tmargin: 4\n\t\t},\n\t\ttype: {\n\t\t\tflexBasis: \"10%\"\n\t\t},\n\t\ttext: {\n\t\t\tflexBasis: \"75%\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\"\n\t\t},\n\t\tbutton: {\n\t\t\tfontSize: \"0.6rem\",\n\t\t\theight: \"fit-content\",\n\t\t\tflexBasis: \"10%\",\n\t\t\talignSelf: \"center\"\n\t\t},\n\t\tsending: {\n\t\t\tflexBasis: \"5%\",\n\t\t\talignSelf: \"center\",\n\t\t\tmarginLeft: \"4px\"\n\t\t},\n\t\tlp: {\n\t\t\twidth: \"100%\"\n\t\t}\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\tconst setHasMore = props.setHasMore;\n \tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\tconst [isSending, setIsSending] = useState(false);\n\tconst { handleSubmit, control } = useForm();\n\t// Todo : 1. \n\t//        2. variable length\n\n\tconst onSubmit = async values => {\n\t\t//console.log(values);\n\t\tlet text = values.text;\n\t\t// do not send empty str\n\t\ttext = text.trim();\n\t\tif (text.length === 0) return;\n\t\tsetIsSending(true);\n\t\t\n\t\tlet arg = {\n\t\t\ttype: values.type,\n\t\t\ttext: text,\n\t\t\tboardName: article.info.boardname,\n\t\t\taid: article.info.aid\n\t\t};\n\n\t\ttry {\n\t\t\tawait article.sendComment(arg,BotContext.bot);\n\t\t\tarticle.iterator.reset();\n\t\t\tinfo.setArticle({\n\t\t\t\t...article,\n\t\t\t\tlines: [],\n\t\t\t\tcommentStartFloor: 1,\n\t\t\t});\n\t\t\tsetHasMore(true);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsSending(false);\n\t};\n\n\treturn (\n\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t<form\n\t\t\t\tonSubmit={handleSubmit(onSubmit)}\n\t\t\t\tclassName={classes.form}\n\t\t\t\tnoValidate\n\t\t\t\tautoComplete=\"off\"\n\t\t\t>\n\t\t\t\t<FormControl className={classes.type}>\n\t\t\t\t\t<InputLabel></InputLabel>\n\n\t\t\t\t\t<Controller\n\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t<Select>\n\t\t\t\t\t\t\t\t<MenuItem value={\"1\"}></MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"2\"}></MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={\"3\"}></MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\trules={{ required: \"this is required\" }}\n\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\tdefaultValue=\"1\"\n\t\t\t\t\t/>\n\t\t\t\t</FormControl>\n\n\t\t\t\t<Divider className={classes.divider} orientation=\"vertical\" />\n\t\t\t\t<Controller\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tas={<TextField label=\"\" multiline />}\n\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\tname=\"text\"\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\tendIcon={<PlayArrowIcon />}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t</Button>\n\t\t\t\t<Grid item className={classes.sending}>\n\t\t\t\t\t{isSending && <CircularProgress size={\"1rem\"} />}\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</Grid>\n\t);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n","import React, { useState, useEffect } from \"react\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport { List, ListItem, ListItemText } from \"@material-ui/core\";\nimport SendComment from \"./SendComment\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { parseArticleLines } from \"./utils/article\";\nimport { useBotContext } from \"./BotContext\";\nexport default function ArticleDisplay(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\ttop: {\n\t\t\theight: \"20vh\",\n\t\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\t\tmarginTop: \"12px\",\n\t\t\tflexWrap: \"nowrap\",\n\t\t\tpaddingLeft: \"4vw\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\ttop: 0,\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: 1001\n\t\t},\n\t\tinfo: {},\n\t\ttitleText: {\n\t\t\talignSelf: \"center\",\n\t\t\tflexBasis: \"100%\",\n\t\t\tflexGrow: \"0\",\n\t\t\tflexShrink: \"0\"\n\t\t},\n\n\t\tsendComment: {\n\t\t\tposition: \"absolute\",\n\t\t\tbottom: 0,\n\t\t\tbackgroundColor: theme.palette.background.paper\n\t\t},\n\t\tauthor: {\n\t\t\talignSelf: \"center\"\n\t\t},\n\n\t\tscrollBottom: {\n\t\t\tpaddingBottom: \"12vh\"\n\t\t},\n\t\tinfScroll: {\n\t\t\toverflow: \"inherit\",\n\t\t\tpaddingTop: 0,\n\t\t\twidth: \"100%\",\n\t\t\tpaddingLeft: \"4vw\",\n\t\t\tpaddingRight: \"2vw\"\n\t\t}\n\t}));\n\n\tconst info = useArticleBoardInfoContext();\n\tconst article = info.article;\n\tconst classes = useStyles();\n\tconst BotContext = useBotContext();\n\n\tconst ref = React.createRef();\n\tconst [hasMore, setHasMore] = useState(true);\n\t// go back to top when load new article\n\tuseEffect(() => {\n\t\tif (info.index === 2) {\n\t\t\tref.current.scrollTop = 0;\n\t\t} else {\n\t\t\t// when exist article display always set hasmore = true\n\t\t\t// fix next article not load more bug\n\t\t\tconsole.log(\"exit display\");\n\t\t\tsetHasMore(true);\n\t\t}\n\t}, [info.index]);\n\n\tconst handleLoadMore = async () => {\n\t\t// prevent default action\n\t\t// if (article.lines.length === 0) return;\n\t\t// call the iterator\n\t\tconsole.log(\"loadmore\");\n\n\t\ttry {\n\t\t\tperformance.mark(\"iterator.next()\");\n\t\t\tlet res = await article.iterator.next();\n\t\t\tperformance.mark(\"iterator.next() finished\");\n\t\t\tconsole.log(\"res\", res);\n\t\t\t// all loaded\n\t\t\tif (res.done) {\n\t\t\t\tsetHasMore(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// parse lines\n\t\t\tres = res.value;\n\t\t\t// parse other lines\n\t\t\tperformance.mark(\"parseLines\");\n\t\t\tlet parsed = parseArticleLines(\n\t\t\t\tres,\n\t\t\t\tarticle.commentStartFloor,\n\t\t\t\tarticle.lines.length\n\t\t\t);\n\t\t\tperformance.mark(\"parseLines finished\");\n\t\t\tlet newLines = [...article.lines, ...parsed[0]];\n\t\t\tlet newCommentStartFloor = parsed[1];\n\t\t\tconsole.log(\"article\", article);\n\t\t\tconsole.log(\"newLines\", newLines);\n\t\t\tconsole.log(\"newCommentStartFloor\", newCommentStartFloor);\n\t\t\tperformance.mark(\"setArticle\");\n\t\t\tinfo.setArticle({\n\t\t\t\t...article,\n\t\t\t\tlines: newLines,\n\t\t\t\tcommentStartFloor: newCommentStartFloor\n\t\t\t});\n\t\t\tperformance.mark(\"setArticle finished\");\n\t\t\tperformance.measure(\n\t\t\t\t\"iterator\",\n\t\t\t\t\"iterator.next()\",\n\t\t\t\t\"iterator.next() finished\"\n\t\t\t);\n\t\t\tperformance.measure(\n\t\t\t\t\"parselines\",\n\t\t\t\t\"parseLines\",\n\t\t\t\t\"parseLines finished\"\n\t\t\t);\n\t\t\tperformance.measure(\n\t\t\t\t\"setarticle\",\n\t\t\t\t\"setArticle\",\n\t\t\t\t\"setArticle finished\"\n\t\t\t);\n\t\t\tperformance.getEntriesByType(\"measure\").forEach(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\n\t\t\tperformance.clearMarks();\n\t\t\tperformance.clearMeasures();\n\t\t\tsetHasMore(true);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tref={ref}\n\t\t\tcomponent=\"main\"\n\t\t\tid=\"scrollableDiv2\"\n\t\t\tclassName={classes.root}\n\t\t>\n\t\t\t<CssBaseline />\n\t\t\t{info.index ? (\n\t\t\t\t<IconButton\n\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t// scroll to top of this article: prevent reenter bug\n\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"top\" });\n\t\t\t\t\t\t// very important to get back to index\n\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\tinfo.setIndex(\n\t\t\t\t\t\t\tinfo.articleSearchList.length > 0 ? 1 : 0\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t>\n\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t</IconButton>\n\t\t\t) : (\n\t\t\t\t\"\"\n\t\t\t)}\n\t\t\t<Grid container className={classes.top}>\n\t\t\t\t<Grid container className={classes.info}>\n\t\t\t\t\t<Typography className={classes.author} variant={\"body1\"}>\n\t\t\t\t\t\t{article.info.author}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography variant={\"h5\"} className={classes.titleText}>\n\t\t\t\t\t\t{article.info.title}\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<Typography className={classes.boardName} variant={\"body2\"}>\n\t\t\t\t\t\t{article.info.boardname}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography className={classes.timestamp} variant={\"body2\"}>\n\t\t\t\t\t\t{article.info.timestamp}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<InfiniteScroll\n\t\t\t\tclassName={classes.infScroll}\n\t\t\t\tscrollableTarget=\"scrollableDiv2\"\n\t\t\t\tdataLength={article.lines.length} //This is important field to render the next data\n\t\t\t\tnext={handleLoadMore}\n\t\t\t\thasMore={hasMore}\n\t\t\t\tloader={\n\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{article.lines}\n\t\t\t</InfiniteScroll>\n\t\t\t<Grid container className={classes.scrollBottom} />\n\n\t\t\t<Grid container className={classes.sendComment}>\n\t\t\t\t<SendComment setHasMore={setHasMore} />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { parseArticleLines, initArticle } from \"./utils/article\";\n\nexport default function ArticleItem(props) {\n\tlet item = props.item;\n\tlet info = props.info;\n\tlet BotContext = props.BotContext;\n\n\tconst handleClick = async () => {\n\t\t// handle deleted article\n\t\tif (item.title.startsWith(\"()\")) return;\n\t\tif (item.author.startsWith(\"-\")) return;\n\t\tconsole.log(\"article item click:\", info, item, BotContext);\n\t\ttry {\n\t\t\tlet article;\n\t\t\t// block load version\n\t\t\t// article = await parseArticle(item,BotContext);\n\t\t\t// iterator version\n\t\t\tperformance.mark(\"handleClick\");\n\t\t\tarticle = await initArticle(item, BotContext);\n\t\t\tconsole.log(\"article\", article);\n\t\t\tperformance.mark(\"setArticle\");\n\t\t\tinfo.setIndex(2);\n\t\t\tinfo.setArticle(article);\n\t\t\tperformance.measure(\"handleclick\", \"handleClick\");\n\t\t\tperformance.measure(\"setArticle\", \"setArticle\");\n\t\t\tperformance.getEntriesByType(\"measure\").forEach((e)=>{\n\t\t\t\tconsole.log(e);\n\t\t\t})\n\t\t\tperformance.clearMarks();\n\t\t\tperformance.clearMeasures();\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tonClick={handleClick}\n\t\t\tbutton\n\t\t\tkey={item.id}\n\t\t\tdivider={true}\n\t\t\tstyle={{ height: \"10vh\" }}\n\t\t>\n\t\t\t<ListItem\n\t\t\t\tstyle={{ flexBasis: \"15%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t>\n\t\t\t\t<ListItemText\n\t\t\t\t\tprimary={\n\t\t\t\t\t\t<Typography variant=\"body2\">{item.push}</Typography>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{item.status === \"R:\" && (\n\t\t\t\t\t<ListItemText\n\t\t\t\t\t\tprimary={<Typography variant=\"body2\">RE:</Typography>}\n\t\t\t\t\t\tstyle={{ textAlign: \"right\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ListItem>\n\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body1\">{item.title}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">{item.author}</Typography>\n\t\t\t\t}\n\t\t\t\tstyle={{ flexBasis: \"60%\", flexGrow: \"0\", flexShrink: \"0\" }}\n\t\t\t/>\n\t\t\t<ListItemText\n\t\t\t\tprimary={<Typography variant=\"body2\">{item.date}</Typography>}\n\t\t\t\tsecondary={\n\t\t\t\t\t<Typography variant=\"body2\">id:{item.id}</Typography>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<ListItemIcon style={{ justifyContent: \"center\" }}>\n\t\t\t\t<ChevronRightIcon />\n\t\t\t</ListItemIcon>\n\t\t</ListItem>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Article } from \"ptt-client/dist/sites/ptt/model\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Fab from \"@material-ui/core/Fab\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { getArticleList } from \"./utils/article\";\nimport { useProgressContext } from \"./ProgressContext\";\n\nexport default function ArticleSelect(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tinfo: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"0\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tsearchFab: {\n\t\t\tposition: \"absolute\",\n\t\t\tright: \"1vw\",\n\t\t\tbottom: \"1vh\",\n\t\t\tzIndex: \"1001\"\n\t\t},\n\t\tbackdrop: {\n\t\t\tzIndex: theme.zIndex.drawer + 1\n\t\t},\n\t\tpaper: {\n\t\t\tflexDirection: \"column\"\n\t\t},\n\t\tform: {\n\t\t\twidth: \"40vw\",\n\t\t\tmargin: \"12px\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\"\n\t\t},\n\t\tbutton: {\n\t\t\talignSelf: \"flex-end\",\n\t\t\tmarginTop: \"12px\"\n\t\t},\n\t\ttitle: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tauthor: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tpush: {\n\t\t\talignSelf: \"flex-start\",\n\t\t\twidth: \"90%\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tcloseIcon: {\n\t\t\tposition: \"absolute\",\n\t\t\tmargin: \"12px\"\n\t\t},\n\t\tsaTitle: {\n\t\t\ttextAlign: \"center\",\n\t\t\tmargin: \"24px\"\n\t\t},\n\t\tlist: {\n\t\t\twidth:'100%',\n\t\t}\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\tconst [isArticleSearchFormOpen, setIsArticleSearchFormOpen] = useState(\n\t\tfalse\n\t);\n\n\tconst [articleItems, setArticleItems] = useState([]);\n\n\tconst { setIsSnackbarOpen, setSnackbarContent } = useProgressContext();\n\n\tuseEffect(() => {\n\t\tif (info.articleList.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = info.articleList.map(item => {\n\t\t\t\treturn ArticleItem({ item, info, BotContext });\n\t\t\t});\n\t\t\tsetArticleItems(res);\n\t\t}\n\t}, [info]);\n\n\tconst toggleSearchForm = () => {\n\t\tsetIsArticleSearchFormOpen(\n\t\t\tisArticleSearchFormOpen => !isArticleSearchFormOpen\n\t\t);\n\t};\n\tconst { handleSubmit, control, errors } = useForm();\n\n\tconst onSubmitSearch = async values => {\n\t\t//console.log(values);\n\t\t// search for matching articles\n\t\tlet criteria = {\n\t\t\tboardname: info.boardName,\n\t\t\ttitle: values.title,\n\t\t\tauthor: values.author,\n\t\t\tpush: values.push\n\t\t};\n\t\tinfo.setCriteria(criteria);\n\t\ttry {\n\t\t\tlet res = await getArticleList(BotContext, criteria);\n\t\t\tconsole.log(res);\n\t\t\tif (res.length > 0) {\n\t\t\t\tinfo.setArticleSearchList(res);\n\t\t\t\tinfo.setIndex(1);\n\t\t\t} else {\n\t\t\t\tsetIsSnackbarOpen(true);\n\t\t\t\tsetSnackbarContent({\n\t\t\t\t\tseverity: \"error\",\n\t\t\t\t\ttext: \"\"\n\t\t\t\t});\n\t\t\t\tinfo.setCriteria({});\n\t\t\t}\n\t\t\ttoggleSearchForm();\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\tconst handleLoadMore = () => {\n\t\t// prevent default action\n\t\tif (info.articleList.length === 0) return;\n\n\t\t//console.log(\"handleLoadMore\", info);\n\t\tlet offset = info.articleList[info.articleList.length - 1].id;\n\t\tlet query = BotContext.bot\n\t\t\t.select(Article)\n\t\t\t.where(\"boardname\", info.boardName)\n\t\t\t.where(\"id\", offset);\n\t\tBotContext.executeCommand({\n\t\t\ttype: \"select\",\n\t\t\targ: query\n\t\t}).then(res => {\n\t\t\t//console.log(\"res\", res);\n\t\t\tif (!res) return false;\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < offset) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\tinfo.setArticleList([...info.articleList, ...res_reduced]);\n\t\t});\n\t};\n\treturn (\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tcomponent=\"main\"\n\t\t\tclassName={classes.root}\n\t\t\tid=\"scrollableDiv\"\n\t\t>\n\t\t\t<CssBaseline />\n\n\t\t\t<Grid\n\t\t\t\titem\n\t\t\t\tclassName={classes.skeleton}\n\t\t\t\talignItems=\"center\"\n\t\t\t\tjustify=\"center\"\n\t\t\t\talignContent=\"center\"\n\t\t\t>\n\t\t\t\t{info.articleList.length === 0 &&\n\t\t\t\t\t(info.haveSelectBoard ? (\n\t\t\t\t\t\t<Grid container className={classes.skeleton} alignItems=\"center\" justify=\"center\" alignContent='center'>\n\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\tclassName={classes.circle}\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>):\n\t\t\t\t\t\t<Skeleton count={3} />\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t\t{info.articleList.length > 0 && (\n\t\t\t\t<Grid container className={classes.list}>\n\t\t\t\t\t<Backdrop\n\t\t\t\t\t\tclassName={classes.backdrop}\n\t\t\t\t\t\topen={isArticleSearchFormOpen}\n\t\t\t\t\t\tinvisible={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ClickAwayListener\n\t\t\t\t\t\t\tmouseEvent={\n\t\t\t\t\t\t\t\tisArticleSearchFormOpen ? \"onClick\" : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClickAway={toggleSearchForm}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paper elevation={4} className={classes.paper}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={classes.closeIcon}\n\t\t\t\t\t\t\t\t\tonClick={toggleSearchForm}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t\t\t\t<Typography className={classes.saTitle}>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t\t<Divider\n\t\t\t\t\t\t\t\t\tclassName={classes.divider}\n\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmitSearch)}\n\t\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"\" />}\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.author}\n\t\t\t\t\t\t\t\t\t\tas={<TextField label=\"\" />}\n\t\t\t\t\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tclassName={classes.push}\n\t\t\t\t\t\t\t\t\t\tas={\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"()\"\n\t\t\t\t\t\t\t\t\t\t\t\thelperText={\n\t\t\t\t\t\t\t\t\t\t\t\t\terrors.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\terror={errors.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: /\\b\\d{0,6}\\b/\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tname=\"push\"\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t</Backdrop>\n\n\t\t\t\t\t<Grid item className={classes.info}>\n\t\t\t\t\t\t{info.boardName}\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Fab color=\"secondary\" className={classes.searchFab}>\n\t\t\t\t\t\t<SearchIcon onClick={toggleSearchForm} />\n\t\t\t\t\t</Fab>\n\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\t\tscrollableTarget=\"scrollableDiv\"\n\t\t\t\t\t\tdataLength={articleItems.length} //This is important field to render the next data\n\t\t\t\t\t\tnext={handleLoadMore}\n\t\t\t\t\t\thasMore={true}\n\t\t\t\t\t\tloader={\n\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{articleItems}\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport { useBotContext } from \"./BotContext\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport ArticleItem from \"./ArticleItem\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport { getArticleList } from \"./utils/article\";\n\nexport default function ArticleSearch(props) {\n\tconst useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmaxHeight: \"90vh\",\n\t\t\theight: \"90vh\",\n\t\t\toverflow: \"auto\"\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\t\tinfo: {\n\t\t\theight: \"fit-content\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.1)\"\n\t\t},\n\t\tgoback: {\n\t\t\twidth: \"4vw\",\n\t\t\tzIndex: 1001\n\t\t},\n\t\tbuttoninfo: {\n\t\t\ttop: \"0\",\n\t\t\tdisplay: \"flex\",\n\t\t\twidth: \"100%\",\n\t\t\tposition: \"absolute\",\n\t\t\tjustifyContent: \"space-between\"\n\t\t}\n\t}));\n\n\tconst classes = useStyles();\n\tconst info = useArticleBoardInfoContext();\n\tconst BotContext = useBotContext();\n\n\tconst [articleItems, setArticleItems] = useState([]);\n\n\tconst hasMore = () => {\n\t\treturn (\n\t\t\tinfo.articleSearchList.length > 0 &&\n\t\t\tinfo.articleSearchList[info.articleSearchList.length - 1].id > 1\n\t\t);\n\t};\n\n\t// generate items\n\tuseEffect(() => {\n\t\t////console.log(\"articleListSearch\", articleListSearch);\n\t\tif (info.articleSearchList.length > 0) {\n\t\t\t// generate list items\n\t\t\tlet res = info.articleSearchList.map(item => {\n\t\t\t\treturn ArticleItem({\n\t\t\t\t\titem,\n\t\t\t\t\tinfo,\n\t\t\t\t\tBotContext\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tsetArticleItems(res);\n\t\t\t////console.log(\"hi res\", res);\n\t\t}\n\t}, [info.articleSearchList]);\n\n\tconst handleLoadMore = async () => {\n\t\t////console.log(\"hlm\");\n\t\t// last id from current list\n\t\tlet l_id = info.articleSearchList[info.articleSearchList.length - 1].id;\n\t\t////console.log(\"l_id\", l_id);\n\t\t//console.log(values);\n\t\t// search for matching articles\n\t\tlet criteria = info.criteria;\n\t\tcriteria.id = l_id;\n\t\ttry {\n\t\t\tlet res = await getArticleList(BotContext, criteria);\n\t\t\t\n\t\t\t//console.log(\"res value\", res);\n\t\t\t// generate list items\n\t\t\tlet res_reduced = res.reduce((rtn, item) => {\n\t\t\t\tif (item.id < l_id) {\n\t\t\t\t\trtn.push(item);\n\t\t\t\t}\n\t\t\t\treturn rtn;\n\t\t\t}, []);\n\t\t\tinfo.setArticleSearchList([\n\t\t\t\t...info.articleSearchList,\n\t\t\t\t...res_reduced\n\t\t\t]);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\tif (info.index !== 1) return null;\n\telse {\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tcomponent=\"main\"\n\t\t\t\tclassName={classes.root}\n\t\t\t\tid=\"scrollableDiv1\"\n\t\t\t>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Grid className={classes.buttoninfo} item>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t// force bot to get back to index page\n\t\t\t\t\t\t\tawait BotContext.executeCommand({ type: \"index\" });\n\t\t\t\t\t\t\tinfo.setIndex(0);\n                            info.setArticleSearchList([]);\n                            info.setCriteria({});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={classes.goback}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChevronLeftIcon />\n\t\t\t\t\t</IconButton>\n\n\t\t\t\t\t<Grid item className={classes.info}>\n\t\t\t\t\t\t{info.criteria.boardname\n\t\t\t\t\t\t\t? `${info.criteria.boardname}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.title\n\t\t\t\t\t\t\t? `${info.criteria.title}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.author\n\t\t\t\t\t\t\t? `${info.criteria.author}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t{info.criteria.push\n\t\t\t\t\t\t\t? `${info.criteria.push}`\n\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tstyle={{ overflow: \"inherit\" }}\n\t\t\t\t\tscrollableTarget=\"scrollableDiv1\"\n\t\t\t\t\tdataLength={articleItems.length} //This is important field to render the next data\n                    next={handleLoadMore}\n                    scrollThreshold={0.5}\n\t\t\t\t\thasMore={hasMore()}\n\t\t\t\t\tloader={\n\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tsize={12}\n\t\t\t\t\t\t\tclassName={classes.loading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{articleItems}\n\t\t\t\t</InfiniteScroll>\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport { Grid } from \"@material-ui/core\";\nimport SwipeableViews from 'react-swipeable-views';\nimport ArticleDisplay from './ArticleDisplay';\nimport ArticleSelect from './ArticleSelect';\nimport { useArticleBoardInfoContext } from \"./ArticleBoardInfoContext\";\nimport ArticleSearch from \"./ArticleSearch\";\n\n\nexport default function ArticleArea() {\n  const useStyles = makeStyles(theme => ({\n\t\troot: {\n\t\t\twidth:'100%',\n\t\t},\n\t\tskeleton: {\n\t\t\tfontSize: \"40px\",\n\t\t\twidth: \"80%\"\n\t\t},\n\n  }));\n  const info = useArticleBoardInfoContext(); \n  const classes = useStyles();\n\n  const handleChangeIndex = (i) =>{\n    info.setIndex(i);\n  }\n  return(\n    <SwipeableViews index={info.index} onChangeIndex={handleChangeIndex} className={classes.root}>\n      <ArticleSelect/>\n      <ArticleSearch/>\n      <ArticleDisplay/>\n    </SwipeableViews>\n    \n  );\n    \n}","import React from \"react\";\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Link from \"@material-ui/core/Link\";\nimport InputBase from \"@material-ui/core/InputBase\";\nconst useStyles = makeStyles(theme => ({\n\ttoolbar: {\n\t\tboxShadow: \"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)\",\n\t\ttransition: \"all 0.3s cubic-bezier(.25,.8,.25,1)\",\n        position: \"sticky\",\n\t\tdisplay: \"flex\",\n\t\t\n\t},\n\ttoolbarTitle: {\n\t\tflex: 1\n\t},\n\ttoolbarSecondary: {\n\t\tjustifyContent: \"space-between\",\n\t\toverflowX: \"auto\"\n\t},\n\ttoolbarLink: {\n\t\tpadding: theme.spacing(1),\n\t\tflexShrink: 0\n\t},\n\t\n    title: {\n        fontFamily: 'Crimson Text',\n        fontSize: '32px',\n        marginRight: '16vw'\n    }\n}));\n\nexport default function Bar(props) {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Toolbar className={classes.toolbar} boxShadow={1}>\n                <div className={classes.title}>ModernPTT</div>\n\t\t\t\t\n\t\t\t</Toolbar>\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { useProgressContext } from \"./ProgressContext\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\nconst useStyles = makeStyles(theme => ({}));\n\nexport default function MySnackbar() {\n\tconst classes = useStyles();\n\tconst {\n\t\tisSnackbarOpen,\n\t\tsetIsSnackbarOpen,\n\t\tsnackbarContent\n\t} = useProgressContext();\n\tfunction Alert(props) {\n\t\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n\t}\n\n\tconst handleErrorBarClose = (event, reason) => {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\t\tsetIsSnackbarOpen(false);\n\t};\n\treturn (\n\t\t<Snackbar\n\t\t\topen={isSnackbarOpen}\n\t\t\tautoHideDuration={1000}\n\t\t\tonClose={handleErrorBarClose}\n\t\t>\n\t\t\t<Alert severity={snackbarContent.severity}>\n\t\t\t\t{snackbarContent.text}\n\t\t\t</Alert>\n\t\t</Snackbar>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport Login from \"./Login\";\nimport Account from \"./Account\";\n\nimport BoardArea from \"./BoardArea\";\nimport ArticleArea from \"./ArticleArea\";\nimport Bar from \"./Bar\";\nimport Container from \"@material-ui/core/Container\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { UserProvider } from \"./UserContext\";\nimport { BotProvider } from \"./BotContext\";\nimport { ArticleBoardInfoProvider } from \"./ArticleBoardInfoContext\";\nimport MySnackbar from \"./MySnackbar\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport { ProgressProvider } from \"./ProgressContext\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport { Resizable } from \"re-resizable\";\n\nconst theme = createMuiTheme({\n\ttypography: {\n\t\tbody1: {\n\t\t\tfontSize: \"0.8rem\"\n\t\t},\n\t\tbody2: {\n\t\t\tfontSize: \"0.65rem\"\n\t\t},\n\t\th5: {\n\t\t\tfontSize: \"1rem\",\n\t\t\tfontWeight: \"bold\"\n\t\t}\n\t},\n\tpalette: {\n    type: 'dark',\n    primary:{\n    \tdark: '#7986cb',\n    \tmain: '#33c9dc',\n    }\n  },\n});\n\nconst useStyles = makeStyles(theme => ({\n\tresizable: {\n\t\tdisplay: \"flex\",\n\t\twidth: \"100%\"\n\t}\n}));\n\nexport default function Main() {\n\tconst classes = useStyles();\n\treturn (\n\t\t<UserProvider>\n\t\t\t<ProgressProvider>\n\t\t\t\t<BotProvider>\n\t\t\t\t\t<ArticleBoardInfoProvider>\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<Container\n\t\t\t\t\t\t\t\tcomponent=\"main\"\n\t\t\t\t\t\t\t\tmaxWidth=\"lg\"\n\t\t\t\t\t\t\t\tdisableGutters=\"true\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t\t\t\t<Login />\n\t\t\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t\t\t<Bar />\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item className={classes.resizable}>\n\t\t\t\t\t\t\t\t\t\t<Resizable\n\t\t\t\t\t\t\t\t\t\t\tdefaultSize={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth: \"25vw\",\n\t\t\t\t\t\t\t\t\t\t\t\theight: \"100%\"\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tenable={{ top:false, right:true, bottom:false, left:false, topRight:false, bottomRight:false, bottomLeft:false, topLeft:false }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<BoardArea />\n\t\t\t\t\t\t\t\t\t\t</Resizable>\n\t\t\t\t\t\t\t\t\t\t<ArticleArea />\n\t\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t\t<MySnackbar />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</ArticleBoardInfoProvider>\n\t\t\t\t</BotProvider>\n\t\t\t</ProgressProvider>\n\t\t</UserProvider>\n\t);\n}\n","import React, { Component } from \"react\";\nimport Main from \"./components/Main\";\n\nclass App extends Component {\n\trender() {\n\t\treturn <Main />;\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Article\", {\n  enumerable: true,\n  get: function get() {\n    return _article.Article;\n  }\n});\nObject.defineProperty(exports, \"Board\", {\n  enumerable: true,\n  get: function get() {\n    return _board.Board;\n  }\n});\nObject.defineProperty(exports, \"Mail\", {\n  enumerable: true,\n  get: function get() {\n    return _mail.Mail;\n  }\n});\n\nvar _article = require(\"./article\");\n\nvar _board = require(\"./board\");\n\nvar _mail = require(\"./mail\");","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"decode\", {\n  enumerable: true,\n  get: function get() {\n    return _decode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"encode\", {\n  enumerable: true,\n  get: function get() {\n    return _encode[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"keymap\", {\n  enumerable: true,\n  get: function get() {\n    return _keymap[\"default\"];\n  }\n});\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _keymap = _interopRequireDefault(require(\"./keymap\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dbcswidth = dbcswidth;\nexports.getWidth = getWidth;\nexports.indexOfWidth = indexOfWidth;\nexports.substrWidth = substrWidth;\n\nvar _wcwidth = _interopRequireDefault(require(\"wcwidth\"));\n\nfunction dbcswidth(str) {\n  return str.split('').reduce(function (sum, c) {\n    return sum + (c.charCodeAt(0) > 255 ? 2 : 1);\n  }, 0);\n}\n/**\n* calculate width of string.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n*/\n\n\nfunction getWidth(widthType, str) {\n  switch (widthType) {\n    case 'length':\n      return str.length;\n\n    case 'wcwidth':\n      return (0, _wcwidth[\"default\"])(str);\n\n    case 'dbcs':\n      return dbcswidth(str);\n\n    default:\n      throw new Error(\"Invalid widthType \\\"\".concat(widthType, \"\\\"\"));\n  }\n}\n/**\n* calculate the position that the prefix of string is a specific width\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} width - the width of target string\n*/\n\n\nfunction indexOfWidth(widthType, str, width) {\n  if (widthType === 'length') {\n    return Math.min(width, str.length);\n  }\n\n  for (var i = 0; i <= str.length; i++) {\n    if (getWidth(widthType, str.substr(0, i)) > width) {\n      return i - 1;\n    }\n  }\n\n  return str.length;\n}\n/**\n* extract parts of string, beginning at the character at the specified position,\n* and returns the specified width of characters. if the character is incomplete,\n* it will be replaced by space.\n* @params {string} widthType - calculate width by wcwidth or String.length\n* @params {string} str - string to calculate\n* @params {number} startWidth - the beginning position of string\n* @params {number} width - the width of target string\n*/\n\n\nfunction substrWidth(widthType, str, startWidth, width) {\n  var ignoreWidth = typeof width === 'undefined';\n  var length = width;\n  var start = startWidth;\n  var prefixSpace = 0,\n      suffixSpace = 0;\n\n  if (widthType !== 'length') {\n    start = indexOfWidth(widthType, str, startWidth);\n\n    if (getWidth(widthType, str.substr(0, start)) < startWidth) {\n      start += 1;\n      prefixSpace = Math.max(getWidth(widthType, str.substr(0, start)) - startWidth, 0);\n    }\n\n    if (!ignoreWidth) {\n      length = indexOfWidth(widthType, str.substr(start), width - prefixSpace);\n      suffixSpace = Math.min(width, getWidth(widthType, str.substr(start))) - (prefixSpace + getWidth(widthType, str.substr(start, length)));\n    }\n  }\n\n  var substr = ignoreWidth ? str.substr(start) : str.substr(start, length);\n  return ' '.repeat(prefixSpace) + substr + ' '.repeat(suffixSpace);\n}"],"sourceRoot":""}